(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"5a1N":function(e,a,r){"use strict";r.r(a);var t=r("p0pE"),n=r.n(t),s=r("d6i3"),c=r.n(s),p=(r("miYZ"),r("tsqr")),o=r("y0tt"),d=r("mjZG");function i(e){var a=e.page,r=e.find_str,t=new FormData;return t.append("page",a),t.append("limit",d["f"]),t.append("find_str",r),Object(o["a"])(`${d["c"]}/index/partner/page`,{method:"POST",body:t})}function u(){return Object(o["a"])(`${d["c"]}/index/role/menu-list`,{method:"GET"})}function f(e){var a=new FormData;return Object.keys(e).forEach((r,t)=>{"role_menu"===r?a.append(r,JSON.stringify(e[r])||""):a.append(r,e[r]||"")}),Object(o["a"])(`${d["c"]}/index/partner/add`,{method:"POST",body:a})}function l(e){var a=new FormData;return a.append("id",e),Object(o["a"])(`${d["c"]}/index/partner/info`,{method:"POST",body:a})}function m(e){var a=new FormData;return Object.keys(e).forEach((r,t)=>{"role_menu"===r?a.append(r,JSON.stringify(e[r])||""):a.append(r,e[r]||"")}),Object(o["a"])(`${d["c"]}/index/partner/update`,{method:"POST",body:a})}function w(e){var a=new FormData;return a.append("id",e),Object(o["a"])(`${d["c"]}/index/partner/forbidden`,{method:"POST",body:a})}a["default"]={namespace:"partner",state:{partnerList:[{company_name:1,id:22,user:111,phone:18989898989}],partnerPage:1,partnerTotal:0,find_str:"",menu_list:[],currentPartnerInfo:{}},subscriptions:{setup(e){e.dispatch;var a=e.history;return a.listen(e=>{e.pathname,e.query})}},effects:{fetchPartnerList:c.a.mark(function e(a,r){var t,n,s,o,d,u,f,l,m;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.payload,n=t.page,s=void 0===n?1:n,o=t.find_str,d=void 0===o?"":o,u=r.call,f=r.put,e.next=4,u(i,{page:s,find_str:d});case 4:if(l=e.sent,m=l.data,1!==parseInt(m.code,10)){e.next=11;break}return e.next=9,f({type:"save",payload:{partnerList:m.data.list,partnerPage:parseInt(s,10),partnerTotal:parseInt(m.data.total,10),find_str:d}});case 9:e.next=12;break;case 11:p["a"].error(m.msg);case 12:case"end":return e.stop()}},e)}),fetchMenuList:c.a.mark(function e(a,r){var t,n,s,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a.payload,t=r.call,n=r.put,e.next=4,t(u);case 4:if(s=e.sent,o=s.data,1!==parseInt(o.code,10)){e.next=11;break}return e.next=9,n({type:"save",payload:{menu_list:o.data.list}});case 9:e.next=12;break;case 11:p["a"].error(o.msg);case 12:case"end":return e.stop()}},e)}),insertPartner:c.a.mark(function e(a,r){var t,n,s,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.payload.form,n=r.call,e.next=4,n(f,t);case 4:s=e.sent,o=s.data,1===parseInt(o.code,10)?p["a"].success(o.msg):p["a"].error(o.msg);case 7:case"end":return e.stop()}},e)}),inquirePartnerInfoById:c.a.mark(function e(a,r){var t,n,s,o,d;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.payload.id,n=r.call,s=r.put,e.next=4,n(l,t);case 4:if(o=e.sent,d=o.data,1!==parseInt(d.code,10)){e.next=11;break}return e.next=9,s({type:"save",payload:{currentPartnerInfo:d.data.info}});case 9:e.next=12;break;case 11:p["a"].error(d.msg);case 12:case"end":return e.stop()}},e)}),updatePartnerInfoById:c.a.mark(function e(a,r){var t,n,s,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.payload.form,n=r.call,e.next=4,n(m,t);case 4:s=e.sent,o=s.data,1===parseInt(o.code,10)?p["a"].success(o.msg):p["a"].error(o.msg);case 7:case"end":return e.stop()}},e)}),disabledPartner:c.a.mark(function e(a,r){var t,n,s,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.payload.id,n=r.call,e.next=4,n(w,t);case 4:s=e.sent,o=s.data,1===parseInt(o.code,10)?p["a"].success(o.msg):p["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})},reducers:{save(e,a){return n()({},e,a.payload)}}}}}]);