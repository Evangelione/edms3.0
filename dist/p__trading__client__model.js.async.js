(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{XM3e:function(e,a,t){"use strict";t.r(a);var r=t("MVZn"),n=t.n(r),s=t("o0o1"),c=t.n(s),i=(t("miYZ"),t("tsqr")),o=t("Gp7E");a["default"]={namespace:"client",state:{clientList:[],clientPage:1,clientTotal:0,currentClientInfo:{},customer_name:"",siteList:[],sitePage:1,siteTotal:0,currentSiteInfo:{},site_name:"",salesHistoryList:[],salesHistoryPage:1,salesHistoryTotal:0,reconciliationHistoryList:[],reconciliationHistoryPage:1,reconciliationHistoryTotal:0,clientCondition:{},reconciliationClient:{},detailHistoryList:[],detailHistoryPage:1,detailHistoryTotal:0},subscriptions:{setup(e){e.dispatch;var a=e.history;return a.listen(e=>{e.pathname,e.query})}},effects:{fetchClientList:c.a.mark(function e(a,t){var r,n,s,u,l,p,d,m,f;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=r.page,s=void 0===n?1:n,u=r.customer_name,l=void 0===u?"":u,p=t.call,d=t.put,e.next=4,p(o["g"],{page:s,customer_name:l});case 4:if(m=e.sent,f=m.data,1!==parseInt(f.code,10)){e.next=11;break}return e.next=9,d({type:"save",payload:{clientList:f.data.list,clientPage:parseInt(s,10),clientTotal:parseInt(f.data.total,10),customer_name:l}});case 9:e.next=12;break;case 11:i["a"].error(f.msg);case 12:case"end":return e.stop()}},e,this)}),insertClient:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.form,n=t.call,e.next=4,n(o["n"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success(u.msg):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)}),updateClientInfo:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.form,n=t.call,e.next=4,n(o["t"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success(u.msg):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)}),updateClientContact:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.form,n=t.call,e.next=4,n(o["s"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success(u.msg):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)}),inquireClientInfoById:c.a.mark(function e(a,t){var r,n,s,u,l;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,s=t.put,e.next=4,n(o["l"],r);case 4:if(u=e.sent,l=u.data,1!==parseInt(l.code,10)){e.next=11;break}return e.next=9,s({type:"save",payload:{currentClientInfo:l.data.info}});case 9:e.next=12;break;case 11:i["a"].error(l.msg);case 12:case"end":return e.stop()}},e,this)}),setClientFinance:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.call,e.next=4,n(o["q"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success(u.msg):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)}),fetchSiteList:c.a.mark(function e(a,t){var r,n,s,u,l,p,d,m,f,h;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=r.page,s=void 0===n?1:n,u=r.customer_id,l=r.site_name,p=void 0===l?"":l,d=t.call,m=t.put,e.next=4,d(o["k"],{page:s,customer_id:u,site_name:p});case 4:if(f=e.sent,h=f.data,1!==parseInt(h.code,10)){e.next=11;break}return e.next=9,m({type:"save",payload:{siteList:h.data.list,sitePage:parseInt(s,10),siteTotal:parseInt(h.data.total,10),site_name:p}});case 9:e.next=12;break;case 11:i["a"].error(h.msg);case 12:case"end":return e.stop()}},e,this)}),insertSite:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.form,n=t.call,e.next=4,n(o["o"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success(u.msg):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)}),updateSiteInfo:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.form,n=t.call,e.next=4,n(o["u"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success(u.msg):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)}),inquireSiteInfoById:c.a.mark(function e(a,t){var r,n,s,u,l;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,s=t.put,e.next=4,n(o["m"],r);case 4:if(u=e.sent,l=u.data,1!==parseInt(l.code,10)){e.next=11;break}return e.next=9,s({type:"save",payload:{currentSiteInfo:l.data.info}});case 9:e.next=12;break;case 11:i["a"].error(l.msg);case 12:case"end":return e.stop()}},e,this)}),deleteSite:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,e.next=4,n(o["e"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success("\u5df2\u79fb\u9664"):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)}),upLoadExcel:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.file,n=t.call,e.next=4,n(o["r"],r);case 4:s=e.sent,u=s.data;try{1===parseInt(u.code,10)?i["a"].success(`\u5bfc\u5165\u6210\u529f ${u.num.success_num} \u6761`):i["a"].error(u.msg)}catch(e){i["a"].error(e)}case 7:case"end":return e.stop()}},e,this)}),fetchOrderCondition:c.a.mark(function e(a,t){var r,n,s,u,l;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.customer_id,n=t.call,s=t.put,e.next=4,n(o["h"],r);case 4:if(u=e.sent,l=u.data,1!==parseInt(l.code,10)){e.next=11;break}return e.next=9,s({type:"save",payload:{clientCondition:l.data}});case 9:e.next=12;break;case 11:i["a"].error(l.msg);case 12:case"end":return e.stop()}},e,this)}),fetchClientHistory:c.a.mark(function e(a,t){var r,n,s,u,l,p,d,m;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=r.form,s=r.page,u=void 0===s?1:s,l=t.call,p=t.put,e.next=4,l(o["f"],n,u);case 4:if(d=e.sent,m=d.data,1!==parseInt(m.code,10)){e.next=11;break}return e.next=9,p({type:"save",payload:{salesHistoryList:m.data.list,salesHistoryPage:parseInt(u,10),salesHistoryTotal:parseInt(m.data.total,10)}});case 9:e.next=12;break;case 11:i["a"].error(m.msg);case 12:case"end":return e.stop()}},e,this)}),fetchReconciliationHistory:c.a.mark(function e(a,t){var r,n,s,u,l,p,d,m;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=r.form,s=r.page,u=void 0===s?1:s,l=t.call,p=t.put,e.next=4,l(o["j"],n,u);case 4:if(d=e.sent,m=d.data,1!==parseInt(m.code,10)){e.next=11;break}return e.next=9,p({type:"save",payload:{reconciliationHistoryList:m.data.list,reconciliationHistoryPage:parseInt(u,10),reconciliationHistoryTotal:parseInt(m.data.total,10),reconciliationClient:m.data.customer}});case 9:e.next=12;break;case 11:i["a"].error(m.msg);case 12:case"end":return e.stop()}},e,this)}),deleteReconciliationHistory:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,t.put,e.next=4,n(o["d"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success(u.msg):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)}),confirmReconciliation:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,t.put,e.next=4,n(o["b"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success(u.msg):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)}),payment:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,t.put,e.next=4,n(o["p"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success(u.msg):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)}),billing:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,t.put,e.next=4,n(o["a"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success(u.msg):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)}),fetchReconciliationDetail:c.a.mark(function e(a,t){var r,n,s,u,l,p,d,m;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=r.page,s=void 0===n?1:n,u=r.id,l=t.call,p=t.put,e.next=4,l(o["i"],u);case 4:if(d=e.sent,m=d.data,1!==parseInt(m.code,10)){e.next=11;break}return e.next=9,p({type:"save",payload:{detailHistoryList:m.data.list,detailHistoryPage:parseInt(s,10),detailHistoryTotal:parseInt(m.data.total,10)}});case 9:e.next=12;break;case 11:i["a"].error(m.msg);case 12:case"end":return e.stop()}},e,this)}),deleteClient:c.a.mark(function e(a,t){var r,n,s,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,e.next=4,n(o["c"],r);case 4:s=e.sent,u=s.data,1===parseInt(u.code,10)?i["a"].success(u.msg):i["a"].error(u.msg);case 7:case"end":return e.stop()}},e,this)})},reducers:{save(e,a){return n()({},e,{},a.payload)}}}}}]);