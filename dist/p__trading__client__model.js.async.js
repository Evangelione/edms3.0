(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{XM3e:function(e,a,t){"use strict";t.r(a);var n=t("MVZn"),r=t.n(n),s=t("o0o1"),c=t.n(s),o=(t("miYZ"),t("tsqr")),i=t("y0tt"),d=t("mjZG");function p(e){var a=e.page,t=e.customer_name,n=new FormData;return n.append("page",a),n.append("limit",d["f"]),n.append("customer_name",t),Object(i["a"])(`${d["c"]}/index/cust/page`,{method:"POST",body:n})}function u(e){var a=new FormData;return Object.keys(e).forEach((t,n)=>{a.append(t,e[t]||"")}),Object(i["a"])(`${d["c"]}/index/cust/add`,{method:"POST",body:a})}function l(e){var a=new FormData;return Object.keys(e).forEach((t,n)=>{a.append(t,e[t]||"")}),Object(i["a"])(`${d["c"]}/index/cust/update`,{method:"POST",body:a})}function m(e){var a=new FormData;return Object.keys(e).forEach((t,n)=>{a.append(t,e[t]||"")}),Object(i["a"])(`${d["c"]}/index/cust/update-contact`,{method:"POST",body:a})}function f(e){var a=new FormData;return a.append("id",e),Object(i["a"])(`${d["c"]}/index/cust/info`,{method:"POST",body:a})}function h(e){var a=new FormData;return Object.keys(e).forEach((t,n)=>{a.append(t,e[t]||"")}),Object(i["a"])(`${d["c"]}/index/cust/set-finance`,{method:"POST",body:a})}function y(e){var a=e.page,t=e.customer_id,n=e.site_name,r=new FormData;return r.append("page",a),r.append("limit",d["f"]),r.append("customer_id",t),r.append("site_name",n),Object(i["a"])(`${d["c"]}/index/site/page`,{method:"POST",body:r})}function w(e){var a=new FormData;return Object.keys(e).forEach((t,n)=>{a.append(t,e[t]||"")}),Object(i["a"])(`${d["c"]}/index/site/add`,{method:"POST",body:a})}function x(e){var a=new FormData;return Object.keys(e).forEach((t,n)=>{a.append(t,e[t]||"")}),Object(i["a"])(`${d["c"]}/index/site/update`,{method:"POST",body:a})}function v(e){var a=new FormData;return a.append("id",e),Object(i["a"])(`${d["c"]}/index/site/info`,{method:"POST",body:a})}function b(e){var a=new FormData;return a.append("id",e),Object(i["a"])(`${d["c"]}/index/site/delete`,{method:"POST",body:a})}function g(e){var a=new FormData;return a.append(e.filename,e.file),Object(i["a"])(e.action,{method:"POST",body:a})}function O(e){var a=new FormData;return a.append("customer_id",e),Object(i["a"])(`${d["c"]}/index/cust/corder-condition`,{method:"POST",body:a})}function k(e,a){var t=new FormData;return Object.keys(e).forEach((a,n)=>{t.append(a,e[a]||"")}),t.append("page",a),t.append("limit",d["f"]),Object(i["a"])(`${d["c"]}/index/cust/order-page`,{method:"POST",body:t})}function I(e,a){var t=new FormData;return Object.keys(e).forEach((a,n)=>{t.append(a,e[a]||"")}),t.append("page",a),t.append("limit",d["f"]),Object(i["a"])(`${d["c"]}/index/cust/corder-page`,{method:"POST",body:t})}function j(e){var a=new FormData;return a.append("id",e),Object(i["a"])(`${d["c"]}/index/cust/corder-delete`,{method:"POST",body:a})}function T(e){var a=new FormData;return a.append("id",e),Object(i["a"])(`${d["c"]}/index/cust/corder-export`,{method:"POST",body:a,headers:{responseType:"arraybuffer"}})}a["default"]={namespace:"client",state:{clientList:[],clientPage:1,clientTotal:0,currentClientInfo:{},customer_name:"",siteList:[],sitePage:1,siteTotal:0,currentSiteInfo:{},site_name:"",salesHistoryList:[],salesHistoryPage:1,salesHistoryTotal:0,reconciliationHistoryList:[],reconciliationHistoryPage:1,reconciliationHistoryTotal:0,clientCondition:{},reconciliationClient:{}},subscriptions:{setup(e){e.dispatch;var a=e.history;return a.listen(e=>{e.pathname,e.query})}},effects:{fetchClientList:c.a.mark(function e(a,t){var n,r,s,i,d,u,l,m,f;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload,r=n.page,s=void 0===r?1:r,i=n.customer_name,d=void 0===i?"":i,u=t.call,l=t.put,e.next=4,u(p,{page:s,customer_name:d});case 4:if(m=e.sent,f=m.data,1!==parseInt(f.code,10)){e.next=11;break}return e.next=9,l({type:"save",payload:{clientList:f.data.list,clientPage:parseInt(s,10),clientTotal:parseInt(f.data.total,10),customer_name:d}});case 9:e.next=12;break;case 11:o["a"].error(f.msg);case 12:case"end":return e.stop()}},e,this)}),insertClient:c.a.mark(function e(a,t){var n,r,s,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.form,r=t.call,e.next=4,r(u,n);case 4:s=e.sent,i=s.data,1===parseInt(i.code,10)?o["a"].success(i.msg):o["a"].error(i.msg);case 7:case"end":return e.stop()}},e,this)}),updateClientInfo:c.a.mark(function e(a,t){var n,r,s,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.form,r=t.call,e.next=4,r(l,n);case 4:s=e.sent,i=s.data,1===parseInt(i.code,10)?o["a"].success(i.msg):o["a"].error(i.msg);case 7:case"end":return e.stop()}},e,this)}),updateClientContact:c.a.mark(function e(a,t){var n,r,s,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.form,r=t.call,e.next=4,r(m,n);case 4:s=e.sent,i=s.data,1===parseInt(i.code,10)?o["a"].success(i.msg):o["a"].error(i.msg);case 7:case"end":return e.stop()}},e,this)}),inquireClientInfoById:c.a.mark(function e(a,t){var n,r,s,i,d;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.id,r=t.call,s=t.put,e.next=4,r(f,n);case 4:if(i=e.sent,d=i.data,1!==parseInt(d.code,10)){e.next=11;break}return e.next=9,s({type:"save",payload:{currentClientInfo:d.data.info}});case 9:e.next=12;break;case 11:o["a"].error(d.msg);case 12:case"end":return e.stop()}},e,this)}),setClientFinance:c.a.mark(function e(a,t){var n,r,s,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload,r=t.call,e.next=4,r(h,n);case 4:s=e.sent,i=s.data,1===parseInt(i.code,10)?o["a"].success(i.msg):o["a"].error(i.msg);case 7:case"end":return e.stop()}},e,this)}),fetchSiteList:c.a.mark(function e(a,t){var n,r,s,i,d,p,u,l,m,f;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload,r=n.page,s=void 0===r?1:r,i=n.customer_id,d=n.site_name,p=void 0===d?"":d,u=t.call,l=t.put,e.next=4,u(y,{page:s,customer_id:i,site_name:p});case 4:if(m=e.sent,f=m.data,1!==parseInt(f.code,10)){e.next=11;break}return e.next=9,l({type:"save",payload:{siteList:f.data.list,sitePage:parseInt(s,10),siteTotal:parseInt(f.data.total,10),site_name:p}});case 9:e.next=12;break;case 11:o["a"].error(f.msg);case 12:case"end":return e.stop()}},e,this)}),insertSite:c.a.mark(function e(a,t){var n,r,s,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.form,r=t.call,e.next=4,r(w,n);case 4:s=e.sent,i=s.data,1===parseInt(i.code,10)?o["a"].success(i.msg):o["a"].error(i.msg);case 7:case"end":return e.stop()}},e,this)}),updateSiteInfo:c.a.mark(function e(a,t){var n,r,s,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.form,r=t.call,e.next=4,r(x,n);case 4:s=e.sent,i=s.data,1===parseInt(i.code,10)?o["a"].success(i.msg):o["a"].error(i.msg);case 7:case"end":return e.stop()}},e,this)}),inquireSiteInfoById:c.a.mark(function e(a,t){var n,r,s,i,d;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.id,r=t.call,s=t.put,e.next=4,r(v,n);case 4:if(i=e.sent,d=i.data,1!==parseInt(d.code,10)){e.next=11;break}return e.next=9,s({type:"save",payload:{currentSiteInfo:d.data.info}});case 9:e.next=12;break;case 11:o["a"].error(d.msg);case 12:case"end":return e.stop()}},e,this)}),deleteSite:c.a.mark(function e(a,t){var n,r,s,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.id,r=t.call,e.next=4,r(b,n);case 4:s=e.sent,i=s.data,1===parseInt(i.code,10)?o["a"].success("\u5df2\u79fb\u9664"):o["a"].error(i.msg);case 7:case"end":return e.stop()}},e,this)}),upLoadExcel:c.a.mark(function e(a,t){var n,r,s,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.file,r=t.call,e.next=4,r(g,n);case 4:s=e.sent,i=s.data;try{1===parseInt(i.code,10)?o["a"].success(`\u5bfc\u5165\u6210\u529f ${i.num.success_num} \u6761`):o["a"].error(i.msg)}catch(e){o["a"].error(e)}case 7:case"end":return e.stop()}},e,this)}),fetchOrderCondition:c.a.mark(function e(a,t){var n,r,s,i,d;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.customer_id,r=t.call,s=t.put,e.next=4,r(O,n);case 4:if(i=e.sent,d=i.data,1!==parseInt(d.code,10)){e.next=11;break}return e.next=9,s({type:"save",payload:{clientCondition:d.data}});case 9:e.next=12;break;case 11:o["a"].error(d.msg);case 12:case"end":return e.stop()}},e,this)}),fetchClientHistory:c.a.mark(function e(a,t){var n,r,s,i,d,p,u,l;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload,r=n.form,s=n.page,i=void 0===s?1:s,d=t.call,p=t.put,e.next=4,d(k,r,i);case 4:if(u=e.sent,l=u.data,1!==parseInt(l.code,10)){e.next=11;break}return e.next=9,p({type:"save",payload:{salesHistoryList:l.data.list,salesHistoryPage:parseInt(i,10),salesHistoryTotal:parseInt(l.data.total,10)}});case 9:e.next=12;break;case 11:o["a"].error(l.msg);case 12:case"end":return e.stop()}},e,this)}),fetchReconciliationHistory:c.a.mark(function e(a,t){var n,r,s,i,d,p,u,l;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload,r=n.form,s=n.page,i=void 0===s?1:s,d=t.call,p=t.put,e.next=4,d(I,r,i);case 4:if(u=e.sent,l=u.data,1!==parseInt(l.code,10)){e.next=11;break}return e.next=9,p({type:"save",payload:{reconciliationHistoryList:l.data.list,reconciliationHistoryPage:parseInt(i,10),reconciliationHistoryTotal:parseInt(l.data.total,10),reconciliationClient:l.data.customer}});case 9:e.next=12;break;case 11:o["a"].error(l.msg);case 12:case"end":return e.stop()}},e,this)}),deleteReconciliationHistory:c.a.mark(function e(a,t){var n,r,s,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.id,r=t.call,t.put,e.next=4,r(j,n);case 4:s=e.sent,i=s.data,1===parseInt(i.code,10)?o["a"].success(i.msg):o["a"].error(i.msg);case 7:case"end":return e.stop()}},e,this)}),downloadExcel:c.a.mark(function e(a,t){var n,r,s,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.payload.id,r=t.call,t.put,e.next=4,r(T,n);case 4:s=e.sent,o=s.data,console.log(o);case 7:case"end":return e.stop()}},e,this)})},reducers:{save(e,a){return r()({},e,{},a.payload)}}}}}]);