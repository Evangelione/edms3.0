(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{TCwS:function(e,a,t){"use strict";t.r(a);var r=t("p0pE"),n=t.n(r),s=(t("miYZ"),t("tsqr")),c=t("d6i3"),i=t.n(c),p=t("y0tt"),o=t("mjZG");function d(e){var a=e.id;return Object(p["a"])(`${o["c"]}/index/supp/corder-condition?id=${a}`)}function u(e){var a=e.methodData,t=a.supplier_id,r=a.time_start,n=a.time_end,s=a.car_head_id,c=a.supp_goods_id,i=a.cust_site_id,d=a.status,u=a.page,l=a.limit;return Object(p["a"])(`${o["c"]}/index/supp/order-page?supplier_id=${t}&time_start=${r}&time_end=${n}&car_head_id=${s}&supp_goods_id=${c}&cust_site_id=${i}&status=${d}&page=${u}&limit=${l}`)}function l(e){var a=e.supplier_id,t=e.time_start,r=e.time_end,n=new FormData;return n.append("supplier_id",a),n.append("time_start",t),n.append("time_end",r),Object(p["a"])(`${o["c"]}/index/supp/corder`,{method:"POST",body:n})}function m(e){var a=e.methodData,t=a.supplier_id,r=a.time_start,n=a.time_end,s=a.supp_goods_id,c=a.cust_site_id,i=a.status,d=a.page,u=a.limit;return Object(p["a"])(`${o["c"]}/index/supp/corder-page?supplier_id=${t}&time_start=${r}&time_end=${n}&supp_goods_id=${s}&cust_site_id=${c}&status=${i}&page=${d}&limit=${u}`)}function f(e){var a=e.id;return Object(p["a"])(`${o["c"]}/index/supp/corder-detail?id=${a}`)}function h(e){var a=e.id,t=new FormData;return t.append("id",a),Object(p["a"])(`${o["c"]}/index/supp/corder-delete`,{method:"POST",body:t})}function x(e){var a=e.id,t=new FormData;return t.append("id",a),Object(p["a"])(`${o["c"]}/index/supp/corder-confirm`,{method:"POST",body:t})}function y(e){var a=e.id,t=new FormData;return t.append("id",a),Object(p["a"])(`${o["c"]}/index/supp/corder-pay`,{method:"POST",body:t})}function _(e){var a=e.id,t=new FormData;return t.append("id",a),Object(p["a"])(`${o["c"]}/index/supp/invoice`,{method:"POST",body:t})}function g(e){var a=e.id;window.open(`${o["c"]}/index/supp/corder-export?id=${a}`)}function w(e){var a=e.page,t=e.supp_name,r=new FormData;return r.append("page",a),r.append("limit",o["f"]),r.append("supp_name",t),Object(p["a"])(`${o["c"]}/index/supp/page`,{method:"POST",body:r})}function v(e){var a=new FormData;return Object.keys(e).forEach((t,r)=>{a.append(t,e[t]||"")}),Object(p["a"])(`${o["c"]}/index/supp/add`,{method:"POST",body:a})}function b(e){var a=new FormData;return Object.keys(e).forEach((t,r)=>{a.append(t,e[t]||"")}),Object(p["a"])(`${o["c"]}/index/supp/update`,{method:"POST",body:a})}function k(e){var a=new FormData;return Object.keys(e).forEach((t,r)=>{a.append(t,e[t]||"")}),Object(p["a"])(`${o["c"]}/index/supp/update-contact`,{method:"POST",body:a})}function O(e){var a=new FormData;return a.append("id",e),Object(p["a"])(`${o["c"]}/index/supp/info`,{method:"POST",body:a})}function P(e){var a=new FormData;return Object.keys(e).forEach((t,r)=>{a.append(t,e[t]||"")}),Object(p["a"])(`${o["c"]}/index/supp/set-finance`,{method:"POST",body:a})}function S(e){var a=e.page,t=e.supp_id,r=e.goods_name,n=new FormData;return n.append("page",a),n.append("limit",o["f"]),n.append("supp_id",t),n.append("goods_name",r),Object(p["a"])(`${o["c"]}/index/goods/page`,{method:"POST",body:n})}function $(e){var a=new FormData;return Object.keys(e).forEach((t,r)=>{a.append(t,e[t]||"")}),Object(p["a"])(`${o["c"]}/index/goods/add`,{method:"POST",body:a})}function I(e){var a=new FormData;return Object.keys(e).forEach((t,r)=>{a.append(t,e[t]||"")}),Object(p["a"])(`${o["c"]}/index/goods/update`,{method:"POST",body:a})}function D(e){var a=new FormData;return a.append("id",e),Object(p["a"])(`${o["c"]}/index/goods/info`,{method:"POST",body:a})}function j(e){var a=new FormData;return a.append("id",e),Object(p["a"])(`${o["c"]}/index/goods/delete`,{method:"POST",body:a})}function L(e){var a=new FormData;return a.append(e.filename,e.file),Object(p["a"])(e.action,{method:"POST",body:a})}function T(e){var a=e.file,t=e.id,r=new FormData;return r.append(a.filename,a.file),r.append("id",t),Object(p["a"])(a.action,{method:"POST",body:r})}function H(e){var a=e.page,t=e.supplier_id,r=new FormData;return r.append("page",a),r.append("limit",o["f"]),r.append("supplier_id",t),Object(p["a"])(`${o["c"]}/index/supp/order-page`,{method:"POST",body:r})}function F(e){var a=new FormData;return a.append("id",e),Object(p["a"])(`${o["c"]}/index/supp/delete`,{method:"POST",body:a})}a["default"]={namespace:"supplier",state:{supplierList:[],supplierPage:1,supplierTotal:0,currentSupplierInfo:{},supp_name:"",gasSourceList:[],gasSourcePage:1,gasSourceTotal:0,currentGasSourceInfo:{},report_url:"",file_name:"",goods_name:"",salesHistoryList:[],salesHistoryPage:1,salesHistoryTotal:0,reconciliationHistoryList:[{id:"1",kh:"\u80e1\u5f66\u658c12",age:32,address:"\u897f\u6e56\u533a\u6e56\u5e95\u516c\u56ed1\u53f7"},{id:"2",kh:"\u80e1\u5f66\u7956",age:42,address:"\u897f\u6e56\u533a\u6e56\u5e95\u516c\u56ed1\u53f7"}],reconciliationHistoryPage:1,reconciliationHistoryTotal:0},subscriptions:{setup(e){e.dispatch;var a=e.history;return a.listen(e=>{e.pathname,e.query})}},effects:{supp_fetchCorderGoodsConditionList:i.a.mark(function e(a,t){var r,n,s,c,p,u,l,m,f;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=r.id,s=r.type,c=t.call,p=t.put,e.next=4,c(d,{id:n});case 4:if(u=e.sent,l=u.data,1!==parseInt(l.code,10)){e.next=18;break}return e.next=9,p({type:"save",payload:{supp_CorderGoodsConditionList:l.data}});case 9:if("cg"!=s){e.next=15;break}return m={supplier_id:n,time_start:"",time_end:"",car_head_id:l.data.cars[0].id,supp_goods_id:l.data.goods[0].id,cust_site_id:l.data.sites[0].id,status:"",page:1,limit:o["f"]},e.next=13,p({type:"supp_fetchPurchaseHistoryPageList",payload:{methodData:m}});case 13:e.next=18;break;case 15:return f={supplier_id:n,time_start:"",time_end:"",supp_goods_id:l.data.goods[0].id,cust_site_id:l.data.sites[0].id,status:"",page:1,limit:o["f"]},e.next=18,p({type:"supp_fetchReconciliationHistoryPageList",payload:{methodData:f}});case 18:case"end":return e.stop()}},e)}),supp_fetchPurchaseHistoryPageList:i.a.mark(function e(a,t){var r,n,c,p,o;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.methodData,n=t.call,c=t.put,e.next=4,n(u,{methodData:r});case 4:if(p=e.sent,o=p.data,1!==parseInt(o.code,10)){e.next=11;break}return e.next=9,c({type:"save",payload:{supp_PurchaseHistoryPageList:o.data,supp_PurchaseHistoryPageListMethod:r}});case 9:e.next=12;break;case 11:s["a"].error(o.msg);case 12:case"end":return e.stop()}},e)}),supp_fetchPurchaseHistoryAllReconciliation:i.a.mark(function e(a,t){var r,n,c,p,o,d,u;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=r.supplier_id,c=r.time_start,p=r.time_end,o=t.call,t.put,t.select,e.next=4,o(l,{supplier_id:n,time_start:c,time_end:p});case 4:d=e.sent,u=d.data,1!==parseInt(u.code,10)&&s["a"].error(u.msg);case 7:case"end":return e.stop()}},e)}),supp_fetchReconciliationHistoryPageList:i.a.mark(function e(a,t){var r,n,c,p,o;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.methodData,n=t.call,c=t.put,e.next=4,n(m,{methodData:r});case 4:if(p=e.sent,o=p.data,1!==parseInt(o.code,10)){e.next=11;break}return e.next=9,c({type:"save",payload:{supp_ReconciliationHistoryPageList:o.data,supp_ReconciliationHistoryPageListMethod:r}});case 9:e.next=12;break;case 11:s["a"].error(o.msg);case 12:case"end":return e.stop()}},e)}),supp_fetchCorderDetail:i.a.mark(function e(a,t){var r,n,c,p,o;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,c=t.put,t.select,e.next=4,n(f,{id:r});case 4:if(p=e.sent,o=p.data,1!==parseInt(o.code,10)){e.next=11;break}return e.next=9,c({type:"save",payload:{supp_CorderDetail:o.data}});case 9:e.next=12;break;case 11:s["a"].error(o.msg);case 12:case"end":return e.stop()}},e)}),supp_fetchCorderDelete:i.a.mark(function e(a,t){var r,n,c,p,o,d,u;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,c=t.put,p=t.select,e.next=4,n(h,{id:r});case 4:return o=e.sent,d=o.data,e.next=8,p(e=>e.supplier.supp_ReconciliationHistoryPageListMethod);case 8:if(u=e.sent,1!==parseInt(d.code,10)){e.next=14;break}return e.next=12,c({type:"supplier/supp_fetchReconciliationHistoryPageList",payload:{methodData:u}});case 12:e.next=15;break;case 14:s["a"].error(d.msg);case 15:case"end":return e.stop()}},e)}),supp_fetchCorderReconciliation:i.a.mark(function e(a,t){var r,n,c,p,o,d,u;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,c=t.put,p=t.select,e.next=4,n(x,{id:r});case 4:return o=e.sent,d=o.data,e.next=8,p(e=>e.supplier.supp_ReconciliationHistoryPageListMethod);case 8:if(u=e.sent,1!==parseInt(d.code,10)){e.next=14;break}return e.next=12,c({type:"supp_fetchReconciliationHistoryPageList",payload:{methodData:u}});case 12:e.next=15;break;case 14:s["a"].error(d.msg);case 15:case"end":return e.stop()}},e)}),supp_fetchCorderPayment:i.a.mark(function e(a,t){var r,n,c,p,o,d,u;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,c=t.put,p=t.select,e.next=4,n(y,{id:r});case 4:return o=e.sent,d=o.data,e.next=8,p(e=>e.supplier.supp_ReconciliationHistoryPageListMethod);case 8:if(u=e.sent,1!==parseInt(d.code,10)){e.next=14;break}return e.next=12,c({type:"supp_fetchReconciliationHistoryPageList",payload:{methodData:u}});case 12:e.next=15;break;case 14:s["a"].error(d.msg);case 15:case"end":return e.stop()}},e)}),supp_fetchCorderInvoice:i.a.mark(function e(a,t){var r,n,c,p,o,d,u;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,c=t.put,p=t.select,e.next=4,n(_,{id:r});case 4:return o=e.sent,d=o.data,e.next=8,p(e=>e.supplier.supp_ReconciliationHistoryPageListMethod);case 8:if(u=e.sent,1!==parseInt(d.code,10)){e.next=14;break}return e.next=12,c({type:"supp_fetchReconciliationHistoryPageList",payload:{methodData:u}});case 12:e.next=15;break;case 14:s["a"].error(d.msg);case 15:case"end":return e.stop()}},e)}),supp_fetchCorderExport:i.a.mark(function e(a,t){var r,n,c,p;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,t.put,t.select,e.next=4,n(g,{id:r});case 4:c=e.sent,p=c.data,1!==parseInt(p.code,10)&&s["a"].error(p.msg);case 7:case"end":return e.stop()}},e)}),fetchSupplierList:i.a.mark(function e(a,t){var r,n,c,p,o,d,u,l,m;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=r.page,c=void 0===n?1:n,p=r.supp_name,o=void 0===p?"":p,d=t.call,u=t.put,e.next=4,d(w,{page:c,supp_name:o});case 4:if(l=e.sent,m=l.data,1!==parseInt(m.code,10)){e.next=11;break}return e.next=9,u({type:"save",payload:{supplierList:m.data.list,supplierPage:parseInt(c,10),supplierTotal:parseInt(m.data.total,10),supp_name:o}});case 9:e.next=12;break;case 11:s["a"].error(m.msg);case 12:case"end":return e.stop()}},e)}),insertSupplier:i.a.mark(function e(a,t){var r,n,c,p;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.form,n=t.call,e.next=4,n(v,r);case 4:c=e.sent,p=c.data,1===parseInt(p.code,10)?s["a"].success(p.msg):s["a"].error(p.msg);case 7:case"end":return e.stop()}},e)}),updateSupplierInfo:i.a.mark(function e(a,t){var r,n,c,p;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.form,n=t.call,e.next=4,n(b,r);case 4:c=e.sent,p=c.data,1===parseInt(p.code,10)?s["a"].success(p.msg):s["a"].error(p.msg);case 7:case"end":return e.stop()}},e)}),updateSupplierContact:i.a.mark(function e(a,t){var r,n,c,p;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.form,n=t.call,e.next=4,n(k,r);case 4:c=e.sent,p=c.data,1===parseInt(p.code,10)?s["a"].success(p.msg):s["a"].error(p.msg);case 7:case"end":return e.stop()}},e)}),getSupplierInfoById:i.a.mark(function e(a,t){var r,n,c,p,o;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,c=t.put,e.next=4,n(O,r);case 4:if(p=e.sent,o=p.data,1!==parseInt(o.code,10)){e.next=11;break}return e.next=9,c({type:"save",payload:{currentSupplierInfo:o.data.info}});case 9:e.next=12;break;case 11:s["a"].error(o.msg);case 12:case"end":return e.stop()}},e)}),setSupplierFinance:i.a.mark(function e(a,t){var r,n,c,p;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.call,e.next=4,n(P,r);case 4:c=e.sent,p=c.data,1===parseInt(p.code,10)?s["a"].success(p.msg):s["a"].error(p.msg);case 7:case"end":return e.stop()}},e)}),fetchGasSourceList:i.a.mark(function e(a,t){var r,n,c,p,o,d,u,l,m,f;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=r.page,c=void 0===n?1:n,p=r.supp_id,o=r.goods_name,d=void 0===o?"":o,u=t.call,l=t.put,e.next=4,u(S,{page:c,supp_id:p,goods_name:d});case 4:if(m=e.sent,f=m.data,1!==parseInt(f.code,10)){e.next=11;break}return e.next=9,l({type:"save",payload:{gasSourceList:f.data.list,gasSourcePage:parseInt(c,10),gasSourceTotal:parseInt(f.data.total,10),goods_name:d}});case 9:e.next=12;break;case 11:s["a"].error(f.msg);case 12:case"end":return e.stop()}},e)}),insertGasSource:i.a.mark(function e(a,t){var r,n,c,p;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.form,n=t.call,e.next=4,n($,r);case 4:c=e.sent,p=c.data,1===parseInt(p.code,10)?s["a"].success(p.msg):s["a"].error(p.msg);case 7:case"end":return e.stop()}},e)}),updateGasSourceInfo:i.a.mark(function e(a,t){var r,n,c,p;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.form,n=t.call,e.next=4,n(I,r);case 4:c=e.sent,p=c.data,1===parseInt(p.code,10)?s["a"].success(p.msg):s["a"].error(p.msg);case 7:case"end":return e.stop()}},e)}),inquireGasSourceInfoById:i.a.mark(function e(a,t){var r,n,c,p,o;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,c=t.put,e.next=4,n(D,r);case 4:if(p=e.sent,o=p.data,1!==parseInt(o.code,10)){e.next=11;break}return e.next=9,c({type:"save",payload:{currentGasSourceInfo:o.data.info}});case 9:e.next=12;break;case 11:s["a"].error(o.msg);case 12:case"end":return e.stop()}},e)}),deleteGasSource:i.a.mark(function e(a,t){var r,n,c,p;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,e.next=4,n(j,r);case 4:c=e.sent,p=c.data,1===parseInt(p.code,10)?s["a"].success("\u5df2\u79fb\u9664"):s["a"].error(p.msg);case 7:case"end":return e.stop()}},e)}),upLoadExcel:i.a.mark(function e(a,t){var r,n,c,p;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.file,n=t.call,e.next=4,n(L,r);case 4:c=e.sent,p=c.data;try{1===parseInt(p.code,10)?s["a"].success(`\u5bfc\u5165\u6210\u529f ${p.num.success_num} \u6761`):s["a"].error(p.msg)}catch(e){s["a"].error(e)}case 7:case"end":return e.stop()}},e)}),postReport:i.a.mark(function e(a,t){var r,n,s,c,p,o,d;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=r.file,s=r.id,c=t.call,p=t.put,e.next=4,c(T,{file:n,id:s});case 4:if(o=e.sent,d=o.data,1!==d.code){e.next=11;break}return n.onProgress({percent:100}),n.onSuccess(),e.next=11,p({type:"save",payload:{report_url:d.data.report_url,file_name:d.data.filename}});case 11:case"end":return e.stop()}},e)}),fetchSalesHistoryList:i.a.mark(function e(a,t){var r,n,c,p,o,d,u,l;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=r.page,c=void 0===n?1:n,p=r.supplier_id,o=t.call,d=t.put,e.next=4,o(H,{page:c,supplier_id:p});case 4:if(u=e.sent,l=u.data,1!==parseInt(l.code,10)){e.next=11;break}return e.next=9,d({type:"save",payload:{salesHistoryList:l.data.list,salesHistoryPage:parseInt(c,10),salesHistoryTotal:parseInt(l.data.total,10)}});case 9:e.next=12;break;case 11:s["a"].error(l.msg);case 12:case"end":return e.stop()}},e)}),deleteSupp:i.a.mark(function e(a,t){var r,n,c,p;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,e.next=4,n(F,r);case 4:c=e.sent,p=c.data,1===parseInt(p.code,10)?s["a"].success(p.msg):s["a"].error(p.msg);case 7:case"end":return e.stop()}},e)})},reducers:{save(e,a){return n()({},e,a.payload)}}}}}]);