<<<<<<< HEAD
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0RgF":function(e,t,a){"use strict";a.r(t);a("+L6B");var n,i,l,s,r,c,o,m,p,d,h,u,g=a("2/Rp"),y=(a("Znn+"),a("ZTPi")),E=a("q1tI"),_=a.n(E),v=a("MuoO"),f=a("usdK"),C=(a("14J3"),a("BMrR")),b=(a("jCWc"),a("kPKH")),x=(a("IzEo"),a("bx4M")),S=(a("6UJt"),a("DFOY")),D=(a("5NDa"),a("5rEg")),O=(a("Pwec"),a("CtXQ")),w=(a("y8nQ"),a("Vl3Y")),k=(a("OaEy"),a("2fM7")),I=a("utR0"),N=a("mjZG"),R=a("bNTS"),Y=a.n(R),L=k["a"].Option,q=(n=Object(v["connect"])(e=>{var t=e.global,a=e.client,n=e.loading;return{global:t,client:a,loading:n.models.client}}),i=w["a"].create(),n(l=i(l=Object(I["a"])((s=class extends E["Component"]{constructor(e){super(e),this.handleSubmit=(e=>{e&&e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{if(!e){var a={id:this.props.match.params.ClientDetail,province:t.area_arr[0],city:t.area_arr[1],area:t.area_arr[2]||""};delete t.area_arr,Object.assign(t,a),this.props.dispatch({type:"client/updateClientInfo",payload:{form:t}}).then(()=>{this.setState({modifying:!1}),this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})})}})}),this.loadData=(e=>{var t=e[e.length-1];t.loading=!0,this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"cust",district_name:t.value,targetOption:t}}).then(()=>{})}),this.modify=(()=>{this.setState({modifying:!0});var e=this.props.client.currentClientInfo;this.props.dispatch({type:"global/inquireCascadeOptionsAll",payload:{module:"cust",province:e.province,city:e.city}})}),this.state={modifying:!1}}render(){var e=this.state.modifying,t=this.props,a=t.form,n=t.global,i=t.client,l=t.loading,s=i.currentClientInfo,r=n.cascadeOptions,c=a.getFieldDecorator,o=s.province+s.city+s.area||"";return _.a.createElement(x["a"],{title:_.a.createElement(_.a.Fragment,null,_.a.createElement(O["a"],{type:"idcard",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),_.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},_.a.createElement(w["a"],{onSubmit:this.handleSubmit},_.a.createElement(C["a"],{className:Y.a["info-list"]},_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7")),_.a.createElement(b["a"],{span:16,xxl:17},s.tax_number),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u516c\u53f8\u5168\u79f0")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("company_full_name",{rules:[{required:!0}],initialValue:s.company_full_name})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u5168\u79f0"}))):s.company_full_name),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u516c\u53f8\u7b80\u79f0")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("company_name",{rules:[{required:!0}],initialValue:s.company_name})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u7b80\u79f0"}))):s.company_name),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u516c\u53f8\u7c7b\u578b")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("company_flow",{rules:[{required:!0}],initialValue:s.company_flow+""})(_.a.createElement(k["a"],{style:{width:"100%"}},_.a.createElement(L,{value:"1"},"\u8d38\u6613\u5546"),_.a.createElement(L,{value:"2"},"\u96f6\u552e\u5546")))):N["i"][s.company_flow-1]),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u7701\u5e02\u533a\u53bf")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("area_arr",{rules:[{required:!0}],initialValue:[s.province,s.city,s.area]})(_.a.createElement(S["a"],{options:r,loadData:this.loadData,placeholder:"\u8bf7\u9009\u62e9\u7701\u5e02\u533a\u53bf"}))):o),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u8be6\u7ec6\u5730\u5740")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("company_address",{rules:[{required:!0}],initialValue:s.company_address})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"}))):s.company_address),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u5f00\u6237\u94f6\u884c")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("bank",{rules:[{required:!0}],initialValue:s.bank})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u9009\u62e9\u5f00\u6237\u94f6\u884c"}))):s.bank),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u94f6\u884c\u8d26\u53f7")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("bank_account",{rules:[{required:!0}],initialValue:s.bank_account})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u94f6\u884c\u8d26\u53f7"}))):s.bank_account),_.a.createElement(b["a"],{span:24,style:{textAlign:"center",marginTop:20,marginBottom:40}},e?_.a.createElement(_.a.Fragment,null,_.a.createElement(g["a"],{type:"primary",htmlType:"submit",loading:l},"\u786e\u5b9a"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(g["a"],{type:"primary",onClick:this.modify},"\u7f16\u8f91"))))))}},l=s))||l)||l)||l),M=q,V=(r=Object(v["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),c=w["a"].create(),r(o=c(o=Object(I["a"])((m=class extends E["Component"]{constructor(e){super(e),this.handleSubmit=(e=>{e&&e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{e||(t.id=this.props.match.params.ClientDetail,this.props.dispatch({type:"client/updateClientContact",payload:{form:t}}).then(()=>{this.setState({modifying:!1}),this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})}))})}),this.state={modifying:!1}}render(){var e=this.state.modifying,t=this.props,a=t.form,n=t.client,i=t.loading,l=n.currentClientInfo,s=a.getFieldDecorator;return _.a.createElement(x["a"],{title:_.a.createElement(_.a.Fragment,null,_.a.createElement(O["a"],{type:"phone",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),_.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},_.a.createElement(w["a"],{onSubmit:this.handleSubmit},_.a.createElement(C["a"],{className:Y.a["info-list"]},_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u8054\u7cfb\u4eba")),_.a.createElement(b["a"],{span:18},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},s("contact",{rules:[{required:!0}],initialValue:l.contact})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"}))):l.contact),_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u8054\u7cfb\u4eba\u624b\u673a")),_.a.createElement(b["a"],{span:18},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},s("contact_phone",{rules:[{required:!0}],initialValue:l.contact_phone})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u624b\u673a"}))):l.contact_phone),_.a.createElement(b["a"],{span:24,style:{textAlign:"center",marginTop:20,marginBottom:40}},e?_.a.createElement(_.a.Fragment,null,_.a.createElement(g["a"],{type:"primary",htmlType:"submit",loading:i},"\u786e\u5b9a"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(g["a"],{type:"primary",onClick:()=>this.setState({modifying:!0})},"\u7f16\u8f91"))))))}},o=m))||o)||o)||o),T=V,F=(p=Object(v["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),d=w["a"].create(),p(h=d(h=Object(I["a"])((u=class extends E["Component"]{constructor(e){super(e),this.handleSubmit=((e,t,a)=>{a&&a.preventDefault(),this.props.form.validateFieldsAndScroll((a,n)=>{a||this.props.dispatch({type:"client/setClientFinance",payload:{id:this.props.match.params.ClientDetail,[e]:n[e]}}).then(()=>{this.setState({[t]:!1}),this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})})})}),this.state={idReceipt:!1,modifying1:!1,modifying2:!1,modifying3:!1}}render(){var e=this.state,t=e.idReceipt,a=e.modifying1,n=e.modifying2,i=e.modifying3,l=this.props,s=l.form,r=l.client,c=l.loading,o=r.currentClientInfo,m=s.getFieldDecorator;return _.a.createElement(x["a"],{title:_.a.createElement(_.a.Fragment,null,_.a.createElement(O["a"],{type:"pay-circle",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),_.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},_.a.createElement(w["a"],null,_.a.createElement(C["a"],{className:Y.a["info-list"]},_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u9884\u4ed8\u6b3e\u989d")),_.a.createElement(b["a"],{span:7},a?_.a.createElement(w["a"].Item,{wrapperCol:{span:22}},m("balance",{rules:[{required:!0}],initialValue:o.balance})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u9884\u6536\u6b3e\u989d"}))):`${o.balance||0} \u5143`),_.a.createElement(b["a"],{span:11},a?_.a.createElement(_.a.Fragment,null,_.a.createElement(g["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"balance","modifying1"),loading:c},"\u786e\u5b9a"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying1:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(g["a"],{className:t?"gray-btn":"yellow-btn",style:{verticalAlign:"middle"},onClick:()=>this.setState({modifying1:!0}),disabled:t},"\u6536\u6b3e"))),_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u4fe1\u7528\u603b\u989d")),_.a.createElement(b["a"],{span:7},n?_.a.createElement(w["a"].Item,{wrapperCol:{span:22}},m("credit",{rules:[{required:!0}],initialValue:o.credit})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u4fe1\u7528\u603b\u989d"}))):`${o.credit||0} \u5143`),_.a.createElement(b["a"],{span:11},n?_.a.createElement(_.a.Fragment,null,_.a.createElement(g["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"credit","modifying2"),loading:c},"\u4fdd\u5b58"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying2:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(g["a"],{type:"primary",onClick:()=>this.setState({modifying2:!0})},"\u8bbe\u7f6e"))),_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u9884\u8b66\u989d\u5ea6")),_.a.createElement(b["a"],{span:7},i?_.a.createElement(w["a"].Item,{wrapperCol:{span:22}},m("credit_notice",{rules:[{required:!0}],initialValue:o.credit_notice})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u9884\u8b66\u989d\u5ea6"}))):`${o.credit_notice||0} \u5143`),_.a.createElement(b["a"],{span:11},i?_.a.createElement(_.a.Fragment,null,_.a.createElement(g["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"credit_notice","modifying3"),loading:c},"\u4fdd\u5b58"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying3:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(g["a"],{type:"primary",onClick:()=>this.setState({modifying3:!0})},"\u8bbe\u7f6e"))),_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u5269\u4f59\u989d\u5ea6")),_.a.createElement(b["a"],{span:18},"9,334,234.52 \u5143"),_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u5df2\u7528\u989d\u5ea6")),_.a.createElement(b["a"],{span:18},"9,334,234.52 \u5143"))))}},h=u))||h)||h)||h),H=F;class j extends E["Component"]{constructor(e){super(e),this.state={editInfo:!1,editContact:!1,editFinance:!1}}render(){return _.a.createElement("div",{style:{marginTop:5}},_.a.createElement(C["a"],{gutter:36},_.a.createElement(b["a"],{span:8},_.a.createElement(M,null)),_.a.createElement(b["a"],{span:8},_.a.createElement(T,null)),_.a.createElement(b["a"],{span:8},_.a.createElement(H,null))))}}var A,K,B,P,z,$,Z,J,U,Q,W,G,X,ee,te,ae,ne=j,ie=(a("DjyN"),a("NUBc")),le=(a("DZo9"),a("8z0m")),se=(a("R9oj"),a("ECub")),re=(a("2qtc"),a("kLXV")),ce=a("pVnL"),oe=a.n(ce),me=k["a"].Option,pe=(A=Object(v["connect"])(e=>{var t=e.global,a=e.client,n=e.loading;return{global:t,client:a,loading:n.models.client}}),K=w["a"].create(),A(B=K(B=Object(I["a"])((P=class extends E["Component"]{constructor(e){super(e),this.openInsertModal=(()=>{if(this.state.modalVisible)return!1;this.setState({modalVisible:!0},()=>{this.props.modify?this.inquire():this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"site"}})})}),this.closeInsertModal=(e=>{e&&e.stopPropagation(),this.setState({modalVisible:!1}),this.props.form.resetFields()}),this.inquire=(()=>{this.props.dispatch({type:"client/inquireSiteInfoById",payload:{id:this.props.modify}}).then(()=>{var e=this.props.client.currentSiteInfo;this.props.dispatch({type:"global/inquireCascadeOptionsAll",payload:{module:"cust",province:e.province,city:e.city}})})}),this.loadData=(e=>{var t=e[e.length-1];t.loading=!0,this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"cust",district_name:t.value,targetOption:t}}).then(()=>{})}),this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{if(!e){var a={province:t.area_arr[0],city:t.area_arr[1],area:t.area_arr[2]||""};delete t.area_arr,t.customer_id=this.props.match.params.ClientDetail,Object.assign(t,a);var n=this.props.modify,i=n?"updateSiteInfo":"insertSite";n&&(t.id=n),this.props.dispatch({type:`client/${i}`,payload:{form:t}}).then(()=>{this.closeInsertModal(),this.props.dispatch({type:"client/fetchSiteList",payload:{customer_id:this.props.match.params.ClientDetail}})})}})}),this.state={modalVisible:!1,autoCompleteResult:[]}}render(){var e=this.state.modalVisible,t=this.props,a=t.children,n=t.modify,i=t.global,l=t.client,s=t.form,r=l.currentSiteInfo,c=i.cascadeOptions,o=s.getFieldDecorator,m={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},p={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}};return _.a.createElement("div",{style:{display:"inline-block"},onClick:this.openInsertModal},a,_.a.createElement(re["a"],{visible:e,title:n?"\u7f16\u8f91\u7ad9\u70b9":"\u65b0\u589e\u7ad9\u70b9",width:600,bodyStyle:{padding:"24px 60px"},footer:null,onCancel:this.closeInsertModal,maskClosable:!1},_.a.createElement(w["a"],{onSubmit:this.handleSubmit},_.a.createElement(w["a"].Item,oe()({},m,{label:"\u7ad9\u70b9\u5168\u79f0"}),n?_.a.createElement("span",{style:{marginLeft:10}},r.site_full_name):o("site_full_name",{rules:[{required:!0}]})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ad9\u70b9\u5168\u79f0"}))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u7ad9\u70b9\u7b80\u79f0"}),o("site_name",{rules:[{required:!0}],initialValue:n?r.site_name:""})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ad9\u70b9\u7b80\u79f0"}))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u7ad9\u70b9\u7c7b\u578b"}),o("site_type",{rules:[{required:!0}],initialValue:n?r.site_type:"1"})(_.a.createElement(k["a"],{style:{width:"100%"}},_.a.createElement(me,{value:"1"},"\u8d38\u6613\u5546"),_.a.createElement(me,{value:"2"},"\u96f6\u552e\u5546")))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u7701\u5e02\u533a\u53bf"}),o("area_arr",{rules:[{required:!0,type:"array",message:"\u7701\u5e02\u533a\u53bf"}],initialValue:n?[r.province,r.city,r.area]:""})(_.a.createElement(S["a"],{options:c,loadData:this.loadData,placeholder:"\u8bf7\u9009\u62e9\u7701\u5e02\u533a\u53bf"}))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u8be6\u7ec6\u5730\u5740"}),o("site_address",{rules:[{required:!0}],initialValue:n?r.site_address:""})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"}))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u8054\u7cfb\u4eba"}),o("contact",{rules:[{required:!0}],initialValue:n?r.contact:""})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"}))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u8054\u7cfb\u4eba\u7535\u8bdd"}),o("contact_phone",{rules:[{required:!0}],initialValue:n?r.contact_phone:""})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u7535\u8bdd"}))),_.a.createElement(w["a"].Item,p,_.a.createElement(g["a"],{type:"primary",htmlType:"submit"},"\u786e\u5b9a"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20,marginTop:20},onClick:this.closeInsertModal},"\u53d6\u6d88")))))}},B=P))||B)||B)||B),de=pe,he=a("3tTZ"),ue=D["a"].Search,ge=k["a"].Option,ye=(z=Object(v["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),z($=Object(I["a"])((Z=class extends E["Component"]{constructor(e){super(e),this.fetchSiteList=(()=>{this.props.dispatch({type:"client/fetchSiteList",payload:{customer_id:this.props.match.params.ClientDetail}})}),this.mapItem=(()=>{var e=this.state.managementStatus,t=this.props.client.siteList;return t.length?t.map((t,n)=>_.a.createElement("div",{className:"list-item",key:t.id},_.a.createElement("div",{className:"serial-num"},n+1),_.a.createElement("div",{className:"company-box"},_.a.createElement("div",null,_.a.createElement("img",{src:a("tTbt"),alt:""})),_.a.createElement("div",{className:"company-name"},t.site_name)),_.a.createElement("div",{className:"detail-box"},_.a.createElement("div",{className:"site-type"},_.a.createElement("div",null,"\u7ad9\u70b9\u7c7b\u578b"),_.a.createElement("div",{className:"site-color"},N["m"][t.site_type-1])),_.a.createElement("div",{className:"address"},t.province+t.city+t.area),_.a.createElement("div",{className:"operating"},e?_.a.createElement(he["a"],{state:"deleteSite",okClass:"red-btn",id:t.id},_.a.createElement(g["a"],{className:"red-btn"},"\u79fb\u9664\u7ad9\u70b9")):_.a.createElement(de,{modify:t.id},_.a.createElement(g["a"],{type:"primary"},"\u7f16\u8f91")))))):_.a.createElement(se["a"],{style:{marginTop:20}})}),this.changeSiteName=(e=>{this.props.dispatch({type:"client/save",payload:{site_name:e.target.value}}),""===e.target.value&&this.searchSiteList("")}),this.searchSiteList=(e=>{this.props.dispatch({type:"client/fetchSiteList",payload:{customer_id:this.props.match.params.ClientDetail,site_name:e}})}),this.pageChange=(e=>{this.props.dispatch({type:"client/fetchSiteList",payload:{page:e,customer_id:this.props.client.customer_id,site_name:this.props.client.site_name}})}),this.upLoadExcel=(e=>{this.props.dispatch({type:"client/upLoadExcel",payload:{file:e}}).then(()=>{this.fetchSiteList()})}),this.state={managementStatus:!1}}componentWillMount(){this.fetchSiteList()}render(){var e=this.state.managementStatus,t=this.props,a=t.client,n=t.loading,i=a.sitePage,l=a.siteTotal,s=a.site_name;return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"tabs-toolbar"},_.a.createElement("div",{style:{display:"inline-block",marginRight:10}},_.a.createElement("div",{style:{display:"inline-block",marginRight:12}},"\u6392\u5e8f\u65b9\u5f0f"),_.a.createElement(k["a"],{defaultValue:"jack",style:{width:"8.75rem"},onChange:this.handleChange},_.a.createElement(ge,{value:"jack"},"\u7ed3\u7b97\u91cf"),_.a.createElement(ge,{value:"lucy"},"\u5229\u6da6\u8d21\u732e"),_.a.createElement(ge,{value:"Yiminghe"},"\u8d21\u732e\u5360\u6bd4"))),_.a.createElement(ue,{placeholder:"\u8bf7\u8f93\u5165\u7ad9\u70b9\u540d\u8fdb\u884c\u67e5\u627e",enterButton:"\u67e5\u627e",value:s,onChange:this.changeSiteName,onSearch:this.searchSiteList,style:{width:"25rem",height:"2.5rem",marginRight:15,display:"inline-flex"}}),e?_.a.createElement(g["a"],{className:"yellow-btn",style:{marginRight:10},onClick:()=>this.setState({managementStatus:!e})},"\u5b8c\u6210"):_.a.createElement(g["a"],{type:"primary",style:{marginRight:10},onClick:()=>this.setState({managementStatus:!e})},"\u7ba1\u7406\u7ad9\u70b9"),_.a.createElement(de,null,_.a.createElement(g["a"],{type:"primary",style:{marginRight:10}},"\u65b0\u589e\u7ad9\u70b9")),_.a.createElement(le["a"],{accept:".xls,.xlsx",name:"excel",action:`${N["c"]}/index/site/site-import`,customRequest:this.upLoadExcel,showUploadList:!1},_.a.createElement(g["a"],{type:"primary",loading:n},"\u5bfc\u5165\u7ad9\u70b9"))),this.mapItem(),_.a.createElement("div",{style:{textAlign:"center",marginTop:40}},_.a.createElement(ie["a"],{current:i,total:l,pageSize:N["f"],onChange:this.pageChange})))}},$=Z))||$)||$),Ee=ye,_e=(a("g9YV"),a("wCAj")),ve=(a("iQDF"),a("+eQT")),fe=a("MVZn"),Ce=a.n(fe),be=a("ZJHh"),xe=a("UKbY"),Se=a.n(xe),De=k["a"].Option,Oe=(J=Object(v["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),J((Q=class extends E["Component"]{constructor(){super(...arguments),this.state={load_time_start:null,load_time_end:null,endOpen:!1,selectedRowKeys:[],car_head_id:"",supp_goods_id:"",cust_site_id:"",status:""},this.disabledStartDate=(e=>{var t=this.state.load_time_end;return!(!e||!t)&&e.valueOf()>t.valueOf()}),this.disabledEndDate=(e=>{var t=this.state.load_time_start;return!(!e||!t)&&e.valueOf()<=t.valueOf()}),this.onChange=((e,t)=>{this.fetchHistoryList(e,t)}),this.onStartChange=(e=>{this.onChange("load_time_start",e)}),this.onEndChange=(e=>{this.onChange("load_time_end",e)}),this.handleStartOpenChange=(e=>{e||this.setState({endOpen:!0})}),this.handleEndOpenChange=(e=>{this.setState({endOpen:e})}),this.renderStatusBox=(()=>{return _.a.createElement(C["a"],{gutter:26,className:Se.a["status-box"],style:{margin:0}},N["l"].map((e,t)=>_.a.createElement(b["a"],{span:3,key:t},_.a.createElement("div",null,_.a.createElement("div",{className:Se.a["status-title"]},_.a.createElement(O["a"],{type:"chrome"}),_.a.createElement("div",null,e.title)),_.a.createElement("div",{className:Se.a["level1"]},_.a.createElement("div",null,e.level1),_.a.createElement("div",null,"12")),_.a.createElement("div",{className:Se.a["level2"]},_.a.createElement("div",null,e.level2),_.a.createElement("div",null,"2.1 \u4e07"))))))}),this.onSelectedRowKeysChange=((e,t)=>{this.setState({selectedRowKeys:e})}),this.selectRow=(e=>{var t=[...this.state.selectedRowKeys];t.indexOf(e.id)>=0?t.splice(t.indexOf(e.id),1):t.push(e.id),this.setState({selectedRowKeys:t})}),this.fetchHistoryList=((e,t)=>{console.log(e),console.log(t),this.setState({[e]:t},()=>{"load_time_start"!==e&&"load_time_end"!==e||(t=t.format("YYYY-MM-DD")),this.props.dispatch({type:"client/fetchClientHistory",payload:{form:Ce()({cust_id:this.props.match.params.ClientDetail,load_time_start:this.state.load_time_start?this.state.load_time_start.format("YYYY-MM-DD"):"",load_time_end:this.state.load_time_end?this.state.load_time_end.format("YYYY-MM-DD"):"",car_head_id:this.state.car_head_id,supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status},{[e]:t})}})})}),this.pageChange=(e=>{var t=this.state,a=t.load_time_start,n=t.load_time_end,i=t.car_head_id,l=t.supp_goods_id,s=t.cust_site_id,r=t.status;this.props.dispatch({type:"client/fetchClientHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,load_time_start:a,load_time_end:n,car_head_id:i,supp_goods_id:l,cust_site_id:s,status:r},page:e}})})}componentDidMount(){console.log(this.props),this.props.dispatch({type:"client/fetchOrderCondition",payload:{customer_id:this.props.match.params.ClientDetail}}).then(()=>{var e=this.props.client.clientCondition;console.log(e),this.setState({car_head_id:"27",supp_goods_id:e.goods[0].id,cust_site_id:e.sites[0].id}),this.props.dispatch({type:"client/fetchClientHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,load_time_start:"",load_time_end:"",car_head_id:"27",supp_goods_id:e.goods[0].id,cust_site_id:e.sites[0].id,status:""}}})})}render(){var e=this.state,t=e.load_time_start,a=e.load_time_end,n=e.endOpen,i=e.selectedRowKeys,l=e.car_head_id,s=e.supp_goods_id,r=e.cust_site_id,c=e.status,o=this.props,m=o.client,p=o.loading,d=m.salesHistoryList,h=m.salesHistoryPage,u=m.salesHistoryTotal,y=m.clientCondition,E={selectedRowKeys:i,onChange:this.onSelectedRowKeysChange};return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{style:{textAlign:"right",fontSize:"1rem",margin:"5px 0 20px"}},_.a.createElement("span",{style:{marginRight:10}},"\u88c5\u8f66\u65f6\u95f4"),_.a.createElement(ve["a"],{disabledDate:this.disabledStartDate,format:"YYYY-MM-DD",value:t,placeholder:"\u8d77\u59cb\u65f6\u95f4",onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange}),_.a.createElement("span",{style:{margin:"0 10px"}},"-"),_.a.createElement(ve["a"],{disabledDate:this.disabledEndDate,format:"YYYY-MM-DD",value:a,placeholder:"\u622a\u6b62\u65f6\u95f4",onChange:this.onEndChange,open:n,onOpenChange:this.handleEndOpenChange}),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u8f66\u724c"),_.a.createElement(k["a"],{value:l,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"car_head_id")},y.cars&&y.cars.map((e,t)=>{return _.a.createElement(De,{key:t,value:e.id},e.car_code)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u6c14\u6e90"),_.a.createElement(k["a"],{value:s,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"supp_goods_id")},y.goods&&y.goods.map((e,t)=>{return _.a.createElement(De,{key:t,value:e.id},e.goods_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u7ad9\u70b9"),_.a.createElement(k["a"],{value:r,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"cust_site_id")},y.sites&&y.sites.map((e,t)=>{return _.a.createElement(De,{key:t,value:e.id},e.site_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u72b6\u6001"),_.a.createElement(k["a"],{value:c,style:{width:"8.75rem",marginRight:20},onChange:this.fetchHistoryList.bind(null,"status")},_.a.createElement(De,{value:""},"\u5168\u90e8"),_.a.createElement(De,{value:21},"\u5f85\u6211\u65b9\u786e\u8ba4"),_.a.createElement(De,{value:22},"\u5f85\u91c7\u8d2d"),_.a.createElement(De,{value:23},"\u5f85\u4f9b\u5e94\u5546\u63a5\u5355"),_.a.createElement(De,{value:24},"\u5f85\u8c03\u5ea6"),_.a.createElement(De,{value:25},"\u5f85\u51fa\u53d1"),_.a.createElement(De,{value:26},"\u5f85\u88c5\u8d27"),_.a.createElement(De,{value:27},"\u5f85\u5378\u8d27"),_.a.createElement(De,{value:28},"\u5f85\u5bf9\u8d26"),_.a.createElement(De,{value:29},"\u5bf9\u8d26\u4e2d"),_.a.createElement(De,{value:30},"\u5df2\u5bf9\u8d26"),_.a.createElement(De,{value:31},"\u5f85\u7ed3\u6b3e"),_.a.createElement(De,{value:32},"\u5df2\u5f00\u7968"),_.a.createElement(De,{value:33},"\u5df2\u5b8c\u6210"),_.a.createElement(De,{value:34},"\u5df2\u53d6\u6d88")),_.a.createElement(g["a"],{className:i.length?"ant-btn-primary":"",style:{marginRight:10},disabled:!i.length},"\u5bf9\u8d26"),_.a.createElement(g["a"],{type:"primary"},"\u5168\u90e8\u5bf9\u8d26")),_.a.createElement("div",{className:"table-container"},_.a.createElement(_e["a"],{columns:be["c"],dataSource:d,rowSelection:E,loading:p,pagination:!1,rowKey:e=>e.id,highLightColor:"#aaa",rowClassName:(e,t)=>{return t%2===0?"oddRow":"evenRow"},onRow:e=>({onClick:()=>{this.selectRow(e)}})})),_.a.createElement("div",{style:{textAlign:"center",marginTop:40}},_.a.createElement(ie["a"],{current:h,total:u,onChange:this.pageChange})))}},U=Q))||U),we=Object(I["a"])(Oe),ke=(a("P2fV"),a("NJEC")),Ie=k["a"].Option,Ne=g["a"].Group,Re=(W=Object(v["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),W((X=class extends E["Component"]{constructor(){super(...arguments),this.state={time_start:null,time_end:null,endOpen:!1,supp_goods_id:"",cust_site_id:"",status:""},this.disabledStartDate=(e=>{var t=this.state.time_end;return!(!e||!t)&&e.valueOf()>t.valueOf()}),this.disabledEndDate=(e=>{var t=this.state.time_start;return!(!e||!t)&&e.valueOf()<=t.valueOf()}),this.onChange=((e,t)=>{this.fetchReconciliationHistoryList(e,t)}),this.onStartChange=(e=>{this.onChange("time_start",e)}),this.onEndChange=(e=>{this.onChange("time_end",e)}),this.handleStartOpenChange=(e=>{e||this.setState({endOpen:!0})}),this.handleEndOpenChange=(e=>{this.setState({endOpen:e})}),this.fetchReconciliationHistoryList=((e,t)=>{console.log(e),console.log(t),this.setState({[e]:t},()=>{"time_start"!==e&&"time_end"!==e||(t=t.format("YYYY-MM-DD")),this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:Ce()({cust_id:this.props.match.params.ClientDetail,time_start:this.state.time_start?this.state.time_start.format("YYYY-MM-DD"):"",time_end:this.state.time_end?this.state.time_end.format("YYYY-MM-DD"):"",supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status},{[e]:t})}})})}),this.changePage=(e=>{var t=this.state,a=t.time_start,n=t.time_end,i=t.supp_goods_id,l=t.cust_site_id,s=t.status;this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:a,time_end:n,supp_goods_id:i,cust_site_id:l,status:s},page:e}})})}componentDidMount(){this.props.dispatch({type:"client/fetchOrderCondition",payload:{customer_id:this.props.match.params.ClientDetail}}).then(()=>{var e=this.props.client.clientCondition;console.log(e),this.setState({supp_goods_id:e.goods[0].id,cust_site_id:e.sites[0].id}),this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:"",time_end:"",supp_goods_id:e.goods[0].id,cust_site_id:e.sites[0].id,status:""}}})})}render(){var e=this.state,t=e.time_start,a=e.time_end,n=e.endOpen,i=e.supp_goods_id,l=e.cust_site_id,s=e.status,r=this.props,c=r.client,o=r.loading,m=c.reconciliationHistoryList,p=c.reconciliationHistoryPage,d=c.reconciliationHistoryTotal,h=c.clientCondition,u=[{align:"center",title:"\u64cd\u4f5c\u65f6\u95f4",dataIndex:"check_time",key:"check_time"},{align:"center",title:"\u5ba2\u6237",dataIndex:"customer_name",key:"customer_name"},{align:"center",title:"\u6c14\u6e90",dataIndex:"goods",key:"goods"},{align:"center",title:"\u7ad9\u70b9",dataIndex:"sites",key:"sites"},{align:"center",title:"\u5bf9\u8d26\u5468\u671f",key:"dzzq",render:(e,t)=>{return _.a.createElement("div",null,t.account_cycle_start," - ",t.account_cycle_end)}},{align:"center",title:"\u5bf9\u8d26\u91cf",dataIndex:"purchase_count",key:"purchase_count"},{align:"center",title:"\u5bf9\u8d26\u989d\uff08\u5143\uff09",dataIndex:"total_account",key:"total_account"},{align:"center",title:"\u72b6\u6001",dataIndex:"status",key:"status",render:e=>_.a.createElement("div",null,N["o"][e])},{align:"center",title:"\u64cd\u4f5c",key:"cz",render:(e,n,r)=>_.a.createElement(Ne,{className:"button-group"},_.a.createElement(g["a"],{className:"line-primary",onClick:()=>{var e=new URL(window.location.href),t=e.pathname.split("/");f["a"].push(`/${t[1]}/${t[2]}/ReconciliationDetails?id=${n.id}&${e.search.substr(1)}`)}},"\u660e\u7ec6"),_.a.createElement(g["a"],{className:"line-primary",onClick:()=>{this.props.dispatch({type:"client/downloadExcel",payload:{id:n.id}})}},"\u5bfc\u51fa"),_.a.createElement(g["a"],{className:"line-primary"},"\u786e\u8ba4\u5bf9\u8d26"),_.a.createElement(g["a"],{className:"line-primary"},"\u786e\u8ba4\u7ed3\u6b3e"),_.a.createElement(g["a"],{className:"line-primary"},"\u786e\u8ba4\u5f00\u7968"),_.a.createElement(ke["a"],{title:"\u786e\u5b9a\u5220\u9664\u6b64\u6761\u8bb0\u5f55\uff1f",placement:"left",onConfirm:()=>{this.props.dispatch({type:"client/deleteReconciliationHistory",payload:{id:n.id}}).then(()=>{this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:t,time_end:a,supp_goods_id:i,cust_site_id:l,status:s},page:p}})})}},_.a.createElement(g["a"],{className:"line-red"},"\u5220\u9664")))}];return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{style:{textAlign:"right",fontSize:"1rem",margin:"5px 0 20px"}},_.a.createElement("span",{style:{marginRight:10}},"\u88c5\u8f66\u65f6\u95f4"),_.a.createElement(ve["a"],{disabledDate:this.disabledStartDate,format:"YYYY-MM-DD",value:t,placeholder:"\u8d77\u59cb\u65f6\u95f4",onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange}),_.a.createElement("span",{style:{margin:"0 10px"}},"-"),_.a.createElement(ve["a"],{disabledDate:this.disabledEndDate,format:"YYYY-MM-DD",value:a,placeholder:"\u622a\u6b62\u65f6\u95f4",onChange:this.onEndChange,open:n,onOpenChange:this.handleEndOpenChange}),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u6c14\u6e90"),_.a.createElement(k["a"],{value:i,style:{width:"8.75rem"},onChange:this.fetchReconciliationHistoryList.bind(null,"supp_goods_id")},h.goods&&h.goods.map((e,t)=>{return _.a.createElement(Ie,{key:t,value:e.id},e.goods_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u7ad9\u70b9"),_.a.createElement(k["a"],{value:l,style:{width:"8.75rem"},onChange:this.fetchReconciliationHistoryList.bind(null,"cust_site_id")},h.sites&&h.sites.map((e,t)=>{return _.a.createElement(Ie,{key:t,value:e.id},e.site_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u72b6\u6001"),_.a.createElement(k["a"],{value:s,style:{width:"8.75rem"}},_.a.createElement(Ie,{value:""},"\u5168\u90e8"),_.a.createElement(Ie,{value:61},"\u5bf9\u8d26\u4e2d"),_.a.createElement(Ie,{value:62},"\u5df2\u5bf9\u8d26"),_.a.createElement(Ie,{value:63},"\u5f85\u7ed3\u6b3e"),_.a.createElement(Ie,{value:64},"\u5f85\u5f00\u7968"),_.a.createElement(Ie,{value:65},"\u5df2\u5b8c\u6210"))),_.a.createElement("div",{className:"table-container"},_.a.createElement(_e["a"],{columns:u,dataSource:m,loading:o,pagination:!1,rowKey:e=>e.id,highLightColor:"#aaa",rowClassName:(e,t)=>{return t%2===0?"oddRow":"evenRow"}})),_.a.createElement("div",{style:{textAlign:"center",marginTop:40}},_.a.createElement(ie["a"],{current:p,total:d,onChange:this.changePage})))}},G=X))||G),Ye=Object(I["a"])(Re),Le=y["a"].TabPane,qe=(ee=Object(v["connect"])(e=>{var t=e.client,a=e.global,n=e.loading;return{client:t,global:a,loading:n.models.client}}),ee((ae=class extends E["Component"]{constructor(){super(...arguments),this.changeCurrentTabs=(e=>{this.props.dispatch({type:"global/save",payload:{clientInfoCurrentTabs:e}})})}componentWillMount(){this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})}render(){var e=this.props.client.currentClientInfo;console.log(e);var t=this.props.global.clientInfoCurrentTabs,n=this.props.location.query.company;return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"toolbar"},_.a.createElement(g["a"],{type:"primary",icon:"rollback",onClick:()=>f["a"].goBack()},"\u8fd4\u56de"),_.a.createElement("img",{src:a("645o"),style:{margin:"0 20px 0 40px"},alt:""}),_.a.createElement("span",{className:"font-purple-color",style:{fontWeight:"bold"}},n),"1"===t?_.a.createElement(g["a"],{className:"red-btn-line",style:{float:"right",marginTop:20}},"\u5220\u9664\u5ba2\u6237"):null),_.a.createElement(y["a"],{activeKey:t,onChange:this.changeCurrentTabs,style:{padding:"12px 24px 60px"}},_.a.createElement(Le,{tab:"\u5ba2\u6237\u4fe1\u606f",key:"1"},e.id&&_.a.createElement(ne,null)),_.a.createElement(Le,{tab:"\u4f9b\u5e94\u7ad9\u70b9",key:"2"},_.a.createElement(Ee,null)),_.a.createElement(Le,{tab:"\u9500\u552e\u5386\u53f2",key:"3"},_.a.createElement(we,null)),_.a.createElement(Le,{tab:"\u5bf9\u8d26\u5386\u53f2",key:"4"},_.a.createElement(Ye,null))))}},te=ae))||te);t["default"]=qe},UKbY:function(e,t,a){e.exports={"status-box":"status-box___2781P","status-title":"status-title___kGbv5",level1:"level1___3wu5A",level2:"level2___3f7r_"}}}]);
=======
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0RgF":function(e,t,a){"use strict";a.r(t);a("+L6B");var n,i,l,s,r,c,o,m,p,d,h,u,g=a("2/Rp"),y=(a("Znn+"),a("ZTPi")),E=a("q1tI"),_=a.n(E),v=a("MuoO"),f=a("usdK"),C=(a("14J3"),a("BMrR")),b=(a("jCWc"),a("kPKH")),x=(a("IzEo"),a("bx4M")),S=(a("6UJt"),a("DFOY")),D=(a("5NDa"),a("5rEg")),O=(a("Pwec"),a("CtXQ")),w=(a("y8nQ"),a("Vl3Y")),k=(a("OaEy"),a("2fM7")),I=a("utR0"),N=a("mjZG"),R=a("bNTS"),Y=a.n(R),L=k["a"].Option,q=(n=Object(v["connect"])(e=>{var t=e.global,a=e.client,n=e.loading;return{global:t,client:a,loading:n.models.client}}),i=w["a"].create(),n(l=i(l=Object(I["a"])((s=class extends E["Component"]{constructor(e){super(e),this.handleSubmit=(e=>{e&&e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{if(!e){var a={id:this.props.match.params.ClientDetail,province:t.area_arr[0],city:t.area_arr[1],area:t.area_arr[2]||""};delete t.area_arr,Object.assign(t,a),this.props.dispatch({type:"client/updateClientInfo",payload:{form:t}}).then(()=>{this.setState({modifying:!1}),this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})})}})}),this.loadData=(e=>{var t=e[e.length-1];t.loading=!0,this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"cust",district_name:t.value,targetOption:t}}).then(()=>{})}),this.modify=(()=>{this.setState({modifying:!0});var e=this.props.client.currentClientInfo;this.props.dispatch({type:"global/inquireCascadeOptionsAll",payload:{module:"cust",province:e.province,city:e.city}})}),this.state={modifying:!1}}render(){var e=this.state.modifying,t=this.props,a=t.form,n=t.global,i=t.client,l=t.loading,s=i.currentClientInfo,r=n.cascadeOptions,c=a.getFieldDecorator,o=s.province+s.city+s.area||"";return _.a.createElement(x["a"],{title:_.a.createElement(_.a.Fragment,null,_.a.createElement(O["a"],{type:"idcard",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),_.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},_.a.createElement(w["a"],{onSubmit:this.handleSubmit},_.a.createElement(C["a"],{className:Y.a["info-list"]},_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7")),_.a.createElement(b["a"],{span:16,xxl:17},s.tax_number),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u516c\u53f8\u5168\u79f0")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("company_full_name",{rules:[{required:!0}],initialValue:s.company_full_name})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u5168\u79f0"}))):s.company_full_name),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u516c\u53f8\u7b80\u79f0")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("company_name",{rules:[{required:!0}],initialValue:s.company_name})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u7b80\u79f0"}))):s.company_name),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u516c\u53f8\u7c7b\u578b")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("company_flow",{rules:[{required:!0}],initialValue:s.company_flow+""})(_.a.createElement(k["a"],{style:{width:"100%"}},_.a.createElement(L,{value:"1"},"\u8d38\u6613\u5546"),_.a.createElement(L,{value:"2"},"\u96f6\u552e\u5546")))):N["i"][s.company_flow-1]),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u7701\u5e02\u533a\u53bf")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("area_arr",{rules:[{required:!0}],initialValue:[s.province,s.city,s.area]})(_.a.createElement(S["a"],{options:r,loadData:this.loadData,placeholder:"\u8bf7\u9009\u62e9\u7701\u5e02\u533a\u53bf"}))):o),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u8be6\u7ec6\u5730\u5740")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("company_address",{rules:[{required:!0}],initialValue:s.company_address})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"}))):s.company_address),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u5f00\u6237\u94f6\u884c")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("bank",{rules:[{required:!0}],initialValue:s.bank})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u9009\u62e9\u5f00\u6237\u94f6\u884c"}))):s.bank),_.a.createElement(b["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u94f6\u884c\u8d26\u53f7")),_.a.createElement(b["a"],{span:16,xxl:17},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},c("bank_account",{rules:[{required:!0}],initialValue:s.bank_account})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u94f6\u884c\u8d26\u53f7"}))):s.bank_account),_.a.createElement(b["a"],{span:24,style:{textAlign:"center",marginTop:20,marginBottom:40}},e?_.a.createElement(_.a.Fragment,null,_.a.createElement(g["a"],{type:"primary",htmlType:"submit",loading:l},"\u786e\u5b9a"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(g["a"],{type:"primary",onClick:this.modify},"\u7f16\u8f91"))))))}},l=s))||l)||l)||l),M=q,V=(r=Object(v["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),c=w["a"].create(),r(o=c(o=Object(I["a"])((m=class extends E["Component"]{constructor(e){super(e),this.handleSubmit=(e=>{e&&e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{e||(t.id=this.props.match.params.ClientDetail,this.props.dispatch({type:"client/updateClientContact",payload:{form:t}}).then(()=>{this.setState({modifying:!1}),this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})}))})}),this.state={modifying:!1}}render(){var e=this.state.modifying,t=this.props,a=t.form,n=t.client,i=t.loading,l=n.currentClientInfo,s=a.getFieldDecorator;return _.a.createElement(x["a"],{title:_.a.createElement(_.a.Fragment,null,_.a.createElement(O["a"],{type:"phone",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),_.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},_.a.createElement(w["a"],{onSubmit:this.handleSubmit},_.a.createElement(C["a"],{className:Y.a["info-list"]},_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u8054\u7cfb\u4eba")),_.a.createElement(b["a"],{span:18},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},s("contact",{rules:[{required:!0}],initialValue:l.contact})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"}))):l.contact),_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u8054\u7cfb\u4eba\u624b\u673a")),_.a.createElement(b["a"],{span:18},e?_.a.createElement(w["a"].Item,{wrapperCol:{span:16}},s("contact_phone",{rules:[{required:!0}],initialValue:l.contact_phone})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u624b\u673a"}))):l.contact_phone),_.a.createElement(b["a"],{span:24,style:{textAlign:"center",marginTop:20,marginBottom:40}},e?_.a.createElement(_.a.Fragment,null,_.a.createElement(g["a"],{type:"primary",htmlType:"submit",loading:i},"\u786e\u5b9a"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(g["a"],{type:"primary",onClick:()=>this.setState({modifying:!0})},"\u7f16\u8f91"))))))}},o=m))||o)||o)||o),T=V,F=(p=Object(v["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),d=w["a"].create(),p(h=d(h=Object(I["a"])((u=class extends E["Component"]{constructor(e){super(e),this.handleSubmit=((e,t,a)=>{a&&a.preventDefault(),this.props.form.validateFieldsAndScroll((a,n)=>{a||this.props.dispatch({type:"client/setClientFinance",payload:{id:this.props.match.params.ClientDetail,[e]:n[e]}}).then(()=>{this.setState({[t]:!1}),this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})})})}),this.state={idReceipt:!1,modifying1:!1,modifying2:!1,modifying3:!1}}render(){var e=this.state,t=e.idReceipt,a=e.modifying1,n=e.modifying2,i=e.modifying3,l=this.props,s=l.form,r=l.client,c=l.loading,o=r.currentClientInfo,m=s.getFieldDecorator;return _.a.createElement(x["a"],{title:_.a.createElement(_.a.Fragment,null,_.a.createElement(O["a"],{type:"pay-circle",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),_.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},_.a.createElement(w["a"],null,_.a.createElement(C["a"],{className:Y.a["info-list"]},_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u9884\u4ed8\u6b3e\u989d")),_.a.createElement(b["a"],{span:7},a?_.a.createElement(w["a"].Item,{wrapperCol:{span:22}},m("balance",{rules:[{required:!0}],initialValue:o.balance})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u9884\u6536\u6b3e\u989d"}))):`${o.balance||0} \u5143`),_.a.createElement(b["a"],{span:11},a?_.a.createElement(_.a.Fragment,null,_.a.createElement(g["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"balance","modifying1"),loading:c},"\u786e\u5b9a"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying1:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(g["a"],{className:t?"gray-btn":"yellow-btn",style:{verticalAlign:"middle"},onClick:()=>this.setState({modifying1:!0}),disabled:t},"\u6536\u6b3e"))),_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u4fe1\u7528\u603b\u989d")),_.a.createElement(b["a"],{span:7},n?_.a.createElement(w["a"].Item,{wrapperCol:{span:22}},m("credit",{rules:[{required:!0}],initialValue:o.credit})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u4fe1\u7528\u603b\u989d"}))):`${o.credit||0} \u5143`),_.a.createElement(b["a"],{span:11},n?_.a.createElement(_.a.Fragment,null,_.a.createElement(g["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"credit","modifying2"),loading:c},"\u4fdd\u5b58"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying2:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(g["a"],{type:"primary",onClick:()=>this.setState({modifying2:!0})},"\u8bbe\u7f6e"))),_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u9884\u8b66\u989d\u5ea6")),_.a.createElement(b["a"],{span:7},i?_.a.createElement(w["a"].Item,{wrapperCol:{span:22}},m("credit_notice",{rules:[{required:!0}],initialValue:o.credit_notice})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u9884\u8b66\u989d\u5ea6"}))):`${o.credit_notice||0} \u5143`),_.a.createElement(b["a"],{span:11},i?_.a.createElement(_.a.Fragment,null,_.a.createElement(g["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"credit_notice","modifying3"),loading:c},"\u4fdd\u5b58"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying3:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(g["a"],{type:"primary",onClick:()=>this.setState({modifying3:!0})},"\u8bbe\u7f6e"))),_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u5269\u4f59\u989d\u5ea6")),_.a.createElement(b["a"],{span:18},"9,334,234.52 \u5143"),_.a.createElement(b["a"],{span:6},_.a.createElement("i",null,"\u5df2\u7528\u989d\u5ea6")),_.a.createElement(b["a"],{span:18},"9,334,234.52 \u5143"))))}},h=u))||h)||h)||h),H=F;class j extends E["Component"]{constructor(e){super(e),this.state={editInfo:!1,editContact:!1,editFinance:!1}}render(){return _.a.createElement("div",{style:{marginTop:5}},_.a.createElement(C["a"],{gutter:36},_.a.createElement(b["a"],{span:8},_.a.createElement(M,null)),_.a.createElement(b["a"],{span:8},_.a.createElement(T,null)),_.a.createElement(b["a"],{span:8},_.a.createElement(H,null))))}}var A,K,B,P,z,$,Z,J,U,Q,W,G,X,ee,te,ae,ne=j,ie=(a("DjyN"),a("NUBc")),le=(a("DZo9"),a("8z0m")),se=(a("R9oj"),a("ECub")),re=(a("2qtc"),a("kLXV")),ce=a("pVnL"),oe=a.n(ce),me=k["a"].Option,pe=(A=Object(v["connect"])(e=>{var t=e.global,a=e.client,n=e.loading;return{global:t,client:a,loading:n.models.client}}),K=w["a"].create(),A(B=K(B=Object(I["a"])((P=class extends E["Component"]{constructor(e){super(e),this.openInsertModal=(()=>{if(this.state.modalVisible)return!1;this.setState({modalVisible:!0},()=>{this.props.modify?this.inquire():this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"site"}})})}),this.closeInsertModal=(e=>{e&&e.stopPropagation(),this.setState({modalVisible:!1}),this.props.form.resetFields()}),this.inquire=(()=>{this.props.dispatch({type:"client/inquireSiteInfoById",payload:{id:this.props.modify}}).then(()=>{var e=this.props.client.currentSiteInfo;this.props.dispatch({type:"global/inquireCascadeOptionsAll",payload:{module:"cust",province:e.province,city:e.city}})})}),this.loadData=(e=>{var t=e[e.length-1];t.loading=!0,this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"cust",district_name:t.value,targetOption:t}}).then(()=>{})}),this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{if(!e){var a={province:t.area_arr[0],city:t.area_arr[1],area:t.area_arr[2]||""};delete t.area_arr,t.customer_id=this.props.match.params.ClientDetail,Object.assign(t,a);var n=this.props.modify,i=n?"updateSiteInfo":"insertSite";n&&(t.id=n),this.props.dispatch({type:`client/${i}`,payload:{form:t}}).then(()=>{this.closeInsertModal(),this.props.dispatch({type:"client/fetchSiteList",payload:{customer_id:this.props.match.params.ClientDetail}})})}})}),this.state={modalVisible:!1,autoCompleteResult:[]}}render(){var e=this.state.modalVisible,t=this.props,a=t.children,n=t.modify,i=t.global,l=t.client,s=t.form,r=l.currentSiteInfo,c=i.cascadeOptions,o=s.getFieldDecorator,m={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},p={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}};return _.a.createElement("div",{style:{display:"inline-block"},onClick:this.openInsertModal},a,_.a.createElement(re["a"],{visible:e,title:n?"\u7f16\u8f91\u7ad9\u70b9":"\u65b0\u589e\u7ad9\u70b9",width:600,bodyStyle:{padding:"24px 60px"},footer:null,onCancel:this.closeInsertModal,maskClosable:!1},_.a.createElement(w["a"],{onSubmit:this.handleSubmit},_.a.createElement(w["a"].Item,oe()({},m,{label:"\u7ad9\u70b9\u5168\u79f0"}),n?_.a.createElement("span",{style:{marginLeft:10}},r.site_full_name):o("site_full_name",{rules:[{required:!0}]})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ad9\u70b9\u5168\u79f0"}))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u7ad9\u70b9\u7b80\u79f0"}),o("site_name",{rules:[{required:!0}],initialValue:n?r.site_name:""})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ad9\u70b9\u7b80\u79f0"}))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u7ad9\u70b9\u7c7b\u578b"}),o("site_type",{rules:[{required:!0}],initialValue:n?r.site_type:"1"})(_.a.createElement(k["a"],{style:{width:"100%"}},_.a.createElement(me,{value:"1"},"\u8d38\u6613\u5546"),_.a.createElement(me,{value:"2"},"\u96f6\u552e\u5546")))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u7701\u5e02\u533a\u53bf"}),o("area_arr",{rules:[{required:!0,type:"array",message:"\u7701\u5e02\u533a\u53bf"}],initialValue:n?[r.province,r.city,r.area]:""})(_.a.createElement(S["a"],{options:c,loadData:this.loadData,placeholder:"\u8bf7\u9009\u62e9\u7701\u5e02\u533a\u53bf"}))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u8be6\u7ec6\u5730\u5740"}),o("site_address",{rules:[{required:!0}],initialValue:n?r.site_address:""})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"}))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u8054\u7cfb\u4eba"}),o("contact",{rules:[{required:!0}],initialValue:n?r.contact:""})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"}))),_.a.createElement(w["a"].Item,oe()({},m,{label:"\u8054\u7cfb\u4eba\u7535\u8bdd"}),o("contact_phone",{rules:[{required:!0}],initialValue:n?r.contact_phone:""})(_.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u7535\u8bdd"}))),_.a.createElement(w["a"].Item,p,_.a.createElement(g["a"],{type:"primary",htmlType:"submit"},"\u786e\u5b9a"),_.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20,marginTop:20},onClick:this.closeInsertModal},"\u53d6\u6d88")))))}},B=P))||B)||B)||B),de=pe,he=a("3tTZ"),ue=D["a"].Search,ge=k["a"].Option,ye=(z=Object(v["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),z($=Object(I["a"])((Z=class extends E["Component"]{constructor(e){super(e),this.fetchSiteList=(()=>{this.props.dispatch({type:"client/fetchSiteList",payload:{customer_id:this.props.match.params.ClientDetail}})}),this.mapItem=(()=>{var e=this.state.managementStatus,t=this.props.client.siteList;return t.length?t.map((t,n)=>_.a.createElement("div",{className:"list-item",key:t.id},_.a.createElement("div",{className:"serial-num"},n+1),_.a.createElement("div",{className:"company-box"},_.a.createElement("div",null,_.a.createElement("img",{src:a("tTbt"),alt:""})),_.a.createElement("div",{className:"company-name"},t.site_name)),_.a.createElement("div",{className:"detail-box"},_.a.createElement("div",{className:"site-type"},_.a.createElement("div",null,"\u7ad9\u70b9\u7c7b\u578b"),_.a.createElement("div",{className:"site-color"},N["m"][t.site_type-1])),_.a.createElement("div",{className:"address"},t.province+t.city+t.area),_.a.createElement("div",{className:"operating"},e?_.a.createElement(he["a"],{state:"deleteSite",okClass:"red-btn",id:t.id},_.a.createElement(g["a"],{className:"red-btn"},"\u79fb\u9664\u7ad9\u70b9")):_.a.createElement(de,{modify:t.id},_.a.createElement(g["a"],{type:"primary"},"\u7f16\u8f91")))))):_.a.createElement(se["a"],{style:{marginTop:20}})}),this.changeSiteName=(e=>{this.props.dispatch({type:"client/save",payload:{site_name:e.target.value}}),""===e.target.value&&this.searchSiteList("")}),this.searchSiteList=(e=>{this.props.dispatch({type:"client/fetchSiteList",payload:{customer_id:this.props.match.params.ClientDetail,site_name:e}})}),this.pageChange=(e=>{this.props.dispatch({type:"client/fetchSiteList",payload:{page:e,customer_id:this.props.client.customer_id,site_name:this.props.client.site_name}})}),this.upLoadExcel=(e=>{this.props.dispatch({type:"client/upLoadExcel",payload:{file:e}}).then(()=>{this.fetchSiteList()})}),this.state={managementStatus:!1}}componentWillMount(){this.fetchSiteList()}render(){var e=this.state.managementStatus,t=this.props,a=t.client,n=t.loading,i=a.sitePage,l=a.siteTotal,s=a.site_name;return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"tabs-toolbar"},_.a.createElement("div",{style:{display:"inline-block",marginRight:10}},_.a.createElement("div",{style:{display:"inline-block",marginRight:12}},"\u6392\u5e8f\u65b9\u5f0f"),_.a.createElement(k["a"],{defaultValue:"jack",style:{width:"8.75rem"},onChange:this.handleChange},_.a.createElement(ge,{value:"jack"},"\u7ed3\u7b97\u91cf"),_.a.createElement(ge,{value:"lucy"},"\u5229\u6da6\u8d21\u732e"),_.a.createElement(ge,{value:"Yiminghe"},"\u8d21\u732e\u5360\u6bd4"))),_.a.createElement(ue,{placeholder:"\u8bf7\u8f93\u5165\u7ad9\u70b9\u540d\u8fdb\u884c\u67e5\u627e",enterButton:"\u67e5\u627e",value:s,onChange:this.changeSiteName,onSearch:this.searchSiteList,style:{width:"25rem",height:"2.5rem",marginRight:15,display:"inline-flex"}}),e?_.a.createElement(g["a"],{className:"yellow-btn",style:{marginRight:10},onClick:()=>this.setState({managementStatus:!e})},"\u5b8c\u6210"):_.a.createElement(g["a"],{type:"primary",style:{marginRight:10},onClick:()=>this.setState({managementStatus:!e})},"\u7ba1\u7406\u7ad9\u70b9"),_.a.createElement(de,null,_.a.createElement(g["a"],{type:"primary",style:{marginRight:10}},"\u65b0\u589e\u7ad9\u70b9")),_.a.createElement(le["a"],{accept:".xls,.xlsx",name:"excel",action:`${N["c"]}/index/site/site-import`,customRequest:this.upLoadExcel,showUploadList:!1},_.a.createElement(g["a"],{type:"primary",loading:n},"\u5bfc\u5165\u7ad9\u70b9"))),this.mapItem(),_.a.createElement("div",{style:{textAlign:"center",marginTop:40}},_.a.createElement(ie["a"],{current:i,total:l,pageSize:N["f"],onChange:this.pageChange})))}},$=Z))||$)||$),Ee=ye,_e=(a("g9YV"),a("wCAj")),ve=(a("iQDF"),a("+eQT")),fe=a("MVZn"),Ce=a.n(fe),be=a("ZJHh"),xe=a("UKbY"),Se=a.n(xe),De=k["a"].Option,Oe=(J=Object(v["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),J((Q=class extends E["Component"]{constructor(){super(...arguments),this.state={load_time_start:null,load_time_end:null,endOpen:!1,selectedRowKeys:[],car_head_id:"",supp_goods_id:"",cust_site_id:"",status:""},this.disabledStartDate=(e=>{var t=this.state.load_time_end;return!(!e||!t)&&e.valueOf()>t.valueOf()}),this.disabledEndDate=(e=>{var t=this.state.load_time_start;return!(!e||!t)&&e.valueOf()<=t.valueOf()}),this.onChange=((e,t)=>{this.fetchHistoryList(e,t)}),this.onStartChange=(e=>{this.onChange("load_time_start",e)}),this.onEndChange=(e=>{this.onChange("load_time_end",e)}),this.handleStartOpenChange=(e=>{e||this.setState({endOpen:!0})}),this.handleEndOpenChange=(e=>{this.setState({endOpen:e})}),this.renderStatusBox=(()=>{return _.a.createElement(C["a"],{gutter:26,className:Se.a["status-box"],style:{margin:0}},N["l"].map((e,t)=>_.a.createElement(b["a"],{span:3,key:t},_.a.createElement("div",null,_.a.createElement("div",{className:Se.a["status-title"]},_.a.createElement(O["a"],{type:"chrome"}),_.a.createElement("div",null,e.title)),_.a.createElement("div",{className:Se.a["level1"]},_.a.createElement("div",null,e.level1),_.a.createElement("div",null,"12")),_.a.createElement("div",{className:Se.a["level2"]},_.a.createElement("div",null,e.level2),_.a.createElement("div",null,"2.1 \u4e07"))))))}),this.onSelectedRowKeysChange=((e,t)=>{this.setState({selectedRowKeys:e})}),this.selectRow=(e=>{var t=[...this.state.selectedRowKeys];t.indexOf(e.id)>=0?t.splice(t.indexOf(e.id),1):t.push(e.id),this.setState({selectedRowKeys:t})}),this.fetchHistoryList=((e,t)=>{console.log(e),console.log(t),this.setState({[e]:t},()=>{"load_time_start"!==e&&"load_time_end"!==e||(t=t.format("YYYY-MM-DD")),this.props.dispatch({type:"client/fetchClientHistory",payload:{form:Ce()({cust_id:this.props.match.params.ClientDetail,load_time_start:this.state.load_time_start?this.state.load_time_start.format("YYYY-MM-DD"):"",load_time_end:this.state.load_time_end?this.state.load_time_end.format("YYYY-MM-DD"):"",car_head_id:this.state.car_head_id,supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status},{[e]:t})}})})}),this.pageChange=(e=>{var t=this.state,a=t.load_time_start,n=t.load_time_end,i=t.car_head_id,l=t.supp_goods_id,s=t.cust_site_id,r=t.status;this.props.dispatch({type:"client/fetchClientHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,load_time_start:a,load_time_end:n,car_head_id:i,supp_goods_id:l,cust_site_id:s,status:r},page:e}})})}componentDidMount(){console.log(this.props),this.props.dispatch({type:"client/fetchOrderCondition",payload:{customer_id:this.props.match.params.ClientDetail}}).then(()=>{var e=this.props.client.clientCondition;console.log(e),this.setState({car_head_id:"27",supp_goods_id:e.goods[0].id,cust_site_id:e.sites[0].id}),this.props.dispatch({type:"client/fetchClientHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,load_time_start:"",load_time_end:"",car_head_id:"27",supp_goods_id:e.goods[0].id,cust_site_id:e.sites[0].id,status:""}}})})}render(){var e=this.state,t=e.load_time_start,a=e.load_time_end,n=e.endOpen,i=e.selectedRowKeys,l=e.car_head_id,s=e.supp_goods_id,r=e.cust_site_id,c=e.status,o=this.props,m=o.client,p=o.loading,d=m.salesHistoryList,h=m.salesHistoryPage,u=m.salesHistoryTotal,y=m.clientCondition,E={selectedRowKeys:i,onChange:this.onSelectedRowKeysChange};return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{style:{textAlign:"right",fontSize:"1rem",margin:"5px 0 20px"}},_.a.createElement("span",{style:{marginRight:10}},"\u88c5\u8f66\u65f6\u95f4"),_.a.createElement(ve["a"],{disabledDate:this.disabledStartDate,format:"YYYY-MM-DD",value:t,placeholder:"\u8d77\u59cb\u65f6\u95f4",onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange}),_.a.createElement("span",{style:{margin:"0 10px"}},"-"),_.a.createElement(ve["a"],{disabledDate:this.disabledEndDate,format:"YYYY-MM-DD",value:a,placeholder:"\u622a\u6b62\u65f6\u95f4",onChange:this.onEndChange,open:n,onOpenChange:this.handleEndOpenChange}),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u8f66\u724c"),_.a.createElement(k["a"],{value:l,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"car_head_id")},y.cars&&y.cars.map((e,t)=>{return _.a.createElement(De,{key:t,value:e.id},e.car_code)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u6c14\u6e90"),_.a.createElement(k["a"],{value:s,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"supp_goods_id")},y.goods&&y.goods.map((e,t)=>{return _.a.createElement(De,{key:t,value:e.id},e.goods_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u7ad9\u70b9"),_.a.createElement(k["a"],{value:r,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"cust_site_id")},y.sites&&y.sites.map((e,t)=>{return _.a.createElement(De,{key:t,value:e.id},e.site_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u72b6\u6001"),_.a.createElement(k["a"],{value:c,style:{width:"8.75rem",marginRight:20},onChange:this.fetchHistoryList.bind(null,"status")},_.a.createElement(De,{value:""},"\u5168\u90e8"),_.a.createElement(De,{value:21},"\u5f85\u6211\u65b9\u786e\u8ba4"),_.a.createElement(De,{value:22},"\u5f85\u91c7\u8d2d"),_.a.createElement(De,{value:23},"\u5f85\u4f9b\u5e94\u5546\u63a5\u5355"),_.a.createElement(De,{value:24},"\u5f85\u8c03\u5ea6"),_.a.createElement(De,{value:25},"\u5f85\u51fa\u53d1"),_.a.createElement(De,{value:26},"\u5f85\u88c5\u8d27"),_.a.createElement(De,{value:27},"\u5f85\u5378\u8d27"),_.a.createElement(De,{value:28},"\u5f85\u5bf9\u8d26"),_.a.createElement(De,{value:29},"\u5bf9\u8d26\u4e2d"),_.a.createElement(De,{value:30},"\u5df2\u5bf9\u8d26"),_.a.createElement(De,{value:31},"\u5f85\u7ed3\u6b3e"),_.a.createElement(De,{value:32},"\u5df2\u5f00\u7968"),_.a.createElement(De,{value:33},"\u5df2\u5b8c\u6210"),_.a.createElement(De,{value:34},"\u5df2\u53d6\u6d88")),_.a.createElement(g["a"],{className:i.length?"ant-btn-primary":"",style:{marginRight:10},disabled:!i.length},"\u5bf9\u8d26"),_.a.createElement(g["a"],{type:"primary"},"\u5168\u90e8\u5bf9\u8d26")),_.a.createElement("div",{className:"table-container"},_.a.createElement(_e["a"],{columns:be["d"],dataSource:d,rowSelection:E,loading:p,pagination:!1,rowKey:e=>e.id,highLightColor:"#aaa",rowClassName:(e,t)=>{return t%2===0?"oddRow":"evenRow"},onRow:e=>({onClick:()=>{this.selectRow(e)}})})),_.a.createElement("div",{style:{textAlign:"center",marginTop:40}},_.a.createElement(ie["a"],{current:h,total:u,onChange:this.pageChange})))}},U=Q))||U),we=Object(I["a"])(Oe),ke=(a("P2fV"),a("NJEC")),Ie=k["a"].Option,Ne=g["a"].Group,Re=(W=Object(v["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),W((X=class extends E["Component"]{constructor(){super(...arguments),this.state={time_start:null,time_end:null,endOpen:!1,supp_goods_id:"",cust_site_id:"",status:""},this.disabledStartDate=(e=>{var t=this.state.time_end;return!(!e||!t)&&e.valueOf()>t.valueOf()}),this.disabledEndDate=(e=>{var t=this.state.time_start;return!(!e||!t)&&e.valueOf()<=t.valueOf()}),this.onChange=((e,t)=>{this.fetchReconciliationHistoryList(e,t)}),this.onStartChange=(e=>{this.onChange("time_start",e)}),this.onEndChange=(e=>{this.onChange("time_end",e)}),this.handleStartOpenChange=(e=>{e||this.setState({endOpen:!0})}),this.handleEndOpenChange=(e=>{this.setState({endOpen:e})}),this.fetchReconciliationHistoryList=((e,t)=>{console.log(e),console.log(t),this.setState({[e]:t},()=>{"time_start"!==e&&"time_end"!==e||(t=t.format("YYYY-MM-DD")),this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:Ce()({cust_id:this.props.match.params.ClientDetail,time_start:this.state.time_start?this.state.time_start.format("YYYY-MM-DD"):"",time_end:this.state.time_end?this.state.time_end.format("YYYY-MM-DD"):"",supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status},{[e]:t})}})})}),this.changePage=(e=>{var t=this.state,a=t.time_start,n=t.time_end,i=t.supp_goods_id,l=t.cust_site_id,s=t.status;this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:a,time_end:n,supp_goods_id:i,cust_site_id:l,status:s},page:e}})})}componentDidMount(){this.props.dispatch({type:"client/fetchOrderCondition",payload:{customer_id:this.props.match.params.ClientDetail}}).then(()=>{var e=this.props.client.clientCondition;console.log(e),this.setState({supp_goods_id:e.goods[0].id,cust_site_id:e.sites[0].id}),this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:"",time_end:"",supp_goods_id:e.goods[0].id,cust_site_id:e.sites[0].id,status:""}}})})}render(){var e=this.state,t=e.time_start,a=e.time_end,n=e.endOpen,i=e.supp_goods_id,l=e.cust_site_id,s=e.status,r=this.props,c=r.client,o=r.loading,m=c.reconciliationHistoryList,p=c.reconciliationHistoryPage,d=c.reconciliationHistoryTotal,h=c.clientCondition,u=[{align:"center",title:"\u64cd\u4f5c\u65f6\u95f4",dataIndex:"check_time",key:"check_time"},{align:"center",title:"\u5ba2\u6237",dataIndex:"customer_name",key:"customer_name"},{align:"center",title:"\u6c14\u6e90",dataIndex:"goods",key:"goods"},{align:"center",title:"\u7ad9\u70b9",dataIndex:"sites",key:"sites"},{align:"center",title:"\u5bf9\u8d26\u5468\u671f",key:"dzzq",render:(e,t)=>{return _.a.createElement("div",null,t.account_cycle_start," - ",t.account_cycle_end)}},{align:"center",title:"\u5bf9\u8d26\u91cf",dataIndex:"purchase_count",key:"purchase_count"},{align:"center",title:"\u5bf9\u8d26\u989d\uff08\u5143\uff09",dataIndex:"total_account",key:"total_account"},{align:"center",title:"\u72b6\u6001",dataIndex:"status",key:"status",render:e=>_.a.createElement("div",null,N["o"][e])},{align:"center",title:"\u64cd\u4f5c",key:"cz",render:(e,n,r)=>_.a.createElement(Ne,{className:"button-group"},_.a.createElement(g["a"],{className:"line-primary",onClick:()=>{var e=new URL(window.location.href),t=e.pathname.split("/");f["a"].push(`/${t[1]}/${t[2]}/ReconciliationDetails?id=${n.id}&${e.search.substr(1)}`)}},"\u660e\u7ec6"),_.a.createElement(g["a"],{className:"line-primary",onClick:()=>{this.props.dispatch({type:"client/downloadExcel",payload:{id:n.id}})}},"\u5bfc\u51fa"),_.a.createElement(g["a"],{className:"line-primary"},"\u786e\u8ba4\u5bf9\u8d26"),_.a.createElement(g["a"],{className:"line-primary"},"\u786e\u8ba4\u7ed3\u6b3e"),_.a.createElement(g["a"],{className:"line-primary"},"\u786e\u8ba4\u5f00\u7968"),_.a.createElement(ke["a"],{title:"\u786e\u5b9a\u5220\u9664\u6b64\u6761\u8bb0\u5f55\uff1f",placement:"left",onConfirm:()=>{this.props.dispatch({type:"client/deleteReconciliationHistory",payload:{id:n.id}}).then(()=>{this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:t,time_end:a,supp_goods_id:i,cust_site_id:l,status:s},page:p}})})}},_.a.createElement(g["a"],{className:"line-red"},"\u5220\u9664")))}];return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{style:{textAlign:"right",fontSize:"1rem",margin:"5px 0 20px"}},_.a.createElement("span",{style:{marginRight:10}},"\u88c5\u8f66\u65f6\u95f4"),_.a.createElement(ve["a"],{disabledDate:this.disabledStartDate,format:"YYYY-MM-DD",value:t,placeholder:"\u8d77\u59cb\u65f6\u95f4",onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange}),_.a.createElement("span",{style:{margin:"0 10px"}},"-"),_.a.createElement(ve["a"],{disabledDate:this.disabledEndDate,format:"YYYY-MM-DD",value:a,placeholder:"\u622a\u6b62\u65f6\u95f4",onChange:this.onEndChange,open:n,onOpenChange:this.handleEndOpenChange}),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u6c14\u6e90"),_.a.createElement(k["a"],{value:i,style:{width:"8.75rem"},onChange:this.fetchReconciliationHistoryList.bind(null,"supp_goods_id")},h.goods&&h.goods.map((e,t)=>{return _.a.createElement(Ie,{key:t,value:e.id},e.goods_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u7ad9\u70b9"),_.a.createElement(k["a"],{value:l,style:{width:"8.75rem"},onChange:this.fetchReconciliationHistoryList.bind(null,"cust_site_id")},h.sites&&h.sites.map((e,t)=>{return _.a.createElement(Ie,{key:t,value:e.id},e.site_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u72b6\u6001"),_.a.createElement(k["a"],{value:s,style:{width:"8.75rem"}},_.a.createElement(Ie,{value:""},"\u5168\u90e8"),_.a.createElement(Ie,{value:61},"\u5bf9\u8d26\u4e2d"),_.a.createElement(Ie,{value:62},"\u5df2\u5bf9\u8d26"),_.a.createElement(Ie,{value:63},"\u5f85\u7ed3\u6b3e"),_.a.createElement(Ie,{value:64},"\u5f85\u5f00\u7968"),_.a.createElement(Ie,{value:65},"\u5df2\u5b8c\u6210"))),_.a.createElement("div",{className:"table-container"},_.a.createElement(_e["a"],{columns:u,dataSource:m,loading:o,pagination:!1,rowKey:e=>e.id,highLightColor:"#aaa",rowClassName:(e,t)=>{return t%2===0?"oddRow":"evenRow"}})),_.a.createElement("div",{style:{textAlign:"center",marginTop:40}},_.a.createElement(ie["a"],{current:p,total:d,onChange:this.changePage})))}},G=X))||G),Ye=Object(I["a"])(Re),Le=y["a"].TabPane,qe=(ee=Object(v["connect"])(e=>{var t=e.client,a=e.global,n=e.loading;return{client:t,global:a,loading:n.models.client}}),ee((ae=class extends E["Component"]{constructor(){super(...arguments),this.changeCurrentTabs=(e=>{this.props.dispatch({type:"global/save",payload:{clientInfoCurrentTabs:e}})})}componentWillMount(){this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})}render(){var e=this.props.client.currentClientInfo;console.log(e);var t=this.props.global.clientInfoCurrentTabs,n=this.props.location.query.company;return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"toolbar"},_.a.createElement(g["a"],{type:"primary",icon:"rollback",onClick:()=>f["a"].goBack()},"\u8fd4\u56de"),_.a.createElement("img",{src:a("645o"),style:{margin:"0 20px 0 40px"},alt:""}),_.a.createElement("span",{className:"font-purple-color",style:{fontWeight:"bold"}},n),"1"===t?_.a.createElement(g["a"],{className:"red-btn-line",style:{float:"right",marginTop:20}},"\u5220\u9664\u5ba2\u6237"):null),_.a.createElement(y["a"],{activeKey:t,onChange:this.changeCurrentTabs,style:{padding:"12px 24px 60px"}},_.a.createElement(Le,{tab:"\u5ba2\u6237\u4fe1\u606f",key:"1"},e.id&&_.a.createElement(ne,null)),_.a.createElement(Le,{tab:"\u4f9b\u5e94\u7ad9\u70b9",key:"2"},_.a.createElement(Ee,null)),_.a.createElement(Le,{tab:"\u9500\u552e\u5386\u53f2",key:"3"},_.a.createElement(we,null)),_.a.createElement(Le,{tab:"\u5bf9\u8d26\u5386\u53f2",key:"4"},_.a.createElement(Ye,null))))}},te=ae))||te);t["default"]=qe},UKbY:function(e,t,a){e.exports={"status-box":"status-box___2781P","status-title":"status-title___kGbv5",level1:"level1___3wu5A",level2:"level2___3f7r_"}}}]);
>>>>>>> dev
