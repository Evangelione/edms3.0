(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0RgF":function(e,t,a){"use strict";a.r(t);a("+L6B");var i,n,l,s,r,c,o,m,d,p,h,u,g=a("2/Rp"),y=(a("Znn+"),a("ZTPi")),_=a("q1tI"),E=a.n(_),f=a("MuoO"),v=a("usdK"),C=(a("14J3"),a("BMrR")),b=(a("jCWc"),a("kPKH")),x=(a("IzEo"),a("bx4M")),S=(a("6UJt"),a("DFOY")),D=(a("5NDa"),a("5rEg")),Y=(a("Pwec"),a("CtXQ")),O=(a("y8nQ"),a("Vl3Y")),k=(a("OaEy"),a("2fM7")),w=a("utR0"),I=a("mjZG"),R=a("bNTS"),N=a.n(R),M=k["a"].Option,L=(i=Object(f["connect"])(e=>{var t=e.global,a=e.client,i=e.loading;return{global:t,client:a,loading:i.models.client}}),n=O["a"].create(),i(l=n(l=Object(w["a"])((s=class extends _["Component"]{constructor(e){super(e),this.handleSubmit=(e=>{e&&e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{if(!e){var a={id:this.props.match.params.ClientDetail,province:t.area_arr[0],city:t.area_arr[1],area:t.area_arr[2]||""};delete t.area_arr,Object.assign(t,a),this.props.dispatch({type:"client/updateClientInfo",payload:{form:t}}).then(()=>{this.setState({modifying:!1}),this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})})}})}),this.loadData=(e=>{var t=e[e.length-1];t.loading=!0,this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"cust",district_name:t.value,targetOption:t}}).then(()=>{})}),this.modify=(()=>{this.setState({modifying:!0});var e=this.props.client.currentClientInfo;this.props.dispatch({type:"global/inquireCascadeOptionsAll",payload:{module:"cust",province:e.province,city:e.city}})}),this.state={modifying:!1}}render(){var e=this.state.modifying,t=this.props,a=t.form,i=t.global,n=t.client,l=t.loading,s=n.currentClientInfo,r=i.cascadeOptions,c=a.getFieldDecorator,o=s.province+s.city+s.area||"";return E.a.createElement(x["a"],{title:E.a.createElement(E.a.Fragment,null,E.a.createElement(Y["a"],{type:"idcard",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),E.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},E.a.createElement(O["a"],{onSubmit:this.handleSubmit},E.a.createElement(C["a"],{className:N.a["info-list"]},E.a.createElement(b["a"],{span:8,xxl:7},E.a.createElement("i",null,"\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7")),E.a.createElement(b["a"],{span:16,xxl:17},s.tax_number),E.a.createElement(b["a"],{span:8,xxl:7},E.a.createElement("i",null,"\u516c\u53f8\u5168\u79f0")),E.a.createElement(b["a"],{span:16,xxl:17},e?E.a.createElement(O["a"].Item,{wrapperCol:{span:16}},c("company_full_name",{rules:[{required:!0}],initialValue:s.company_full_name})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u5168\u79f0"}))):s.company_full_name),E.a.createElement(b["a"],{span:8,xxl:7},E.a.createElement("i",null,"\u516c\u53f8\u7b80\u79f0")),E.a.createElement(b["a"],{span:16,xxl:17},e?E.a.createElement(O["a"].Item,{wrapperCol:{span:16}},c("company_name",{rules:[{required:!0}],initialValue:s.company_name})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u7b80\u79f0"}))):s.company_name),E.a.createElement(b["a"],{span:8,xxl:7},E.a.createElement("i",null,"\u516c\u53f8\u7c7b\u578b")),E.a.createElement(b["a"],{span:16,xxl:17},e?E.a.createElement(O["a"].Item,{wrapperCol:{span:16}},c("company_flow",{rules:[{required:!0}],initialValue:s.company_flow})(E.a.createElement(k["a"],{style:{width:"100%"}},E.a.createElement(M,{value:"1"},"\u8d38\u6613\u5546"),E.a.createElement(M,{value:"2"},"\u8fd0\u8d38\u5546"),E.a.createElement(M,{value:"9"},"\u96f6\u552e\u5546")))):"1"==s.company_flow?"\u8d38\u6613\u5546":"2"==s.company_flow?"\u8fd0\u8d38\u5546":"\u96f6\u552e\u5546"),E.a.createElement(b["a"],{span:8,xxl:7},E.a.createElement("i",null,"\u7701\u5e02\u533a\u53bf")),E.a.createElement(b["a"],{span:16,xxl:17},e?E.a.createElement(O["a"].Item,{wrapperCol:{span:16}},c("area_arr",{rules:[{required:!0}],initialValue:[s.province,s.city,s.area]})(E.a.createElement(S["a"],{options:r,loadData:this.loadData,placeholder:"\u8bf7\u9009\u62e9\u7701\u5e02\u533a\u53bf"}))):o),E.a.createElement(b["a"],{span:8,xxl:7},E.a.createElement("i",null,"\u8be6\u7ec6\u5730\u5740")),E.a.createElement(b["a"],{span:16,xxl:17},e?E.a.createElement(O["a"].Item,{wrapperCol:{span:16}},c("company_address",{rules:[{required:!0}],initialValue:s.company_address})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"}))):s.company_address),E.a.createElement(b["a"],{span:8,xxl:7},E.a.createElement("i",null,"\u5f00\u6237\u94f6\u884c")),E.a.createElement(b["a"],{span:16,xxl:17},e?E.a.createElement(O["a"].Item,{wrapperCol:{span:16}},c("bank",{rules:[{required:!0}],initialValue:s.bank})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u9009\u62e9\u5f00\u6237\u94f6\u884c"}))):s.bank),E.a.createElement(b["a"],{span:8,xxl:7},E.a.createElement("i",null,"\u94f6\u884c\u8d26\u53f7")),E.a.createElement(b["a"],{span:16,xxl:17},e?E.a.createElement(O["a"].Item,{wrapperCol:{span:16}},c("bank_account",{rules:[{required:!0}],initialValue:s.bank_account})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u94f6\u884c\u8d26\u53f7"}))):s.bank_account),E.a.createElement(b["a"],{span:24,style:{textAlign:"center",marginTop:20,marginBottom:40}},e?E.a.createElement(E.a.Fragment,null,E.a.createElement(g["a"],{type:"primary",htmlType:"submit",loading:l},"\u786e\u5b9a"),E.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying:!1})},"\u53d6\u6d88")):E.a.createElement("div",null,E.a.createElement(g["a"],{type:"primary",onClick:this.modify},"\u7f16\u8f91"))))))}},l=s))||l)||l)||l),q=L,H=(r=Object(f["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),c=O["a"].create(),r(o=c(o=Object(w["a"])((m=class extends _["Component"]{constructor(e){super(e),this.handleSubmit=(e=>{e&&e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{e||(t.id=this.props.match.params.ClientDetail,this.props.dispatch({type:"client/updateClientContact",payload:{form:t}}).then(()=>{this.setState({modifying:!1}),this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})}))})}),this.state={modifying:!1}}render(){var e=this.state.modifying,t=this.props,a=t.form,i=t.client,n=t.loading,l=i.currentClientInfo,s=a.getFieldDecorator;return E.a.createElement(x["a"],{title:E.a.createElement(E.a.Fragment,null,E.a.createElement(Y["a"],{type:"phone",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),E.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},E.a.createElement(O["a"],{onSubmit:this.handleSubmit},E.a.createElement(C["a"],{className:N.a["info-list"]},E.a.createElement(b["a"],{span:6},E.a.createElement("i",null,"\u8054\u7cfb\u4eba")),E.a.createElement(b["a"],{span:18},e?E.a.createElement(O["a"].Item,{wrapperCol:{span:16}},s("contact",{rules:[{required:!0}],initialValue:l.contact})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"}))):l.contact),E.a.createElement(b["a"],{span:6},E.a.createElement("i",null,"\u8054\u7cfb\u4eba\u624b\u673a")),E.a.createElement(b["a"],{span:18},e?E.a.createElement(O["a"].Item,{wrapperCol:{span:16}},s("contact_phone",{rules:[{required:!0}],initialValue:l.contact_phone})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u624b\u673a"}))):l.contact_phone),E.a.createElement(b["a"],{span:24,style:{textAlign:"center",marginTop:20,marginBottom:40}},e?E.a.createElement(E.a.Fragment,null,E.a.createElement(g["a"],{type:"primary",htmlType:"submit",loading:n},"\u786e\u5b9a"),E.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying:!1})},"\u53d6\u6d88")):E.a.createElement("div",null,E.a.createElement(g["a"],{type:"primary",onClick:()=>this.setState({modifying:!0})},"\u7f16\u8f91"))))))}},o=m))||o)||o)||o),j=H,V=a("j6FA"),F=(d=Object(f["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),p=O["a"].create(),d(h=p(h=Object(w["a"])((u=class extends _["Component"]{constructor(e){super(e),this.handleSubmit=((e,t,a)=>{a&&a.preventDefault(),this.props.form.validateFieldsAndScroll((a,i)=>{a||this.props.dispatch({type:"client/setClientFinance",payload:{id:this.props.match.params.ClientDetail,[e]:i[e]}}).then(()=>{this.setState({[t]:!1}),this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})})})}),this.state={idReceipt:!1,modifying1:!1,modifying2:!1,modifying3:!1}}render(){var e=this.state,t=e.idReceipt,a=e.modifying1,i=e.modifying2,n=e.modifying3,l=this.props,s=l.form,r=l.client,c=l.loading,o=r.currentClientInfo,m=s.getFieldDecorator;return E.a.createElement(x["a"],{title:E.a.createElement(E.a.Fragment,null,E.a.createElement(Y["a"],{type:"pay-circle",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),E.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},E.a.createElement(O["a"],null,E.a.createElement(C["a"],{className:N.a["info-list"]},E.a.createElement(b["a"],{span:6},E.a.createElement("i",null,"\u9884\u4ed8\u6b3e\u989d")),E.a.createElement(b["a"],{span:7},a?E.a.createElement(O["a"].Item,{wrapperCol:{span:22}},m("balance",{rules:[{required:!0}],initialValue:o.balance})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u9884\u6536\u6b3e\u989d"}))):`${o.balance||0} \u5143`),E.a.createElement(b["a"],{span:11},a?E.a.createElement(E.a.Fragment,null,E.a.createElement(g["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"balance","modifying1"),loading:c},"\u786e\u5b9a"),E.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying1:!1})},"\u53d6\u6d88")):E.a.createElement("div",null,E.a.createElement(g["a"],{className:t?"gray-btn":"yellow-btn",style:{verticalAlign:"middle"},onClick:()=>this.setState({modifying1:!0}),disabled:t},"\u6536\u6b3e"))),E.a.createElement(b["a"],{span:6},E.a.createElement("i",null,"\u4fe1\u7528\u603b\u989d")),E.a.createElement(b["a"],{span:7},i?E.a.createElement(O["a"].Item,{wrapperCol:{span:22}},m("credit",{rules:[{required:!0}],initialValue:o.credit})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u4fe1\u7528\u603b\u989d"}))):`${o.credit||0} \u5143`),E.a.createElement(b["a"],{span:11},i?E.a.createElement(E.a.Fragment,null,E.a.createElement(g["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"credit","modifying2"),loading:c},"\u4fdd\u5b58"),E.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying2:!1})},"\u53d6\u6d88")):E.a.createElement("div",null,E.a.createElement(g["a"],{type:"primary",onClick:()=>this.setState({modifying2:!0})},"\u8bbe\u7f6e"))),E.a.createElement(b["a"],{span:6},E.a.createElement("i",null,"\u9884\u8b66\u989d\u5ea6")),E.a.createElement(b["a"],{span:7},n?E.a.createElement(O["a"].Item,{wrapperCol:{span:22}},m("credit_notice",{rules:[{required:!0}],initialValue:o.credit_notice})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u9884\u8b66\u989d\u5ea6"}))):`${o.credit_notice||0} \u5143`),E.a.createElement(b["a"],{span:11},n?E.a.createElement(E.a.Fragment,null,E.a.createElement(g["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"credit_notice","modifying3"),loading:c},"\u4fdd\u5b58"),E.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying3:!1})},"\u53d6\u6d88")):E.a.createElement("div",null,E.a.createElement(g["a"],{type:"primary",onClick:()=>this.setState({modifying3:!0})},"\u8bbe\u7f6e"))),E.a.createElement(b["a"],{span:6},E.a.createElement("i",null,"\u5269\u4f59\u989d\u5ea6")),E.a.createElement(b["a"],{span:18},Object(V["a"])(o.credit-0-(o.credit_used-0),2)," \u5143"),E.a.createElement(b["a"],{span:6},E.a.createElement("i",null,"\u5df2\u7528\u989d\u5ea6")),E.a.createElement(b["a"],{span:18},Object(V["a"])(o.credit_used-0,2)," \u5143"))))}},h=u))||h)||h)||h),T=F;class A extends _["Component"]{constructor(e){super(e),this.state={editInfo:!1,editContact:!1,editFinance:!1}}render(){return E.a.createElement("div",{style:{marginTop:5}},E.a.createElement(C["a"],{gutter:36},E.a.createElement(b["a"],{span:8},E.a.createElement(q,null)),E.a.createElement(b["a"],{span:8},E.a.createElement(j,null)),E.a.createElement(b["a"],{span:8},E.a.createElement(T,null))))}}var K,$,B,P,z,Z,J,U,Q,W,G,X,ee,te,ae,ie,ne=A,le=(a("DjyN"),a("NUBc")),se=(a("DZo9"),a("8z0m")),re=(a("R9oj"),a("ECub")),ce=(a("2qtc"),a("kLXV")),oe=a("jehZ"),me=a.n(oe),de=k["a"].Option,pe=(K=Object(f["connect"])(e=>{var t=e.global,a=e.client,i=e.loading;return{global:t,client:a,loading:i.models.client}}),$=O["a"].create(),K(B=$(B=Object(w["a"])((P=class extends _["Component"]{constructor(e){super(e),this.openInsertModal=(()=>{if(this.state.modalVisible)return!1;this.setState({modalVisible:!0},()=>{this.props.modify?this.inquire():this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"site"}})})}),this.closeInsertModal=(e=>{e&&e.stopPropagation(),this.setState({modalVisible:!1}),this.props.form.resetFields()}),this.inquire=(()=>{this.props.dispatch({type:"client/inquireSiteInfoById",payload:{id:this.props.modify}}).then(()=>{var e=this.props.client.currentSiteInfo;this.props.dispatch({type:"global/inquireCascadeOptionsAll",payload:{module:"cust",province:e.province,city:e.city}})})}),this.loadData=(e=>{var t=e[e.length-1];t.loading=!0,this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"cust",district_name:t.value,targetOption:t}}).then(()=>{})}),this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{if(!e){var a={province:t.area_arr[0],city:t.area_arr[1],area:t.area_arr[2]||""};delete t.area_arr,t.customer_id=this.props.match.params.ClientDetail,Object.assign(t,a);var i=this.props.modify,n=i?"updateSiteInfo":"insertSite";i&&(t.id=i),this.props.dispatch({type:`client/${n}`,payload:{form:t}}).then(()=>{this.closeInsertModal(),this.props.dispatch({type:"client/fetchSiteList",payload:{customer_id:this.props.match.params.ClientDetail}})})}})}),this.state={modalVisible:!1,autoCompleteResult:[]}}render(){var e=this.state.modalVisible,t=this.props,a=t.children,i=t.modify,n=t.global,l=t.client,s=t.form,r=l.currentSiteInfo,c=n.cascadeOptions,o=s.getFieldDecorator,m={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},d={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}};return E.a.createElement("div",{style:{display:"inline-block"},onClick:this.openInsertModal},a,E.a.createElement(ce["a"],{visible:e,title:i?"\u7f16\u8f91\u7ad9\u70b9":"\u65b0\u589e\u7ad9\u70b9",width:600,bodyStyle:{padding:"24px 60px"},footer:null,onCancel:this.closeInsertModal,maskClosable:!1},E.a.createElement(O["a"],{onSubmit:this.handleSubmit},E.a.createElement(O["a"].Item,me()({},m,{label:"\u7ad9\u70b9\u5168\u79f0"}),i?E.a.createElement("span",{style:{marginLeft:10}},r.site_full_name):o("site_full_name",{rules:[{required:!0}]})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ad9\u70b9\u5168\u79f0"}))),E.a.createElement(O["a"].Item,me()({},m,{label:"\u7ad9\u70b9\u7b80\u79f0"}),o("site_name",{rules:[{required:!0}],initialValue:i?r.site_name:""})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ad9\u70b9\u7b80\u79f0"}))),E.a.createElement(O["a"].Item,me()({},m,{label:"\u7ad9\u70b9\u7c7b\u578b"}),o("site_type",{rules:[{required:!0}],initialValue:i?r.site_type:"1"})(E.a.createElement(k["a"],{style:{width:"100%"}},E.a.createElement(de,{value:"1"},"\u52a0\u6c14\u7ad9"),E.a.createElement(de,{value:"2"},"\u6c14\u5316\u7ad9")))),E.a.createElement(O["a"].Item,me()({},m,{label:"\u7701\u5e02\u533a\u53bf"}),o("area_arr",{rules:[{required:!0,type:"array",message:"\u7701\u5e02\u533a\u53bf"}],initialValue:i?[r.province,r.city,r.area]:""})(E.a.createElement(S["a"],{options:c,loadData:this.loadData,placeholder:"\u8bf7\u9009\u62e9\u7701\u5e02\u533a\u53bf"}))),E.a.createElement(O["a"].Item,me()({},m,{label:"\u8be6\u7ec6\u5730\u5740"}),o("site_address",{rules:[{required:!0}],initialValue:i?r.site_address:""})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"}))),E.a.createElement(O["a"].Item,me()({},m,{label:"\u8054\u7cfb\u4eba"}),o("contact",{rules:[{required:!0}],initialValue:i?r.contact:""})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"}))),E.a.createElement(O["a"].Item,me()({},m,{label:"\u8054\u7cfb\u4eba\u7535\u8bdd"}),o("contact_phone",{rules:[{required:!0}],initialValue:i?r.contact_phone:""})(E.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u7535\u8bdd"}))),E.a.createElement(O["a"].Item,d,E.a.createElement(g["a"],{type:"primary",htmlType:"submit"},"\u786e\u5b9a"),E.a.createElement(g["a"],{className:"red-btn",style:{marginLeft:20,marginTop:20},onClick:this.closeInsertModal},"\u53d6\u6d88")))))}},B=P))||B)||B)||B),he=pe,ue=a("3tTZ"),ge=D["a"].Search,ye=k["a"].Option,_e=(z=Object(f["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),z(Z=Object(w["a"])((J=class extends _["Component"]{constructor(e){super(e),this.fetchSiteList=(()=>{this.props.dispatch({type:"client/fetchSiteList",payload:{customer_id:this.props.match.params.ClientDetail}})}),this.mapItem=(()=>{var e=this.state.managementStatus,t=this.props.client.siteList;return t.length?t.map((t,i)=>E.a.createElement("div",{className:"list-item",key:t.id},E.a.createElement("div",{className:"serial-num"},i+1),E.a.createElement("div",{className:"company-box"},E.a.createElement("div",null,E.a.createElement("img",{src:a("tTbt"),alt:""})),E.a.createElement("div",{className:"company-name"},t.site_name)),E.a.createElement("div",{className:"detail-box"},E.a.createElement("div",{className:"site-type"},E.a.createElement("div",null,"\u7ad9\u70b9\u7c7b\u578b"),E.a.createElement("div",{className:"site-color"},I["m"][t.site_type-1])),E.a.createElement("div",{className:"address"},t.province+t.city+t.area),E.a.createElement("div",{className:"operating"},e?E.a.createElement(ue["a"],{state:"deleteSite",okClass:"red-btn",id:t.id},E.a.createElement(g["a"],{className:"red-btn"},"\u79fb\u9664\u7ad9\u70b9")):E.a.createElement(he,{modify:t.id},E.a.createElement(g["a"],{type:"primary"},"\u7f16\u8f91")))))):E.a.createElement(re["a"],{style:{marginTop:20}})}),this.changeSiteName=(e=>{this.props.dispatch({type:"client/save",payload:{site_name:e.target.value}}),""===e.target.value&&this.searchSiteList("")}),this.searchSiteList=(e=>{this.props.dispatch({type:"client/fetchSiteList",payload:{customer_id:this.props.match.params.ClientDetail,site_name:e}})}),this.pageChange=(e=>{this.props.dispatch({type:"client/fetchSiteList",payload:{page:e,customer_id:this.props.client.customer_id,site_name:this.props.client.site_name}})}),this.upLoadExcel=(e=>{this.props.dispatch({type:"client/upLoadExcel",payload:{file:e}}).then(()=>{this.fetchSiteList()})}),this.state={managementStatus:!1}}componentWillMount(){this.fetchSiteList()}render(){var e=this.state.managementStatus,t=this.props,a=t.client,i=t.loading,n=a.sitePage,l=a.siteTotal,s=a.site_name;return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"tabs-toolbar"},E.a.createElement("div",{style:{display:"inline-block",marginRight:10}},E.a.createElement("div",{style:{display:"inline-block",marginRight:12}},"\u6392\u5e8f\u65b9\u5f0f"),E.a.createElement(k["a"],{defaultValue:"jack",style:{width:"8.75rem"},onChange:this.handleChange},E.a.createElement(ye,{value:"jack"},"\u7ed3\u7b97\u91cf"),E.a.createElement(ye,{value:"lucy"},"\u5229\u6da6\u8d21\u732e"),E.a.createElement(ye,{value:"Yiminghe"},"\u8d21\u732e\u5360\u6bd4"))),E.a.createElement(ge,{placeholder:"\u8bf7\u8f93\u5165\u7ad9\u70b9\u540d\u8fdb\u884c\u67e5\u627e",enterButton:"\u67e5\u627e",value:s,onChange:this.changeSiteName,onSearch:this.searchSiteList,style:{width:"25rem",height:"2.5rem",marginRight:15,display:"inline-flex"}}),e?E.a.createElement(g["a"],{className:"yellow-btn",style:{marginRight:10},onClick:()=>this.setState({managementStatus:!e})},"\u5b8c\u6210"):E.a.createElement(g["a"],{type:"primary",style:{marginRight:10},onClick:()=>this.setState({managementStatus:!e})},"\u7ba1\u7406\u7ad9\u70b9"),E.a.createElement(he,null,E.a.createElement(g["a"],{type:"primary",style:{marginRight:10}},"\u65b0\u589e\u7ad9\u70b9")),E.a.createElement(se["a"],{accept:".xls,.xlsx",name:"excel",action:`${I["c"]}/index/site/import`,customRequest:this.upLoadExcel,showUploadList:!1},E.a.createElement(g["a"],{type:"primary",loading:i},"\u5bfc\u5165\u7ad9\u70b9"))),this.mapItem(),E.a.createElement("div",{style:{textAlign:"center",marginTop:40}},E.a.createElement(le["a"],{current:n,total:l,pageSize:I["f"],onChange:this.pageChange})))}},Z=J))||Z)||Z),Ee=_e,fe=(a("g9YV"),a("wCAj")),ve=(a("iQDF"),a("+eQT")),Ce=a("p0pE"),be=a.n(Ce),xe=a("ZJHh"),Se=a("UKbY"),De=a.n(Se),Ye=k["a"].Option,Oe=(U=Object(f["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),U((W=class extends _["Component"]{constructor(){super(...arguments),this.state={load_time_start:null,load_time_end:null,endOpen:!1,selectedRowKeys:[],car_head_id:"",supp_goods_id:"",cust_site_id:"",status:""},this.disabledStartDate=(e=>{var t=this.state.load_time_end;return!(!e||!t)&&e.valueOf()>t.valueOf()}),this.disabledEndDate=(e=>{var t=this.state.load_time_start;return!(!e||!t)&&e.valueOf()<=t.valueOf()}),this.onChange=((e,t)=>{this.fetchHistoryList(e,t)}),this.onStartChange=(e=>{this.onChange("load_time_start",e)}),this.onEndChange=(e=>{this.onChange("load_time_end",e)}),this.handleStartOpenChange=(e=>{e||this.setState({endOpen:!0})}),this.handleEndOpenChange=(e=>{this.setState({endOpen:e})}),this.renderStatusBox=(()=>{return E.a.createElement(C["a"],{gutter:26,className:De.a["status-box"],style:{margin:0}},I["l"].map((e,t)=>E.a.createElement(b["a"],{span:3,key:t},E.a.createElement("div",null,E.a.createElement("div",{className:De.a["status-title"]},E.a.createElement(Y["a"],{type:"chrome"}),E.a.createElement("div",null,e.title)),E.a.createElement("div",{className:De.a["level1"]},E.a.createElement("div",null,e.level1),E.a.createElement("div",null,"12")),E.a.createElement("div",{className:De.a["level2"]},E.a.createElement("div",null,e.level2),E.a.createElement("div",null,"2.1 \u4e07"))))))}),this.onSelectedRowKeysChange=((e,t)=>{this.setState({selectedRowKeys:e})}),this.selectRow=(e=>{var t=[...this.state.selectedRowKeys];t.indexOf(e.id)>=0?t.splice(t.indexOf(e.id),1):t.push(e.id),this.setState({selectedRowKeys:t})}),this.fetchHistoryList=((e,t)=>{console.log(e),console.log(t),this.setState({[e]:t},()=>{"load_time_start"!==e&&"load_time_end"!==e||(t=t?t.format("YYYY-MM-DD"):t),this.props.dispatch({type:"client/fetchClientHistory",payload:{form:be()({cust_id:this.props.match.params.ClientDetail,load_time_start:this.state.load_time_start?this.state.load_time_start.format("YYYY-MM-DD"):"",load_time_end:this.state.load_time_end?this.state.load_time_end.format("YYYY-MM-DD"):"",car_head_id:this.state.car_head_id,supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status},{[e]:t})}})})}),this.pageChange=(e=>{var t=this.state,a=t.load_time_start,i=t.load_time_end,n=t.car_head_id,l=t.supp_goods_id,s=t.cust_site_id,r=t.status;this.props.dispatch({type:"client/fetchClientHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,load_time_start:a,load_time_end:i,car_head_id:n,supp_goods_id:l,cust_site_id:s,status:r},page:e}})})}componentDidMount(){console.log(this.props),this.props.dispatch({type:"client/fetchOrderCondition",payload:{customer_id:this.props.match.params.ClientDetail}}).then(()=>{var e=this.props.client.clientCondition;console.log(e),this.setState({car_head_id:"27",supp_goods_id:e.goods.length?e.goods[0].id:"",cust_site_id:e.sites.length?e.sites[0].id:""}),this.props.dispatch({type:"client/fetchClientHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,load_time_start:"",load_time_end:"",car_head_id:"27",supp_goods_id:e.goods.length?e.goods[0].id:"",cust_site_id:e.sites.length?e.sites[0].id:"",status:""}}})})}render(){var e=this.state,t=e.load_time_start,a=e.load_time_end,i=e.endOpen,n=e.selectedRowKeys,l=e.car_head_id,s=e.supp_goods_id,r=e.cust_site_id,c=e.status,o=this.props,m=o.client,d=o.loading,p=m.salesHistoryList,h=m.salesHistoryPage,u=m.salesHistoryTotal,y=m.clientCondition;this.onSelectedRowKeysChange;return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{style:{textAlign:"right",fontSize:"1rem",margin:"5px 0 20px"}},E.a.createElement("span",{style:{marginRight:10}},"\u88c5\u8f66\u65f6\u95f4"),E.a.createElement(ve["a"],{disabledDate:this.disabledStartDate,format:"YYYY-MM-DD",value:t,placeholder:"\u8d77\u59cb\u65f6\u95f4",onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange}),E.a.createElement("span",{style:{margin:"0 10px"}},"-"),E.a.createElement(ve["a"],{disabledDate:this.disabledEndDate,format:"YYYY-MM-DD",value:a,placeholder:"\u622a\u6b62\u65f6\u95f4",onChange:this.onEndChange,open:i,onOpenChange:this.handleEndOpenChange}),E.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u8f66\u724c"),E.a.createElement(k["a"],{value:l,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"car_head_id")},y.cars&&y.cars.map((e,t)=>{return E.a.createElement(Ye,{key:t,value:e.id},e.car_code)})),E.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u6c14\u6e90"),E.a.createElement(k["a"],{value:s,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"supp_goods_id")},y.goods&&y.goods.map((e,t)=>{return E.a.createElement(Ye,{key:t,value:e.id},e.goods_name)})),E.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u7ad9\u70b9"),E.a.createElement(k["a"],{value:r,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"cust_site_id")},y.sites&&y.sites.map((e,t)=>{return E.a.createElement(Ye,{key:t,value:e.id},e.site_name)})),E.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u72b6\u6001"),E.a.createElement(k["a"],{value:c,style:{width:"8.75rem",marginRight:20},onChange:this.fetchHistoryList.bind(null,"status")},E.a.createElement(Ye,{value:""},"\u5168\u90e8"),E.a.createElement(Ye,{value:21},"\u5f85\u6211\u65b9\u786e\u8ba4"),E.a.createElement(Ye,{value:22},"\u5f85\u91c7\u8d2d"),E.a.createElement(Ye,{value:23},"\u5f85\u4f9b\u5e94\u5546\u63a5\u5355"),E.a.createElement(Ye,{value:24},"\u5f85\u8c03\u5ea6"),E.a.createElement(Ye,{value:25},"\u5f85\u51fa\u53d1"),E.a.createElement(Ye,{value:26},"\u5f85\u88c5\u8d27"),E.a.createElement(Ye,{value:27},"\u5f85\u5378\u8d27"),E.a.createElement(Ye,{value:28},"\u5f85\u5bf9\u8d26"),E.a.createElement(Ye,{value:29},"\u5bf9\u8d26\u4e2d"),E.a.createElement(Ye,{value:30},"\u5df2\u5bf9\u8d26"),E.a.createElement(Ye,{value:31},"\u5f85\u7ed3\u6b3e"),E.a.createElement(Ye,{value:32},"\u5df2\u5f00\u7968"),E.a.createElement(Ye,{value:33},"\u5df2\u5b8c\u6210"),E.a.createElement(Ye,{value:34},"\u5df2\u53d6\u6d88")),E.a.createElement(g["a"],{type:"primary"},"\u5168\u90e8\u5bf9\u8d26")),E.a.createElement("div",{className:"table-container"},E.a.createElement(fe["a"],{columns:xe["b"],dataSource:p,loading:d,pagination:!1,rowKey:e=>e.id,highLightColor:"#aaa",rowClassName:(e,t)=>{return t%2===0?"oddRow":"evenRow"},onRow:e=>({onClick:()=>{this.selectRow(e)}})})),E.a.createElement("div",{style:{textAlign:"center",marginTop:40}},E.a.createElement(le["a"],{current:h,total:u,onChange:this.pageChange})))}},Q=W))||Q),ke=Object(w["a"])(Oe),we=(a("P2fV"),a("NJEC")),Ie=k["a"].Option,Re=g["a"].Group,Ne=(G=Object(f["connect"])(e=>{var t=e.client,a=e.loading;return{client:t,loading:a.models.client}}),G((ee=class extends _["Component"]{constructor(){super(...arguments),this.state={time_start:null,time_end:null,endOpen:!1,supp_goods_id:"",cust_site_id:"",status:""},this.disabledStartDate=(e=>{var t=this.state.time_end;return!(!e||!t)&&e.valueOf()>t.valueOf()}),this.disabledEndDate=(e=>{var t=this.state.time_start;return!(!e||!t)&&e.valueOf()<=t.valueOf()}),this.onChange=((e,t)=>{this.fetchReconciliationHistoryList(e,t)}),this.onStartChange=(e=>{this.onChange("time_start",e)}),this.onEndChange=(e=>{this.onChange("time_end",e)}),this.handleStartOpenChange=(e=>{e||this.setState({endOpen:!0})}),this.handleEndOpenChange=(e=>{this.setState({endOpen:e})}),this.fetchReconciliationHistoryList=((e,t)=>{console.log(e),console.log(t),this.setState({[e]:t},()=>{"time_start"!==e&&"time_end"!==e||(t=t?t.format("YYYY-MM-DD"):t),this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:be()({cust_id:this.props.match.params.ClientDetail,time_start:this.state.time_start?this.state.time_start.format("YYYY-MM-DD"):"",time_end:this.state.time_end?this.state.time_end.format("YYYY-MM-DD"):"",supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status},{[e]:t})}})})}),this.changePage=(e=>{var t=this.state,a=t.time_start,i=t.time_end,n=t.supp_goods_id,l=t.cust_site_id,s=t.status;this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:a,time_end:i,supp_goods_id:n,cust_site_id:l,status:s},page:e}})}),this.confirmReconciliation=(e=>{this.props.dispatch({type:"client/confirmReconciliation",payload:{id:e}}).then(()=>{this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:this.state.time_start?this.state.time_start.format("YYYY-MM-DD"):"",time_end:this.state.time_end?this.state.time_end.format("YYYY-MM-DD"):"",supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status}}})})}),this.payment=(e=>{this.props.dispatch({type:"client/payment",payload:{id:e}}).then(()=>{this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:this.state.time_start?this.state.time_start.format("YYYY-MM-DD"):"",time_end:this.state.time_end?this.state.time_end.format("YYYY-MM-DD"):"",supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status}}})})}),this.billing=(e=>{this.props.dispatch({type:"client/billing",payload:{id:e}}).then(()=>{this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:this.state.time_start?this.state.time_start.format("YYYY-MM-DD"):"",time_end:this.state.time_end?this.state.time_end.format("YYYY-MM-DD"):"",supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status}}})})})}componentDidMount(){this.props.dispatch({type:"client/fetchOrderCondition",payload:{customer_id:this.props.match.params.ClientDetail}}).then(()=>{var e=this.props.client.clientCondition;console.log(e),this.setState({supp_goods_id:e.goods.length?e.goods[0].id:"",cust_site_id:e.sites.length?e.sites[0].id:""}),this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:"",time_end:"",supp_goods_id:e.goods.length?e.goods[0].id:"",cust_site_id:e.sites.length?e.sites[0].id:"",status:""}}})})}render(){var e=this.state,t=e.time_start,a=e.time_end,i=e.endOpen,n=e.supp_goods_id,l=e.cust_site_id,s=e.status,r=this.props,c=r.client,o=r.loading,m=c.reconciliationHistoryList,d=c.reconciliationHistoryPage,p=c.reconciliationHistoryTotal,h=c.clientCondition,u=[{align:"center",title:"\u64cd\u4f5c\u65f6\u95f4",dataIndex:"check_time",key:"check_time"},{align:"center",title:"\u5ba2\u6237",dataIndex:"customer_name",key:"customer_name"},{align:"center",title:"\u6c14\u6e90",dataIndex:"goods",key:"goods"},{align:"center",title:"\u7ad9\u70b9",dataIndex:"sites",key:"sites"},{align:"center",title:"\u5bf9\u8d26\u5468\u671f",key:"dzzq",render:(e,t)=>{return E.a.createElement("div",null,t.account_cycle_start," - ",t.account_cycle_end)}},{align:"center",title:"\u5bf9\u8d26\u91cf",dataIndex:"purchase_count",key:"purchase_count"},{align:"center",title:"\u5bf9\u8d26\u989d\uff08\u5143\uff09",dataIndex:"total_account",key:"total_account"},{align:"center",title:"\u72b6\u6001",dataIndex:"status",key:"status",render:e=>E.a.createElement("div",null,I["o"][e])},{align:"center",title:"\u64cd\u4f5c",key:"cz",render:(e,i,r)=>E.a.createElement(Re,{className:"button-group"},E.a.createElement(g["a"],{className:"line-primary",onClick:()=>{var e=new URL(window.location.href),t=e.pathname.split("/");v["a"].push(`/${t[1]}/${t[2]}/ReconciliationDetails?status=${i.status}&payment_status=${i.payment_status}&invoice_status=${i.invoice_status}&id=${i.id}&${e.search.substr(1)}`)}},"\u660e\u7ec6"),E.a.createElement(g["a"],{className:"line-primary",onClick:()=>{window.location.href=`${I["c"]}/index/cust/corder-export?id=${i.id}`}},"\u5bfc\u51fa"),E.a.createElement(g["a"],{className:"line-primary",disabled:"61"!==i.status,onClick:this.confirmReconciliation.bind(null,i.id)},"\u786e\u8ba4\u5bf9\u8d26"),E.a.createElement(g["a"],{className:"line-primary",disabled:"1"===i.payment_status,onClick:this.payment.bind(null,i.id)},"\u786e\u8ba4\u7ed3\u6b3e"),E.a.createElement(g["a"],{className:"line-primary",disabled:"1"===i.invoice_status,onClick:this.billing.bind(null,i.id)},"\u786e\u8ba4\u5f00\u7968"),E.a.createElement(we["a"],{title:"\u786e\u5b9a\u5220\u9664\u6b64\u6761\u8bb0\u5f55\uff1f",placement:"left",onConfirm:()=>{this.props.dispatch({type:"client/deleteReconciliationHistory",payload:{id:i.id}}).then(()=>{this.props.dispatch({type:"client/fetchReconciliationHistory",payload:{form:{cust_id:this.props.match.params.ClientDetail,time_start:t,time_end:a,supp_goods_id:n,cust_site_id:l,status:s},page:d}})})}},E.a.createElement(g["a"],{className:"line-red"},"\u5220\u9664")))}];return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{style:{textAlign:"right",fontSize:"1rem",margin:"5px 0 20px"}},E.a.createElement("span",{style:{marginRight:10}},"\u88c5\u8f66\u65f6\u95f4"),E.a.createElement(ve["a"],{disabledDate:this.disabledStartDate,format:"YYYY-MM-DD",value:t,placeholder:"\u8d77\u59cb\u65f6\u95f4",onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange}),E.a.createElement("span",{style:{margin:"0 10px"}},"-"),E.a.createElement(ve["a"],{disabledDate:this.disabledEndDate,format:"YYYY-MM-DD",value:a,placeholder:"\u622a\u6b62\u65f6\u95f4",onChange:this.onEndChange,open:i,onOpenChange:this.handleEndOpenChange}),E.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u6c14\u6e90"),E.a.createElement(k["a"],{value:n,style:{width:"8.75rem"},onChange:this.fetchReconciliationHistoryList.bind(null,"supp_goods_id")},h.goods&&h.goods.map((e,t)=>{return E.a.createElement(Ie,{key:t,value:e.id},e.goods_name)})),E.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u7ad9\u70b9"),E.a.createElement(k["a"],{value:l,style:{width:"8.75rem"},onChange:this.fetchReconciliationHistoryList.bind(null,"cust_site_id")},h.sites&&h.sites.map((e,t)=>{return E.a.createElement(Ie,{key:t,value:e.id},e.site_name)})),E.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u72b6\u6001"),E.a.createElement(k["a"],{value:s,style:{width:"8.75rem"}},E.a.createElement(Ie,{value:""},"\u5168\u90e8"),E.a.createElement(Ie,{value:61},"\u5bf9\u8d26\u4e2d"),E.a.createElement(Ie,{value:62},"\u5df2\u5bf9\u8d26"),E.a.createElement(Ie,{value:63},"\u5f85\u7ed3\u6b3e"),E.a.createElement(Ie,{value:64},"\u5f85\u5f00\u7968"),E.a.createElement(Ie,{value:65},"\u5df2\u5b8c\u6210"))),E.a.createElement("div",{className:"table-container"},E.a.createElement(fe["a"],{columns:u,dataSource:m,loading:o,pagination:!1,rowKey:e=>e.id,highLightColor:"#aaa",rowClassName:(e,t)=>{return t%2===0?"oddRow":"evenRow"}})),E.a.createElement("div",{style:{textAlign:"center",marginTop:40}},E.a.createElement(le["a"],{current:d,total:p,onChange:this.changePage})))}},X=ee))||X),Me=Object(w["a"])(Ne),Le=y["a"].TabPane,qe=(te=Object(f["connect"])(e=>{var t=e.client,a=e.global,i=e.loading;return{client:t,global:a,loading:i.models.client}}),te((ie=class extends _["Component"]{constructor(){super(...arguments),this.changeCurrentTabs=(e=>{this.props.dispatch({type:"global/save",payload:{clientInfoCurrentTabs:e}})})}componentWillMount(){this.props.dispatch({type:"client/inquireClientInfoById",payload:{id:this.props.match.params.ClientDetail}})}render(){var e=this.props.client.currentClientInfo;console.log(e);var t=this.props.global.clientInfoCurrentTabs,i=this.props.location.query.company,n=this.props.match.params.ClientDetail;return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"toolbar"},E.a.createElement(g["a"],{type:"primary",icon:"rollback",onClick:()=>v["a"].goBack()},"\u8fd4\u56de"),E.a.createElement("img",{src:a("645o"),style:{margin:"0 20px 0 40px"},alt:""}),E.a.createElement("span",{className:"font-purple-color",style:{fontWeight:"bold"}},i),"1"===t?E.a.createElement("div",{style:{float:"right"}},E.a.createElement(ue["a"],{state:"deleteClient",id:n},E.a.createElement(g["a"],{className:"red-btn-line"},"\u5220\u9664\u5ba2\u6237"))):null),E.a.createElement(y["a"],{activeKey:t,onChange:this.changeCurrentTabs,style:{padding:"12px 24px 60px"}},E.a.createElement(Le,{tab:"\u5ba2\u6237\u4fe1\u606f",key:"1"},e.id&&E.a.createElement(ne,null)),E.a.createElement(Le,{tab:"\u4f9b\u5e94\u7ad9\u70b9",key:"2"},E.a.createElement(Ee,null)),E.a.createElement(Le,{tab:"\u9500\u552e\u5386\u53f2",key:"3"},E.a.createElement(ke,null)),E.a.createElement(Le,{tab:"\u5bf9\u8d26\u5386\u53f2",key:"4"},E.a.createElement(Me,null))))}},ae=ie))||ae);t["default"]=qe},UKbY:function(e,t,a){e.exports={"status-box":"status-box___2781P","status-title":"status-title___kGbv5",level1:"level1___3wu5A",level2:"level2___3f7r_"}}}]);