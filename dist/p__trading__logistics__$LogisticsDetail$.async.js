(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"PJ+k":function(e,t,a){e.exports={iconFont:"iconFont___PSfgm","fleet-item":"fleet-item___32GNh","fleet-item-modify":"fleet-item-modify___3EdKN","item-box":"item-box___2D7yC","box-left":"box-left___jRipT","box-right":"box-right___G17Xh","box-right-title":"box-right-title___1C7iQ","hover-box":"hover-box___2fjpF",confirmBtn:"confirmBtn___pq1Qv",cancelBtn:"cancelBtn___3tL_z"}},uF1T:function(e,t,a){"use strict";a.r(t);a("+L6B");var i,l,s,n,r,o,c,m,d,p,h,g,u=a("2/Rp"),y=(a("Znn+"),a("ZTPi")),E=a("q1tI"),_=a.n(E),f=a("MuoO"),b=a("usdK"),v=a("3tTZ"),x=(a("14J3"),a("BMrR")),C=(a("jCWc"),a("kPKH")),L=(a("IzEo"),a("bx4M")),F=(a("6UJt"),a("DFOY")),N=(a("5NDa"),a("5rEg")),D=(a("Pwec"),a("CtXQ")),S=(a("y8nQ"),a("Vl3Y")),k=(a("OaEy"),a("2fM7")),w=a("utR0"),Y=a("mjZG"),I=a("bNTS"),O=a.n(I),M=k["a"].Option,R=(i=Object(f["connect"])(e=>{var t=e.global,a=e.logistics,i=e.loading;return{global:t,logistics:a,loading:i.models.logistics}}),l=S["a"].create(),i(s=l(s=Object(w["a"])((n=class extends E["Component"]{constructor(e){super(e),this.loadData=(e=>{var t=e[e.length-1];t.loading=!0,this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"logistics",district_name:t.value,targetOption:t}}).then(()=>{})}),this.handleSubmit=(e=>{e&&e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{if(!e){var a={id:this.props.match.params.LogisticsDetail,province:t.area_arr[0],city:t.area_arr[1],area:t.area_arr[2]||""};delete t.area_arr,Object.assign(t,a),this.props.dispatch({type:"logistics/updateLogisticsInfo",payload:{form:t}}).then(()=>{this.setState({modifying:!1}),this.props.dispatch({type:"logistics/inquireLogisticsInfoById",payload:{id:this.props.match.params.LogisticsDetail}})})}})}),this.modify=(()=>{this.setState({modifying:!0});var e=this.props.logistics.currentLogisticsInfo;this.props.dispatch({type:"global/inquireCascadeOptionsAll",payload:{module:"logistics",province:e.province,city:e.city}})}),this.state={modifying:!1}}render(){var e=this.state.modifying,t=this.props,a=t.form,i=t.global,l=t.logistics,s=t.loading,n=i.cascadeOptions,r=l.currentLogisticsInfo,o=a.getFieldDecorator,c=r.province+r.city+r.area||"";return _.a.createElement(L["a"],{title:_.a.createElement(_.a.Fragment,null,_.a.createElement(D["a"],{type:"idcard",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),_.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},_.a.createElement(S["a"],{onSubmit:this.handleSubmit},_.a.createElement(x["a"],{className:O.a["info-list"]},_.a.createElement(C["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7")),_.a.createElement(C["a"],{span:16,xxl:17},r.tax_number),_.a.createElement(C["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u516c\u53f8\u5168\u79f0")),_.a.createElement(C["a"],{span:16,xxl:17},e?_.a.createElement(S["a"].Item,{wrapperCol:{span:16}},o("company_full_name",{rules:[{required:!0}],initialValue:r.company_full_name})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u5168\u79f0"}))):r.company_full_name),_.a.createElement(C["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u516c\u53f8\u7b80\u79f0")),_.a.createElement(C["a"],{span:16,xxl:17},e?_.a.createElement(S["a"].Item,{wrapperCol:{span:16}},o("company_name",{rules:[{required:!0}],initialValue:r.company_name})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u7b80\u79f0"}))):r.company_name),_.a.createElement(C["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u516c\u53f8\u7c7b\u578b")),_.a.createElement(C["a"],{span:16,xxl:17},e?_.a.createElement(S["a"].Item,{wrapperCol:{span:16}},o("company_flow",{rules:[{required:!0}],initialValue:r.company_flow+""})(_.a.createElement(k["a"],{style:{width:"100%"}},_.a.createElement(M,{value:"1"},"\u8d38\u6613\u5546"),_.a.createElement(M,{value:"2"},"\u96f6\u552e\u5546")))):Y["i"][r.company_flow-1]),_.a.createElement(C["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u7701\u5e02\u533a\u53bf")),_.a.createElement(C["a"],{span:16,xxl:17},e?_.a.createElement(S["a"].Item,{wrapperCol:{span:16}},o("area_arr",{initialValue:[r.province,r.city,r.area]})(_.a.createElement(F["a"],{options:n,loadData:this.loadData,placeholder:"\u8bf7\u9009\u62e9\u7701\u5e02\u533a\u53bf"}))):c),_.a.createElement(C["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u8be6\u7ec6\u5730\u5740")),_.a.createElement(C["a"],{span:16,xxl:17},e?_.a.createElement(S["a"].Item,{wrapperCol:{span:16}},o("company_address",{initialValue:r.company_address})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"}))):r.company_address),_.a.createElement(C["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u5f00\u6237\u94f6\u884c")),_.a.createElement(C["a"],{span:16,xxl:17},e?_.a.createElement(S["a"].Item,{wrapperCol:{span:16}},o("bank",{initialValue:r.bank})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9\u5f00\u6237\u94f6\u884c"}))):r.bank),_.a.createElement(C["a"],{span:8,xxl:7},_.a.createElement("i",null,"\u94f6\u884c\u8d26\u53f7")),_.a.createElement(C["a"],{span:16,xxl:17},e?_.a.createElement(S["a"].Item,{wrapperCol:{span:16}},o("bank_account",{initialValue:r.bank_account})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u8f93\u5165\u94f6\u884c\u8d26\u53f7"}))):r.bank_account),_.a.createElement(C["a"],{span:24,style:{textAlign:"center",marginTop:20,marginBottom:40}},e?_.a.createElement(_.a.Fragment,null,_.a.createElement(u["a"],{type:"primary",htmlType:"submit",loading:s},"\u786e\u5b9a"),_.a.createElement(u["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(u["a"],{type:"primary",onClick:this.modify},"\u7f16\u8f91"))))))}},s=n))||s)||s)||s),T=R,V=(r=Object(f["connect"])(e=>{var t=e.logistics,a=e.loading;return{logistics:t,loading:a.models.logistics}}),o=S["a"].create(),r(c=o(c=Object(w["a"])((m=class extends E["Component"]{constructor(e){super(e),this.handleSubmit=(e=>{e&&e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{e||(t.id=this.props.match.params.LogisticsDetail,this.props.dispatch({type:"logistics/updateLogisticsInfo",payload:{form:t}}).then(()=>{this.setState({modifying:!1}),this.props.dispatch({type:"logistics/inquireLogisticsInfoById",payload:{id:this.props.match.params.LogisticsDetail}})}))})}),this.state={modifying:!1}}render(){var e=this.state.modifying,t=this.props,a=t.form,i=t.logistics,l=t.loading,s=i.currentLogisticsInfo,n=a.getFieldDecorator;return _.a.createElement(L["a"],{title:_.a.createElement(_.a.Fragment,null,_.a.createElement(D["a"],{type:"phone",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),_.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},_.a.createElement(S["a"],{onSubmit:this.handleSubmit},_.a.createElement(x["a"],{className:O.a["info-list"]},_.a.createElement(C["a"],{span:7},_.a.createElement("i",null,"\u8054\u7cfb\u4eba")),_.a.createElement(C["a"],{span:17},e?_.a.createElement(S["a"].Item,{wrapperCol:{span:16}},n("contact",{rules:[{required:!0}],initialValue:s.contact})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"}))):s.contact),_.a.createElement(C["a"],{span:7},_.a.createElement("i",null,"\u8054\u7cfb\u4eba\u624b\u673a")),_.a.createElement(C["a"],{span:17},e?_.a.createElement(S["a"].Item,{wrapperCol:{span:16}},n("contact_phone",{rules:[{required:!0}],initialValue:s.contact_phone})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u624b\u673a"}))):s.contact_phone),_.a.createElement(C["a"],{span:24,style:{textAlign:"center",marginTop:20,marginBottom:40}},e?_.a.createElement(_.a.Fragment,null,_.a.createElement(u["a"],{type:"primary",htmlType:"submit",loading:l},"\u786e\u5b9a"),_.a.createElement(u["a"],{className:"red-btn",style:{marginLeft:20},onClick:()=>this.setState({modifying:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(u["a"],{type:"primary",onClick:()=>this.setState({modifying:!0})},"\u7f16\u8f91"))))))}},c=m))||c)||c)||c),j=V,H=a("j6FA"),q=(d=Object(f["connect"])(e=>{var t=e.logistics,a=e.loading;return{logistics:t,loading:a.models.logistics}}),p=S["a"].create(),d(h=p(h=Object(w["a"])((g=class extends E["Component"]{constructor(e){super(e),this.handleSubmit=((e,t,a)=>{a&&a.preventDefault(),this.props.form.validateFieldsAndScroll((a,i)=>{a||this.props.dispatch({type:"logistics/updateLogisticsInfo",payload:{form:{id:this.props.match.params.LogisticsDetail,[e]:i[e]}}}).then(()=>{this.setState({[t]:!1}),this.props.dispatch({type:"logistics/inquireLogisticsInfoById",payload:{id:this.props.match.params.LogisticsDetail}})})})}),this.state={idReceipt:!1,modifying1:!1,modifying2:!1,modifying3:!1}}render(){var e=this.state,t=e.idReceipt,a=e.modifying1,i=e.modifying2,l=e.modifying3,s=this.props,n=s.form,r=s.logistics,o=s.loading,c=r.currentLogisticsInfo,m=n.getFieldDecorator;return _.a.createElement(L["a"],{title:_.a.createElement(_.a.Fragment,null,_.a.createElement(D["a"],{type:"pay-circle",className:"font-primary-color",style:{marginRight:20,marginTop:2,fontSize:24}}),_.a.createElement("span",{style:{verticalAlign:"top"}},"\u57fa\u672c\u4fe1\u606f")),bordered:!1},_.a.createElement(S["a"],null,_.a.createElement(x["a"],{className:O.a["info-list"]},_.a.createElement(C["a"],{span:5},_.a.createElement("i",null,"\u9884\u4ed8\u6b3e\u989d")),_.a.createElement(C["a"],{span:5,xxl:7},a?_.a.createElement(S["a"].Item,{wrapperCol:{span:22}},m("balance",{rules:[{required:!0}],initialValue:c.balance})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u8f93\u5165\u9884\u6536\u6b3e\u989d"}))):`${c.balance||0} \u5143`),_.a.createElement(C["a"],{span:12},a?_.a.createElement(_.a.Fragment,null,_.a.createElement(u["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"balance","modifying1"),loading:o},"\u786e\u5b9a"),_.a.createElement(u["a"],{className:"red-btn",style:{marginLeft:15},onClick:()=>this.setState({modifying1:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(u["a"],{className:t?"gray-btn":"yellow-btn",style:{verticalAlign:"middle"},onClick:()=>this.setState({modifying1:!0}),disabled:t},"\u6536\u6b3e"))),_.a.createElement(C["a"],{span:5},_.a.createElement("i",null,"\u4fe1\u7528\u603b\u989d")),_.a.createElement(C["a"],{span:5,xxl:7},i?_.a.createElement(S["a"].Item,{wrapperCol:{span:22}},m("credit",{rules:[{required:!0}],initialValue:c.credit})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u8f93\u5165\u4fe1\u7528\u603b\u989d"}))):`${c.credit||0} \u5143`),_.a.createElement(C["a"],{span:12},i?_.a.createElement(_.a.Fragment,null,_.a.createElement(u["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"credit","modifying2"),loading:o},"\u4fdd\u5b58"),_.a.createElement(u["a"],{className:"red-btn",style:{marginLeft:15},onClick:()=>this.setState({modifying2:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(u["a"],{type:"primary",onClick:()=>this.setState({modifying2:!0})},"\u8bbe\u7f6e"))),_.a.createElement(C["a"],{span:5},_.a.createElement("i",null,"\u9884\u8b66\u989d\u5ea6")),_.a.createElement(C["a"],{span:5,xxl:7},l?_.a.createElement(S["a"].Item,{wrapperCol:{span:22}},m("credit_notice",{rules:[{required:!0}],initialValue:c.credit_notice})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u8f93\u5165\u9884\u8b66\u989d\u5ea6"}))):`${c.credit_notice||0} \u5143`),_.a.createElement(C["a"],{span:12},l?_.a.createElement(_.a.Fragment,null,_.a.createElement(u["a"],{type:"primary",onClick:this.handleSubmit.bind(null,"credit_notice","modifying3"),loading:o},"\u4fdd\u5b58"),_.a.createElement(u["a"],{className:"red-btn",style:{marginLeft:15},onClick:()=>this.setState({modifying3:!1})},"\u53d6\u6d88")):_.a.createElement("div",null,_.a.createElement(u["a"],{type:"primary",onClick:()=>this.setState({modifying3:!0})},"\u8bbe\u7f6e"))),_.a.createElement(C["a"],{span:5},_.a.createElement("i",null,"\u5269\u4f59\u989d\u5ea6")),_.a.createElement(C["a"],{span:19},Object(H["a"])(c.credit-0-(c.credit_used-0),2)," \u5143"),_.a.createElement(C["a"],{span:5},_.a.createElement("i",null,"\u5df2\u7528\u989d\u5ea6")),_.a.createElement(C["a"],{span:19},Object(H["a"])(c.credit_used-0,2)," \u5143"))))}},h=g))||h)||h)||h),B=q;class A extends E["Component"]{constructor(e){super(e),this.state={editInfo:!1,editContact:!1,editFinance:!1}}render(){return _.a.createElement("div",{style:{marginTop:5}},_.a.createElement(x["a"],{gutter:36},_.a.createElement(C["a"],{span:8},_.a.createElement(T,null)),_.a.createElement(C["a"],{span:7,xxl:8},_.a.createElement(j,null)),_.a.createElement(C["a"],{span:9,xxl:8},_.a.createElement(B,null))))}}var P,$,K,z,J,Z,G,U,Q,W,X,ee,te,ae,ie,le,se,ne=A,re=(a("2qtc"),a("kLXV")),oe=a("pVnL"),ce=a.n(oe),me=(a("DjyN"),a("NUBc")),de=(a("DZo9"),a("8z0m")),pe=(a("R9oj"),a("ECub")),he=(a("P2fV"),a("NJEC")),ge=a("MVZn"),ue=a.n(ge),ye=(a("miYZ"),a("tsqr")),Ee=a("PJ+k"),_e=a.n(Ee),fe=(P=Object(f["connect"])(e=>{var t=e.logistics,a=e.loading;return{logistics:t,loading:a.models.logistics}}),$=S["a"].create(),P(K=$(K=Object(w["a"])((z=class extends E["Component"]{constructor(e){var t;super(e),t=this,this.fetchFleetList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.props.dispatch({type:"logistics/fetchFleetList",payload:{page:e,id:t.props.match.params.LogisticsDetail}})},this.openModal=((e,t)=>{this.setState({modalVisible:!0,modalTitle:e.type+e.modalTitle,modalLabel1:e.modalLabel1,modalFiled1:e.modalFiled1,modalLabel2:e.modalLabel2,modalFiled2:e.modalFiled2},()=>{t?(this.props.form.setFieldsValue({[e.modalFiled1]:t[e.modalFiled1],[e.modalFiled2]:t[e.modalFiled2]}),this.setState({modifyId:t.id})):this.props.form.setFieldsValue({[e.modalFiled1]:this.state.insertFleet[e.modalFiled1],[e.modalFiled2]:this.state.insertFleet[e.modalFiled2]})})}),this.closeModal=(e=>{e&&e.stopPropagation(),this.setState({modalVisible:!1})}),this.insertFleet=(()=>{var e=this.state.insertFleet;return""===e.name?(ye["a"].error("\u53f8\u673a\u4e0d\u80fd\u4e3a\u7a7a"),!1):""===e.car_head_code?(ye["a"].error("\u8f66\u5934\u4e0d\u80fd\u4e3a\u7a7a"),!1):(e.id=this.props.match.params.LogisticsDetail,void this.props.dispatch({type:"logistics/insertFleet",payload:{form:e}}).then(()=>{this.setState({insertStatus:!1,insertFleet:{name:"",mobile:"",car_head_code:"",imei:"",car_body_code:"",car_load:""}}),this.fetchFleetList()}))}),this.deleteFleet=(e=>{this.props.dispatch({type:"logistics/deleteFleet",payload:{id:e}}).then(()=>{this.forceUpdate(),this.props.dispatch({type:"logistics/fetchFleetList",payload:{id:this.props.match.params.LogisticsDetail}})})}),this.handleSubmit=(e=>{e&&e.preventDefault(),this.props.form.validateFields((e,t)=>{if(!e){var a=this.state,i=a.insertFleet,l=a.modalFiled1,s=a.modalFiled2,n=a.insertStatus;n?(this.setState({insertFleet:ue()({},i,{[l]:t[l],[s]:t[s]})}),this.closeModal()):(t.id=this.state.modifyId,console.log(t),this.props.dispatch({type:"logistics/updateFleet",payload:{form:t}}).then(()=>{this.closeModal(),this.fetchFleetList(this.props.fleetPage)}))}})}),this.parseNumber=((e,t,a)=>{if("car_load"!==e)return!1;var i=a.target.value;if(""===i)return!1;isNaN(i)&&(i=0);var l=Object(H["a"])(i,t);this.props.form.setFieldsValue({[e]:l})}),this.cancelInsert=(()=>{this.setState({insertStatus:!1,insertFleet:{name:"",mobile:"",car_head_code:"",imei:"",car_body_code:"",car_load:""}})}),this.deleteInsertCarBody=(()=>{this.setState({insertFleet:ue()({},this.state.insertFleet,{car_body_code:"",car_load:""})})}),this.deleteFleetCarBody=((e,t)=>{this.props.dispatch({type:"logistics/deleteFleetCarBody",payload:{id:e,car_body_id:t}}).then(()=>{this.fetchFleetList(this.props.fleetPage)})}),this.renderInsertItem=(()=>{var e=this.state,t=e.labelList,i=e.insertFleet;return _.a.createElement(C["a"],{span:24,xxl:12,style:{position:"relative"}},_.a.createElement(C["a"],{span:22,className:_e.a["fleet-item"]},_.a.createElement(C["a"],{span:7},_.a.createElement("div",{className:_e.a["item-box"]},_.a.createElement("div",{className:_e.a["box-left"]},_.a.createElement("img",{src:a("2r/d"),alt:""})),_.a.createElement("div",{className:_e.a["box-right"]},""===i.name?_.a.createElement("div",{style:{cursor:"pointer"},onClick:this.openModal.bind(null,ue()({type:"\u65b0\u589e"},t[0]),!1)},_.a.createElement(Y["d"],{type:"icon-icon-test"}),_.a.createElement("span",{style:{marginLeft:20},className:"font-gray-color"},"\u65b0\u589e\u53f8\u673a")):_.a.createElement(_.a.Fragment,null,_.a.createElement("div",null,i.name),_.a.createElement("div",null,i.mobile))),""===i.name?null:_.a.createElement("div",{className:_e.a["hover-box"]},_.a.createElement(u["a"],{type:"primary",onClick:this.openModal.bind(null,ue()({type:"\u7f16\u8f91"},t[0]),!1)},"\u7f16\u8f91")))),_.a.createElement(C["a"],{span:1},_.a.createElement("div",{style:{display:"flex",alignItems:"center",height:100,justifyContent:"center"}},_.a.createElement(Y["d"],{type:"icon-guanlian",className:_e.a["iconFont"]}))),_.a.createElement(C["a"],{span:8},_.a.createElement("div",{className:_e.a["item-box"]},_.a.createElement("div",{className:_e.a["box-left"]},_.a.createElement("img",{src:a("ePHl"),alt:""})),_.a.createElement("div",{className:_e.a["box-right"]},""===i.car_head_code?_.a.createElement("div",{style:{cursor:"pointer"},onClick:this.openModal.bind(null,ue()({type:"\u65b0\u589e"},t[1]),!1)},_.a.createElement(Y["d"],{type:"icon-icon-test"}),_.a.createElement("span",{style:{marginLeft:20},className:"font-gray-color"},"\u65b0\u589e\u8f66\u5934")):_.a.createElement(_.a.Fragment,null,_.a.createElement("div",null,i.car_head_code),_.a.createElement("div",null,_.a.createElement("span",{className:_e.a["box-right-title"]},"\u4e32\u53f7"),_.a.createElement("span",null,i.imei)))),""===i.car_head_code?null:_.a.createElement("div",{className:_e.a["hover-box"]},_.a.createElement(u["a"],{type:"primary",onClick:this.openModal.bind(null,ue()({type:"\u7f16\u8f91"},t[1]),!1)},"\u7f16\u8f91")))),_.a.createElement(C["a"],{span:1},_.a.createElement("div",{style:{display:"flex",alignItems:"center",height:100,justifyContent:"center"}},_.a.createElement(Y["d"],{type:"icon-guanlian",className:_e.a["iconFont"]}))),_.a.createElement(C["a"],{span:7},_.a.createElement("div",{className:_e.a["item-box"]},_.a.createElement("div",{className:_e.a["box-left"]},_.a.createElement("img",{src:a("GVO7"),alt:""})),_.a.createElement("div",{className:_e.a["box-right"]},""===i.car_body_code?_.a.createElement("div",{style:{cursor:"pointer"},onClick:this.openModal.bind(null,ue()({type:"\u65b0\u589e"},t[2]),!1)},_.a.createElement(Y["d"],{type:"icon-icon-test"}),_.a.createElement("span",{style:{marginLeft:20},className:"font-gray-color"},"\u65b0\u589e\u8f66\u6302")):_.a.createElement(_.a.Fragment,null,_.a.createElement("div",null,i.car_body_code),_.a.createElement("div",null,_.a.createElement("span",{className:_e.a["box-right-title"]},"\u8f7d\u91cd"),_.a.createElement("span",null,i.car_load)))),""===i.car_body_code?null:_.a.createElement("div",{className:_e.a["hover-box"]},_.a.createElement(u["a"],{type:"primary",onClick:this.openModal.bind(null,ue()({type:"\u7f16\u8f91"},t[2]),!1)},"\u7f16\u8f91"),_.a.createElement(he["a"],{title:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u8f66\u6302\uff1f",okType:"danger",onConfirm:this.deleteInsertCarBody,icon:_.a.createElement(D["a"],{style:{color:"red"},type:"exclamation-circle"})},_.a.createElement(u["a"],{className:"red-btn"},"\u5220\u9664")))))),_.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"absolute",top:38,right:38}},_.a.createElement(Y["d"],{type:"icon-icon--1",className:_e.a.confirmBtn,onClick:this.insertFleet}),_.a.createElement(he["a"],{title:"\u662f\u5426\u53d6\u6d88\u65b0\u589e\u64cd\u4f5c\uff1f",okType:"danger",onConfirm:this.cancelInsert},_.a.createElement(Y["d"],{type:"icon-icon--",className:_e.a.cancelBtn}))))}),this.mapItem=(()=>{var e=this.state,t=e.managementStatus,i=e.labelList;return this.props.logistics.fleetList.length?this.props.logistics.fleetList.map((e,l)=>_.a.createElement(C["a"],{span:24,xxl:12,key:l},_.a.createElement(C["a"],{span:22,className:_e.a["fleet-item"]},_.a.createElement(C["a"],{span:24,style:t?{display:"flex"}:{display:"none"},className:_e.a["fleet-item-modify"]},_.a.createElement(he["a"],{title:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u6b64\u6761\u8bb0\u5f55\uff1f",okType:"danger",onConfirm:this.deleteFleet.bind(null,e.id),icon:_.a.createElement(D["a"],{style:{color:"red"},type:"exclamation-circle"})},_.a.createElement(u["a"],{className:"red-btn"},"\u5220\u9664"))),_.a.createElement(C["a"],{span:7},_.a.createElement("div",{className:_e.a["item-box"]},_.a.createElement("div",{className:_e.a["box-left"]},_.a.createElement("img",{src:a("2r/d"),alt:""})),e.name?_.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:_e.a["box-right"]},_.a.createElement("div",null,e.name),_.a.createElement("div",null,e.mobile)),_.a.createElement("div",{className:_e.a["hover-box"]},_.a.createElement(u["a"],{type:"primary",onClick:this.openModal.bind(null,ue()({type:"\u7f16\u8f91"},i[0]),ue()({},e))},"\u7f16\u8f91"))):_.a.createElement("div",{style:{width:"100%",textAlign:"center"}},"\u6682\u65e0"))),_.a.createElement(C["a"],{span:1},_.a.createElement("div",{style:{display:"flex",alignItems:"center",height:100,justifyContent:"center"}},_.a.createElement(Y["d"],{type:"icon-guanlian",className:_e.a["iconFont"]}))),_.a.createElement(C["a"],{span:8},_.a.createElement("div",{className:_e.a["item-box"]},_.a.createElement("div",{className:_e.a["box-left"]},_.a.createElement("img",{src:a("ePHl"),alt:""})),e.car_head_code?_.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:_e.a["box-right"]},_.a.createElement("div",null,e.car_head_code),_.a.createElement("div",null,_.a.createElement("span",{className:_e.a["box-right-title"]},"\u4e32\u53f7"),_.a.createElement("span",null,e.imei))),_.a.createElement("div",{className:_e.a["hover-box"]},_.a.createElement(u["a"],{type:"primary",onClick:this.openModal.bind(null,ue()({type:"\u7f16\u8f91"},i[1]),ue()({},e))},"\u7f16\u8f91"))):_.a.createElement("div",{style:{width:"100%",textAlign:"center"}},"\u6682\u65e0"))),_.a.createElement(C["a"],{span:1},_.a.createElement("div",{style:{display:"flex",alignItems:"center",height:100,justifyContent:"center"}},_.a.createElement(Y["d"],{type:"icon-guanlian",className:_e.a["iconFont"]}))),_.a.createElement(C["a"],{span:7},_.a.createElement("div",{className:_e.a["item-box"]},_.a.createElement("div",{className:_e.a["box-left"]},_.a.createElement("img",{src:a("GVO7"),alt:""})),e.car_body_code?_.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:_e.a["box-right"]},_.a.createElement("div",null,e.car_body_code),_.a.createElement("div",null,_.a.createElement("span",{className:_e.a["box-right-title"]},"\u8f7d\u91cd"),_.a.createElement("span",null,e.car_load))),_.a.createElement("div",{className:_e.a["hover-box"]},_.a.createElement(u["a"],{type:"primary",onClick:this.openModal.bind(null,ue()({type:"\u7f16\u8f91"},i[2]),ue()({},e))},"\u7f16\u8f91"),_.a.createElement(he["a"],{title:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u8f66\u6302\uff1f",okType:"danger",onConfirm:this.deleteFleetCarBody.bind(null,e.id,e.car_body_id),icon:_.a.createElement(D["a"],{style:{color:"red"},type:"exclamation-circle"})},_.a.createElement(u["a"],{className:"red-btn"},"\u5220\u9664")))):_.a.createElement("div",{style:{width:"100%",textAlign:"center"}},"\u6682\u65e0",_.a.createElement("div",{className:_e.a["hover-box"]},_.a.createElement(u["a"],{type:"primary",onClick:()=>this.child.openModal(e.id)},"\u6dfb\u52a0")))))))):_.a.createElement(pe["a"],null)}),this.upLoadExcel=(e=>{this.props.dispatch({type:"logistics/upLoadExcel",payload:{file:e}}).then(()=>{this.fetchFleetList()})}),this.state={managementStatus:!1,modalVisible:!1,modalVisible2:!1,modalTitle:"",modalLabel1:"",modalFiled1:"name",modalLabel2:"",modalFiled2:"mobile",labelList:[{modalTitle:"\u53f8\u673a",modalLabel1:"\u53f8\u673a\u540d\u5b57",modalFiled1:"name",modalLabel2:"\u8054\u7cfb\u65b9\u5f0f",modalFiled2:"mobile"},{modalTitle:"\u8f66\u5934",modalLabel1:"\u8f66\u724c\u53f7\u7801",modalFiled1:"car_head_code",modalLabel2:"GPS\u4e32\u53f7",modalFiled2:"imei"},{modalTitle:"\u8f66\u6302",modalLabel1:"\u8f66\u724c\u53f7\u7801",modalFiled1:"car_body_code",modalLabel2:"\u8f7d\u91cd\u6570\u91cf",modalFiled2:"car_load"}],insertStatus:!1,insertFleet:{name:"",mobile:"",car_head_code:"",imei:"",car_body_code:"",car_load:""},modifyId:null}}componentWillMount(){this.fetchFleetList()}render(){var e=this.state,t=e.managementStatus,a=e.modalTitle,i=e.modalLabel1,l=e.modalFiled1,s=e.modalLabel2,n=e.modalFiled2,r=e.insertStatus,o=this.props,c=o.form,m=o.loading,d=o.logistics,p=d.fleetPage,h=d.fleetTotal,g=c.getFieldDecorator,y={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},E={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}};return _.a.createElement("div",{style:{padding:"0 30px",marginTop:"-15px"}},_.a.createElement("div",{className:"tabs-toolbar"},t?_.a.createElement(_.a.Fragment,null,_.a.createElement(u["a"],{className:"yellow-btn",style:{marginRight:10},onClick:()=>this.setState({managementStatus:!t})},"\u5b8c\u6210"),_.a.createElement(u["a"],{disabled:!0,style:{marginRight:10}},"\u65b0\u589e\u8f66\u961f"),_.a.createElement(de["a"],{accept:".xls,.xlsx",name:"excel",action:`${Y["c"]}/index/driver/car-import`,customRequest:this.upLoadExcel,showUploadList:!1},_.a.createElement(u["a"],{disabled:!0,loading:m},"\u5bfc\u5165\u8f66\u961f"))):r?_.a.createElement(_.a.Fragment,null,_.a.createElement(u["a"],{disabled:!0,style:{marginRight:10}},"\u7ba1\u7406\u8f66\u961f"),_.a.createElement(u["a"],{disabled:!0,style:{marginRight:10}},"\u65b0\u589e\u8f66\u961f"),_.a.createElement(de["a"],{accept:".xls,.xlsx",name:"excel",action:`${Y["c"]}/index/driver/car-import`,customRequest:this.upLoadExcel,showUploadList:!1},_.a.createElement(u["a"],{disabled:!0,loading:m},"\u5bfc\u5165\u8f66\u961f"))):_.a.createElement(_.a.Fragment,null,_.a.createElement(u["a"],{type:"primary",style:{marginRight:10},onClick:()=>this.setState({managementStatus:!t})},"\u7ba1\u7406\u8f66\u961f"),_.a.createElement(u["a"],{type:"primary",style:{marginRight:10},onClick:()=>this.setState({insertStatus:!0})},"\u65b0\u589e\u8f66\u961f"),_.a.createElement(de["a"],{accept:".xls,.xlsx",name:"excel",action:`${Y["c"]}/index/driver/car-import`,customRequest:this.upLoadExcel,showUploadList:!1},_.a.createElement(u["a"],{type:"primary",loading:m},"\u5bfc\u5165\u8f66\u961f")))),_.a.createElement(x["a"],null,r?this.renderInsertItem():null,this.mapItem()),h-0>0&&_.a.createElement("div",{style:{textAlign:"center",marginTop:15}},_.a.createElement(me["a"],{current:p,total:h,onChange:this.fetchFleetList})),_.a.createElement(re["a"],{title:a,visible:this.state.modalVisible,footer:null,width:600,destroyOnClose:!0,onCancel:this.closeModal,maskClosable:!1},_.a.createElement(S["a"],null,_.a.createElement(S["a"].Item,ce()({},y,{label:i}),g(`${l}`,{rules:[{required:!0}]})(_.a.createElement(N["a"],{placeholder:`\u8bf7\u8f93\u5165${i}`}))),_.a.createElement(S["a"].Item,ce()({},y,{label:s}),g(`${n}`,{rules:[{required:!0}]})(_.a.createElement(N["a"],{placeholder:`\u8bf7\u8f93\u5165${s}`,onBlur:this.parseNumber.bind(null,`${n}`,3),addonAfter:"\u8f7d\u91cd\u6570\u91cf"===s?"\u5428":null}))),_.a.createElement(S["a"].Item,E,_.a.createElement(u["a"],{type:"primary",loading:m,onClick:this.handleSubmit},"\u786e\u5b9a"),_.a.createElement(u["a"],{className:"red-btn",style:{marginLeft:20,marginTop:20},onClick:this.closeModal},"\u53d6\u6d88")))),_.a.createElement(be,{wrappedComponentRef:e=>this.child=e,fetchFleetList:this.fetchFleetList,fleetPage:p}))}},K=z))||K)||K)||K),be=(J=Object(f["connect"])(),Z=S["a"].create(),J(G=Z((U=class extends E["Component"]{constructor(){super(...arguments),this.state={modalVisible:!1,id:null},this.openModal=(e=>{this.setState({modalVisible:!0,id:e})}),this.closeModal=(e=>{e&&e.stopPropagation(),this.setState({modalVisible:!1,id:null})}),this.handleSubmit=(e=>{e&&e.preventDefault(),this.props.form.validateFields((e,t)=>{e||this.props.dispatch({type:"logistics/updateFleet",payload:{form:{car_body_code:t.car_body_code,car_load:t.car_load,id:this.state.id}}}).then(()=>{this.closeModal(),this.props.fetchFleetList(this.props.fleetPage)})})}),this.parseNumber=((e,t,a)=>{var i=a.target.value;if(""===i)return!1;isNaN(i)&&(i=0);var l=Object(H["a"])(i,t);this.props.form.setFieldsValue({[e]:l})})}render(){var e=this.props,t=e.form,a=e.loading,i=t.getFieldDecorator,l={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},s={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}};return _.a.createElement(re["a"],{title:"\u6dfb\u52a0\u8f66\u6302",visible:this.state.modalVisible,footer:null,width:600,destroyOnClose:!0,onCancel:this.closeModal,maskClosable:!1},_.a.createElement(S["a"],{onSubmit:this.handleSubmit},_.a.createElement(S["a"].Item,ce()({},l,{label:"\u8f66\u724c\u53f7\u7801"}),i("car_body_code",{rules:[{required:!0}]})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u8f93\u5165\u8f66\u724c\u53f7\u7801"}))),_.a.createElement(S["a"].Item,ce()({},l,{label:"\u8f7d\u91cd\u6570\u91cf"}),i("car_load",{rules:[{required:!0}]})(_.a.createElement(N["a"],{placeholder:"\u8bf7\u8f93\u5165\u8f7d\u91cd\u6570\u91cf",onBlur:this.parseNumber.bind(null,"car_load",3),addonAfter:"\u5428"}))),_.a.createElement(S["a"].Item,s,_.a.createElement(u["a"],{type:"primary",htmlType:"submit",loading:a},"\u786e\u5b9a"),_.a.createElement(u["a"],{className:"red-btn",style:{marginLeft:20,marginTop:20},onClick:this.closeModal},"\u53d6\u6d88"))))}},G=U))||G)||G),ve=fe,xe=(a("g9YV"),a("wCAj")),Ce=(a("iQDF"),a("+eQT")),Le=a("ZJHh"),Fe=k["a"].Option,Ne=(Q=Object(f["connect"])(e=>{var t=e.logistics,a=e.loading;return{logistics:t,loading:a.models.logistics}}),Q((X=class extends E["Component"]{constructor(){super(...arguments),this.state={load_time_start:null,load_time_end:null,endOpen:!1,selectedRowKeys:[],car_head_id:"",supp_goods_id:"",cust_site_id:"",status:""},this.disabledStartDate=(e=>{var t=this.state.load_time_end;return!(!e||!t)&&e.valueOf()>t.valueOf()}),this.disabledEndDate=(e=>{var t=this.state.load_time_start;return!(!e||!t)&&e.valueOf()<=t.valueOf()}),this.onStartChange=(e=>{this.onChange("load_time_start",e)}),this.onEndChange=(e=>{this.onChange("load_time_end",e)}),this.onChange=((e,t)=>{this.fetchHistoryList(e,t)}),this.handleStartOpenChange=(e=>{e||this.setState({endOpen:!0})}),this.handleEndOpenChange=(e=>{this.setState({endOpen:e})}),this.onSelectedRowKeysChange=((e,t)=>{this.setState({selectedRowKeys:e})}),this.selectRow=(e=>{var t=[...this.state.selectedRowKeys];t.indexOf(e.id)>=0?t.splice(t.indexOf(e.id),1):t.push(e.id),this.setState({selectedRowKeys:t})}),this.fetchHistoryList=((e,t)=>{console.log(e),console.log(t),this.setState({[e]:t},()=>{"load_time_start"!==e&&"load_time_end"!==e||(t=t?t.format("YYYY-MM-DD"):t),this.props.dispatch({type:"logistics/fetchLogisticsHistory",payload:{form:ue()({logistics_id:this.props.match.params.LogisticsDetail,load_time_start:this.state.load_time_start?this.state.load_time_start.format("YYYY-MM-DD"):"",load_time_end:this.state.load_time_end?this.state.load_time_end.format("YYYY-MM-DD"):"",car_head_id:this.state.car_head_id,supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status},{[e]:t})}})})}),this.pageChange=(e=>{var t=this.state,a=t.load_time_start,i=t.load_time_end,l=t.car_head_id,s=t.supp_goods_id,n=t.cust_site_id,r=t.status;this.props.dispatch({type:"client/fetchClientHistory",payload:{form:{logistics_id:this.props.match.params.LogisticsDetail,load_time_start:a,load_time_end:i,car_head_id:l,supp_goods_id:s,cust_site_id:n,status:r},page:e}})})}componentDidMount(){console.log(this.props.match),this.props.dispatch({type:"logistics/fetchLogisticsCondition",payload:{logistics_id:this.props.match.params.LogisticsDetail}}).then(()=>{var e=this.props.logistics.logisticsCondition;console.log(e),this.setState({car_head_id:e.cars.length?e.cars[0].id:"",supp_goods_id:e.goods.length?e.goods[0].id:"",cust_site_id:e.sites.length?e.sites[0].id:""}),this.props.dispatch({type:"logistics/fetchLogisticsHistory",payload:{form:{logistics_id:this.props.match.params.LogisticsDetail,load_time_start:"",load_time_end:"",car_head_id:e.cars.length?e.cars[0].id:"",supp_goods_id:e.goods.length?e.goods[0].id:"",cust_site_id:e.sites.length?e.sites[0].id:"",status:""}}})})}render(){var e=this.state,t=e.load_time_start,a=e.load_time_end,i=e.endOpen,l=e.selectedRowKeys,s=e.car_head_id,n=e.supp_goods_id,r=e.cust_site_id,o=e.status,c=this.props,m=c.logistics,d=c.loading,p=m.logisticsHistoryList,h=m.logisticsHistoryPage,g=m.logisticsHistoryTotal,y=m.logisticsCondition;this.onSelectedRowKeysChange;return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{style:{textAlign:"right",fontSize:"1rem",margin:"5px 0 20px"}},_.a.createElement("span",{style:{marginRight:10}},"\u88c5\u8f66\u65f6\u95f4"),_.a.createElement(Ce["a"],{disabledDate:this.disabledStartDate,format:"YYYY-MM-DD",value:t,placeholder:"\u8d77\u59cb\u65f6\u95f4",onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange}),_.a.createElement("span",{style:{margin:"0 10px"}},"-"),_.a.createElement(Ce["a"],{disabledDate:this.disabledEndDate,format:"YYYY-MM-DD",value:a,placeholder:"\u622a\u6b62\u65f6\u95f4",onChange:this.onEndChange,open:i,onOpenChange:this.handleEndOpenChange}),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u8f66\u724c"),_.a.createElement(k["a"],{value:s,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"car_head_id")},y.cars&&y.cars.map((e,t)=>{return _.a.createElement(Fe,{key:t,value:e.id},e.car_code)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u6c14\u6e90"),_.a.createElement(k["a"],{value:n,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"supp_goods_id")},y.goods&&y.goods.map((e,t)=>{return _.a.createElement(Fe,{key:t,value:e.id},e.goods_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u7ad9\u70b9"),_.a.createElement(k["a"],{value:r,style:{width:"8.75rem"},onChange:this.fetchHistoryList.bind(null,"cust_site_id")},y.sites&&y.sites.map((e,t)=>{return _.a.createElement(Fe,{key:t,value:e.id},e.site_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u72b6\u6001"),_.a.createElement(k["a"],{value:o,style:{width:"8.75rem",marginRight:20},onChange:this.fetchHistoryList.bind(null,"status")},_.a.createElement(Fe,{value:""},"\u5168\u90e8"),_.a.createElement(Fe,{value:21},"\u5f85\u6211\u65b9\u786e\u8ba4"),_.a.createElement(Fe,{value:22},"\u5f85\u91c7\u8d2d"),_.a.createElement(Fe,{value:23},"\u5f85\u4f9b\u5e94\u5546\u63a5\u5355"),_.a.createElement(Fe,{value:24},"\u5f85\u8c03\u5ea6"),_.a.createElement(Fe,{value:25},"\u5f85\u51fa\u53d1"),_.a.createElement(Fe,{value:26},"\u5f85\u88c5\u8d27"),_.a.createElement(Fe,{value:27},"\u5f85\u5378\u8d27"),_.a.createElement(Fe,{value:28},"\u5f85\u5bf9\u8d26"),_.a.createElement(Fe,{value:29},"\u5bf9\u8d26\u4e2d"),_.a.createElement(Fe,{value:30},"\u5df2\u5bf9\u8d26"),_.a.createElement(Fe,{value:31},"\u5f85\u7ed3\u6b3e"),_.a.createElement(Fe,{value:32},"\u5df2\u5f00\u7968"),_.a.createElement(Fe,{value:33},"\u5df2\u5b8c\u6210"),_.a.createElement(Fe,{value:34},"\u5df2\u53d6\u6d88")),_.a.createElement(u["a"],{type:"primary"},"\u5168\u90e8\u5bf9\u8d26")),_.a.createElement("div",{className:"table-container"},_.a.createElement(xe["a"],{columns:Le["a"],dataSource:p,loading:d,pagination:!1,rowKey:e=>e.id,highLightColor:"#aaa",rowClassName:(e,t)=>{return t%2===0?"oddRow":"evenRow"},onRow:e=>({onClick:()=>{this.selectRow(e)}})})),_.a.createElement("div",{style:{textAlign:"center",marginTop:40}},_.a.createElement(me["a"],{current:h,total:g,onChange:this.pageChange})))}},W=X))||W),De=Object(w["a"])(Ne),Se=k["a"].Option,ke=u["a"].Group,we=(ee=Object(f["connect"])(e=>{var t=e.logistics,a=e.loading;return{logistics:t,loading:a.models.logistics}}),ee((ae=class extends E["Component"]{constructor(){super(...arguments),this.state={time_start:null,time_end:null,endOpen:!1,supp_goods_id:"",cust_site_id:"",status:""},this.disabledStartDate=(e=>{var t=this.state.time_end;return!(!e||!t)&&e.valueOf()>t.valueOf()}),this.disabledEndDate=(e=>{var t=this.state.time_start;return!(!e||!t)&&e.valueOf()<=t.valueOf()}),this.onChange=((e,t)=>{this.fetchReconciliationHistoryList(e,t)}),this.fetchReconciliationHistoryList=((e,t)=>{console.log(e),console.log(t),this.setState({[e]:t},()=>{"time_start"!==e&&"time_end"!==e||(t=t?t.format("YYYY-MM-DD"):t),this.props.dispatch({type:"logistics/fetchReconciliationHistory",payload:{form:ue()({logistics_id:this.props.match.params.LogisticsDetail,time_start:this.state.time_start?this.state.time_start.format("YYYY-MM-DD"):"",time_end:this.state.time_end?this.state.time_end.format("YYYY-MM-DD"):"",supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status},{[e]:t})}})})}),this.onStartChange=(e=>{this.onChange("time_start",e)}),this.onEndChange=(e=>{this.onChange("time_end",e)}),this.handleStartOpenChange=(e=>{e||this.setState({endOpen:!0})}),this.handleEndOpenChange=(e=>{this.setState({endOpen:e})}),this.confirmReconciliation=(e=>{this.props.dispatch({type:"logistics/confirmReconciliation",payload:{id:e}}).then(()=>{this.props.dispatch({type:"logistics/fetchReconciliationHistory",payload:{form:{logistics_id:this.props.match.params.LogisticsDetail,time_start:this.state.time_start?this.state.time_start.format("YYYY-MM-DD"):"",time_end:this.state.time_end?this.state.time_end.format("YYYY-MM-DD"):"",supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status}}})})}),this.payment=(e=>{this.props.dispatch({type:"logistics/payment",payload:{id:e}}).then(()=>{this.props.dispatch({type:"logistics/fetchReconciliationHistory",payload:{form:{logistics_id:this.props.match.params.LogisticsDetail,time_start:this.state.time_start?this.state.time_start.format("YYYY-MM-DD"):"",time_end:this.state.time_end?this.state.time_end.format("YYYY-MM-DD"):"",supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status}}})})}),this.billing=(e=>{this.props.dispatch({type:"logistics/billing",payload:{id:e}}).then(()=>{this.props.dispatch({type:"logistics/fetchReconciliationHistory",payload:{form:{logistics_id:this.props.match.params.LogisticsDetail,time_start:this.state.time_start?this.state.time_start.format("YYYY-MM-DD"):"",time_end:this.state.time_end?this.state.time_end.format("YYYY-MM-DD"):"",supp_goods_id:this.state.supp_goods_id,cust_site_id:this.state.cust_site_id,status:this.state.status}}})})})}componentDidMount(){this.props.dispatch({type:"logistics/fetchLogisticsCondition",payload:{logistics_id:this.props.match.params.LogisticsDetail}}).then(()=>{var e=this.props.logistics.logisticsCondition;this.setState({supp_goods_id:e.goods.length?e.goods[0].id:"",cust_site_id:e.sites.length?e.sites[0].id:""}),this.props.dispatch({type:"logistics/fetchReconciliationHistory",payload:{form:{logistics_id:this.props.match.params.LogisticsDetail,time_start:"",time_end:"",supp_goods_id:e.goods.length?e.goods[0].id:"",cust_site_id:e.sites.length?e.sites[0].id:"",status:""}}})})}render(){var e=this.state,t=e.time_start,a=e.time_end,i=e.endOpen,l=e.supp_goods_id,s=e.cust_site_id,n=e.status,r=this.props,o=r.logistics,c=r.loading,m=o.reconciliationHistoryList,d=o.reconciliationHistoryPage,p=o.reconciliationHistoryTotal,h=o.logisticsCondition,g=[{align:"center",title:"\u64cd\u4f5c\u65f6\u95f4",dataIndex:"check_time",key:"check_time"},{align:"center",title:"\u7269\u6d41",dataIndex:"kh",key:"kh"},{align:"center",title:"\u6c14\u6e90",dataIndex:"goods",key:"goods"},{align:"center",title:"\u7ad9\u70b9",dataIndex:"sites",key:"sites"},{align:"center",title:"\u5bf9\u8d26\u5468\u671f",key:"dzzq",render:(e,t)=>{return _.a.createElement("div",null,t.account_cycle_start," - ",t.account_cycle_end)}},{align:"center",title:"\u5bf9\u8d26\u91cf",dataIndex:"order_delivery_count",key:"order_delivery_count"},{align:"center",title:"\u5bf9\u8d26\u989d\uff08\u5143\uff09",dataIndex:"total_account",key:"total_account"},{align:"center",title:"\u72b6\u6001",dataIndex:"status",key:"status",render:e=>_.a.createElement("div",null,Y["o"][e])},{align:"center",title:"\u64cd\u4f5c",dataIndex:"cz",key:"cz",render:(e,i,r)=>_.a.createElement(ke,{className:"button-group"},_.a.createElement(u["a"],{className:"line-primary",onClick:()=>{var e=new URL(window.location.href),t=e.pathname.split("/");b["a"].push(`/${t[1]}/${t[2]}/ReconciliationDetails?status=${i.status}&payment_status=${i.payment_status}&invoice_status=${i.invoice_status}&id=${i.id}&${e.search.substr(1)}`)}},"\u660e\u7ec6"),_.a.createElement(u["a"],{className:"line-primary",onClick:()=>{window.location.href=`${Y["c"]}/index/logistics/corder-export?id=${i.id}`}},"\u5bfc\u51fa"),_.a.createElement(u["a"],{className:"line-primary",disabled:"61"!==i.status,onClick:this.confirmReconciliation.bind(null,i.id)},"\u786e\u8ba4\u5bf9\u8d26"),_.a.createElement(u["a"],{className:"line-primary",disabled:"1"===i.payment_status,onClick:this.payment.bind(null,i.id)},"\u786e\u8ba4\u7ed3\u6b3e"),_.a.createElement(u["a"],{className:"line-primary",disabled:"1"===i.invoice_status,onClick:this.billing.bind(null,i.id)},"\u786e\u8ba4\u5f00\u7968"),_.a.createElement(he["a"],{title:"\u786e\u5b9a\u5220\u9664\u6b64\u6761\u8bb0\u5f55\uff1f",placement:"left",onConfirm:()=>{this.props.dispatch({type:"logistics/deleteReconciliationHistory",payload:{id:i.id}}).then(()=>{this.props.dispatch({type:"logistics/fetchReconciliationHistory",payload:{form:{logistics_id:this.props.match.params.LogisticsDetail,time_start:t,time_end:a,supp_goods_id:l,cust_site_id:s,status:n},page:d}})})}},_.a.createElement(u["a"],{className:"line-red"},"\u5220\u9664")))}];return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"tabs-toolbar"},_.a.createElement("span",{style:{marginRight:10}},"\u88c5\u8f66\u65f6\u95f4"),_.a.createElement(Ce["a"],{disabledDate:this.disabledStartDate,format:"YYYY-MM-DD",value:t,placeholder:"\u8d77\u59cb\u65f6\u95f4",onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange}),_.a.createElement("span",{style:{margin:"0 10px"}},"-"),_.a.createElement(Ce["a"],{disabledDate:this.disabledEndDate,format:"YYYY-MM-DD",value:a,placeholder:"\u622a\u6b62\u65f6\u95f4",onChange:this.onEndChange,open:i,onOpenChange:this.handleEndOpenChange}),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u6c14\u6e90"),_.a.createElement(k["a"],{value:l,style:{width:"8.75rem"},onChange:this.fetchReconciliationHistoryList.bind(null,"supp_goods_id")},h.goods&&h.goods.map((e,t)=>{return _.a.createElement(Se,{key:t,value:e.id},e.goods_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u7ad9\u70b9"),_.a.createElement(k["a"],{value:s,style:{width:"8.75rem"},onChange:this.fetchReconciliationHistoryList.bind(null,"cust_site_id")},h.sites&&h.sites.map((e,t)=>{return _.a.createElement(Se,{key:t,value:e.id},e.site_name)})),_.a.createElement("span",{style:{margin:"0 12px 0 20px"}},"\u72b6\u6001"),_.a.createElement(k["a"],{value:n,style:{width:"8.75rem"}},_.a.createElement(Se,{value:""},"\u5168\u90e8"),_.a.createElement(Se,{value:61},"\u5bf9\u8d26\u4e2d"),_.a.createElement(Se,{value:62},"\u5df2\u5bf9\u8d26"),_.a.createElement(Se,{value:63},"\u5f85\u7ed3\u6b3e"),_.a.createElement(Se,{value:64},"\u5f85\u5f00\u7968"),_.a.createElement(Se,{value:65},"\u5df2\u5b8c\u6210"))),_.a.createElement("div",{className:"table-container"},_.a.createElement(xe["a"],{columns:g,dataSource:m,loading:c,pagination:!1,rowKey:e=>e.id,highLightColor:"#aaa",rowClassName:(e,t)=>{return t%2===0?"oddRow":"evenRow"}})),_.a.createElement("div",{style:{textAlign:"center",marginTop:40}},_.a.createElement(me["a"],{current:d,total:p})))}},te=ae))||te),Ye=Object(w["a"])(we),Ie=y["a"].TabPane,Oe=(ie=Object(f["connect"])(e=>{var t=e.logistics,a=e.loading;return{logistics:t,loading:a.models.logistics}}),ie((se=class extends E["Component"]{constructor(){super(...arguments),this.changeCurrentTabs=(e=>{this.props.dispatch({type:"logistics/save",payload:{logisticsInfoCurrentTabs:e}})}),this.deleteLogistics=(e=>{this.props.dispatch({type:"logistics/deleteLogistics",payload:{id:e}})})}componentWillMount(){this.props.dispatch({type:"logistics/inquireLogisticsInfoById",payload:{id:this.props.match.params.LogisticsDetail}})}render(){var e=this.props.logistics.logisticsInfoCurrentTabs,t=this.props.location.query.company,i=this.props.match.params.LogisticsDetail;return _.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"toolbar"},_.a.createElement(u["a"],{type:"primary",icon:"rollback",onClick:()=>b["a"].goBack()},"\u8fd4\u56de"),_.a.createElement("img",{src:a("645o"),style:{margin:"0 20px 0 40px"},alt:""}),_.a.createElement("span",{className:"font-purple-color",style:{fontWeight:"bold"}},t),"1"===e?_.a.createElement("div",{style:{float:"right"}},_.a.createElement(v["a"],{state:"deleteLogistics",id:i},_.a.createElement(u["a"],{className:"red-btn-line"},"\u5220\u9664\u7269\u6d41"))):null),_.a.createElement(y["a"],{activeKey:e,onChange:this.changeCurrentTabs,style:{padding:"12px 24px 60px"}},_.a.createElement(Ie,{tab:"\u7269\u6d41\u4fe1\u606f",key:"1"},_.a.createElement(ne,null)),_.a.createElement(Ie,{tab:"\u8f66\u961f\u5217\u8868",key:"2"},_.a.createElement(ve,null)),_.a.createElement(Ie,{tab:"\u7269\u6d41\u5386\u53f2",key:"3"},_.a.createElement(De,null)),_.a.createElement(Ie,{tab:"\u5bf9\u8d26\u5386\u53f2",key:"4"},_.a.createElement(Ye,null))))}},le=se))||le);t["default"]=Oe}}]);