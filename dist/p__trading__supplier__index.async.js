(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{"2r8n":function(e,a,t){"use strict";t.r(a);t("DjyN");var l,s,n,r,i,p,c,o=t("NUBc"),m=(t("Q9mQ"),t("diRs")),d=(t("DZo9"),t("8z0m")),u=(t("+L6B"),t("2/Rp")),h=(t("R9oj"),t("ECub")),E=(t("5NDa"),t("5rEg")),g=t("q1tI"),y=t.n(g),b=t("MuoO"),v=(t("2qtc"),t("kLXV")),f=(t("6UJt"),t("DFOY")),x=t("pVnL"),L=t.n(x),S=(t("y8nQ"),t("Vl3Y")),C=(t("OaEy"),t("2fM7")),I=(t("O3gP"),t("lrIw")),N=I["a"].Option,_=C["a"].Option,k=(l=Object(b["connect"])(e=>{var a=e.global,t=e.loading;return{global:a,loading:t.models.supplier}}),s=S["a"].create(),l(n=s((r=class extends g["Component"]{constructor(e){super(e),this.openInsertModal=(()=>{if(this.state.modalVisible)return!1;this.setState({modalVisible:!0}),this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"supp"}})}),this.closeInsertModal=(e=>{e&&e.stopPropagation(),this.setState({modalVisible:!1}),this.props.form.resetFields()}),this.loadData=(e=>{var a=e[e.length-1];a.loading=!0,this.props.dispatch({type:"global/inquireCascadeOptions",payload:{module:"supp",district_name:a.value,targetOption:a}}).then(()=>{})}),this.handleChange=(e=>{console.log(`selected ${e}`)}),this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFieldsAndScroll((e,a)=>{if(!e){var t={province:a.area_arr[0],city:a.area_arr[1],area:a.area_arr[2]||""};delete a.area_arr,Object.assign(a,t),this.props.dispatch({type:"supplier/insertSupplier",payload:{form:a}}).then(()=>{this.closeInsertModal(),this.props.dispatch({type:"supplier/fetchSupplierList",payload:{}})})}})}),this.state={modalVisible:!1,autoCompleteResult:[]}}render(){var e=this.state,a=e.modalVisible,t=e.autoCompleteResult,l=this.props,s=l.children,n=l.form,r=l.global,i=l.loading,p=r.cascadeOptions,c=n.getFieldDecorator,o={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},m={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},d=t.map(e=>y.a.createElement(N,{key:e},e));return y.a.createElement("div",{style:{display:"inline-block"},onClick:this.openInsertModal},s,y.a.createElement(v["a"],{visible:a,title:"\u65b0\u589e\u4f9b\u5e94\u5546",width:600,bodyStyle:{padding:"24px 60px"},footer:null,onCancel:this.closeInsertModal,maskClosable:!1},y.a.createElement(S["a"],{onSubmit:this.handleSubmit},y.a.createElement(S["a"].Item,L()({},o,{label:"\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7"}),c("tax_number",{rules:[{required:!0}]})(y.a.createElement(E["a"],{placeholder:"\u8bf7\u8f93\u5165\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7"}))),y.a.createElement(S["a"].Item,L()({},o,{label:"\u516c\u53f8\u5168\u79f0"}),c("company_full_name",{rules:[{required:!0}]})(y.a.createElement(E["a"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u5168\u79f0"}))),y.a.createElement(S["a"].Item,L()({},o,{label:"\u516c\u53f8\u7b80\u79f0"}),c("company_name",{rules:[{required:!0}]})(y.a.createElement(E["a"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u7b80\u79f0"}))),y.a.createElement(S["a"].Item,L()({},o,{label:"\u516c\u53f8\u7c7b\u578b"}),c("company_flow",{initialValue:"1"})(y.a.createElement(C["a"],{style:{width:"100%"},onChange:this.handleChange},y.a.createElement(_,{value:"1"},"\u8d38\u6613\u5546"),y.a.createElement(_,{value:"2"},"\u8fd0\u8d38\u5546"),y.a.createElement(_,{value:"3"},"\u6db2\u5382"),y.a.createElement(_,{value:"4"},"\u63a5\u6536\u7ad9")))),y.a.createElement(S["a"].Item,L()({},o,{label:"\u7701\u5e02\u533a\u53bf"}),c("area_arr",{initialValue:[],rules:[{type:"array",message:"\u7701\u5e02\u533a\u53bf"}]})(y.a.createElement(f["a"],{options:p,loadData:this.loadData,placeholder:"\u8bf7\u9009\u62e9\u7701\u5e02\u533a\u53bf"}))),y.a.createElement(S["a"].Item,L()({},o,{label:"\u8be6\u7ec6\u5730\u5740"}),c("company_address")(y.a.createElement(E["a"],{placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"}))),y.a.createElement(S["a"].Item,L()({},o,{label:"\u5f00\u6237\u94f6\u884c"}),c("bank")(y.a.createElement(I["a"],{dataSource:d,placeholder:"\u8bf7\u9009\u62e9\u5f00\u6237\u94f6\u884c"},y.a.createElement(E["a"],null)))),y.a.createElement(S["a"].Item,L()({},o,{label:"\u94f6\u884c\u8d26\u53f7"}),c("bank_account")(y.a.createElement(E["a"],{placeholder:"\u8bf7\u8f93\u5165\u94f6\u884c\u8d26\u53f7"}))),y.a.createElement(S["a"].Item,L()({},o,{label:"\u8054\u7cfb\u4eba"}),c("contact",{rules:[{required:!0}]})(y.a.createElement(E["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"}))),y.a.createElement(S["a"].Item,L()({},o,{label:"\u8054\u7cfb\u4eba\u7535\u8bdd"}),c("contact_phone",{rules:[{required:!0}]})(y.a.createElement(E["a"],{placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba\u7535\u8bdd"}))),y.a.createElement(S["a"].Item,m,y.a.createElement(u["a"],{type:"primary",htmlType:"submit",loading:i},"\u786e\u5b9a"),y.a.createElement(u["a"],{className:"red-btn",style:{marginLeft:20,marginTop:20},onClick:this.closeInsertModal},"\u53d6\u6d88")))))}},n=r))||n)||n),w=k,O=t("usdK"),q=t("mjZG"),D=t("FjRY"),V=E["a"].Search,M=(i=Object(b["connect"])(e=>{var a=e.supplier,t=e.loading;return{supplier:a,loading:t.models.supplier}}),i((c=class extends g["Component"]{constructor(){super(...arguments),this.fetchSupplierList=(()=>{this.props.dispatch({type:"supplier/fetchSupplierList",payload:{}})}),this.searchSupplierList=(e=>{this.props.dispatch({type:"supplier/fetchSupplierList",payload:{supp_name:e}})}),this.changeSupplierName=(e=>{this.props.dispatch({type:"supplier/save",payload:{supp_name:e.target.value}}),""===e.target.value&&this.searchSupplierList("")}),this.pageChange=(e=>{this.props.dispatch({type:"supplier/fetchSupplierList",payload:{page:e,supp_name:this.props.supplier.supp_name}})}),this.mapItem=(()=>{var e=this.props.supplier.supplierList;return e.length?e.map((e,a)=>y.a.createElement("div",{className:"list-item",key:e.id,onClick:this.goSupplierDetail.bind(null,e.id,e.company_name)},y.a.createElement("div",{className:"serial-num"},a+1),y.a.createElement("div",{className:"company-box"},y.a.createElement("div",null,y.a.createElement("img",{src:t("tTbt"),alt:""})),y.a.createElement("div",{className:"company-name"},e.company_name)),y.a.createElement("div",{className:"contact-box"},y.a.createElement("div",{className:"contact-name"},e.user),y.a.createElement("div",{className:"contact-phone"},e.phone)),y.a.createElement("div",{className:"sales-box"},y.a.createElement("div",null,y.a.createElement("div",null,"\u9500\u552e\u989d"),y.a.createElement("div",{className:"sales-price"},e.xiaoshoue," \u5143")),y.a.createElement("div",null,y.a.createElement("div",null,"\u9500\u552e\u91cf"),y.a.createElement("div",{className:"sales-num"},e.xiaoshouliang," \u5428"))))):y.a.createElement(h["a"],null)}),this.goSupplierDetail=((e,a)=>{O["a"].push(this.props.location.pathname+`/${e}?company=${a}`)}),this.upLoadExcel=(e=>{this.props.dispatch({type:"supplier/upLoadExcel",payload:{file:e}}).then(()=>{this.fetchSupplierList()})})}componentWillMount(){this.fetchSupplierList()}render(){var e=this.props.loading,a=this.props.supplier,t=a.supplierPage,l=a.supplierTotal,s=a.supp_name,n=y.a.createElement("div",null,"\u5bfc\u5165\u4fe1\u606f"),r=y.a.createElement(y.a.Fragment,null,y.a.createElement("div",null,y.a.createElement("p",null,"1. \u4e0a\u4f20\u4fe1\u606f\u6587\u4ef6\u65f6\uff0c\u8bf7\u4f7f\u7528excel\u6587\u4ef6\uff0c\u652f\u6301\u6587\u4ef6\u683c\u5f0f\u4e3a.xls\u6216\u8005.xlsx\uff1b"),y.a.createElement("p",null,"2. \u4fe1\u606f\u6587\u4ef6\u5185\u5bb9\uff0c\u8bf7\u4e25\u683c\u6309\u7167\u6a21\u677f\u6837\u5f0f\u586b\u5199\uff0c\u7ea2\u8272\u7684\u5b57\u6bb5\u5fc5\u987b\u586b\u5199\uff0c ",y.a.createElement("br",null),"\u5176\u4f59\u5b57\u6bb5\u82e5\u6ca1\u6709\u5219\u53ef\u4ee5\u4e0d\u586b\uff1b"),y.a.createElement("p",null,"3. \u5bfc\u5165\u4fe1\u606f\u65f6\uff0c\u5982\u679c\u548c\u5df2\u6709\u7684\u4fe1\u606f\u76f8\u540c\uff0c\u5219\u5bfc\u5165\u540e\u81ea\u52a8\u66f4\u65b0\u5176\u4fe1\u606f\uff1b")),y.a.createElement("div",{style:{textAlign:"center"}},y.a.createElement(u["a"],{className:"light-btn",onClick:D["a"].bind(null,"supplier")},"\u4e0b\u8f7d\u4f9b\u5e94\u5546\u6a21\u7248"),y.a.createElement(d["a"],{accept:".xls,.xlsx",name:"excel",action:`${q["c"]}/index/supp/import`,customRequest:this.upLoadExcel,showUploadList:!1},y.a.createElement(u["a"],{className:"light-btn",style:{marginLeft:20},loading:e},"\u5bfc\u5165\u4f9b\u5e94\u5546")),y.a.createElement(u["a"],{className:"light-btn",onClick:D["a"].bind(null,"gas"),style:{marginLeft:20}},"\u4e0b\u8f7d\u6c14\u6e90\u6a21\u7248"),y.a.createElement(d["a"],{accept:".xls,.xlsx",name:"excel",action:`${q["c"]}/index/goods/goods-import`,customRequest:this.upLoadExcel,showUploadList:!1},y.a.createElement(u["a"],{className:"light-btn",style:{marginLeft:20},loading:e},"\u5bfc\u5165\u6c14\u6e90"))));return y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"toolbar"},y.a.createElement(w,null,y.a.createElement(u["a"],{type:"primary"},"\u65b0\u589e\u4f9b\u5e94\u5546")),y.a.createElement(m["a"],{placement:"bottomLeft",title:n,content:r,trigger:"click"},y.a.createElement(u["a"],{type:"primary",style:{marginLeft:10}},"\u5bfc\u5165\u4fe1\u606f")),y.a.createElement(V,{placeholder:"\u8bf7\u8f93\u5165\u4f9b\u5e94\u5546\u540d\u8fdb\u884c\u67e5\u627e",enterButton:"\u67e5\u627e",value:s,onChange:this.changeSupplierName,onSearch:this.searchSupplierList,style:{width:"25rem",height:"2.5rem",float:"right",marginTop:19}})),y.a.createElement("div",{style:{padding:24}},this.mapItem()),y.a.createElement("div",{style:{textAlign:"center",marginBottom:50}},y.a.createElement(o["a"],{current:t,total:l,pageSize:q["f"],onChange:this.pageChange})))}},p=c))||p);a["default"]=M}}]);